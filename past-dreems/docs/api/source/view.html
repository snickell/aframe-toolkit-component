<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>CodeRay output</title>
  <style type="text/css">
.CodeRay .line-numbers a {
  text-decoration: inherit;
  color: inherit;
}
body {
  background-color: white;
  padding: 0;
  margin: 0;
}
.CodeRay {
  background-color: hsl(0,0%,95%);
  border: 1px solid silver;
  color: black;
}
.CodeRay pre {
  margin: 0px;
}

span.CodeRay { white-space: pre; border: 0px; padding: 2px; }

table.CodeRay { border-collapse: collapse; width: 100%; padding: 2px; }
table.CodeRay td { padding: 2px 4px; vertical-align: top; }

.CodeRay .line-numbers {
  background-color: hsl(180,65%,90%);
  color: gray;
  text-align: right;
  -webkit-user-select: none;
  -moz-user-select: none;
  user-select: none;
}
.CodeRay .line-numbers a {
  background-color: hsl(180,65%,90%) !important;
  color: gray !important;
  text-decoration: none !important;
}
.CodeRay .line-numbers pre {
  word-break: normal;
}
.CodeRay .line-numbers a:target { color: blue !important; }
.CodeRay .line-numbers .highlighted { color: red !important; }
.CodeRay .line-numbers .highlighted a { color: red !important; }
.CodeRay span.line-numbers { padding: 0px 4px; }
.CodeRay .line { display: block; float: left; width: 100%; }
.CodeRay .code { width: 100%; }

.CodeRay .debug { color: white !important; background: blue !important; }

.CodeRay .annotation { color:#007 }
.CodeRay .attribute-name { color:#b48 }
.CodeRay .attribute-value { color:#700 }
.CodeRay .binary { color:#549 }
.CodeRay .binary .char { color:#325 }
.CodeRay .binary .delimiter { color:#325 }
.CodeRay .char { color:#D20 }
.CodeRay .char .content { color:#D20 }
.CodeRay .char .delimiter { color:#710 }
.CodeRay .class { color:#B06; font-weight:bold }
.CodeRay .class-variable { color:#369 }
.CodeRay .color { color:#0A0 }
.CodeRay .comment { color:#777 }
.CodeRay .comment .char { color:#444 }
.CodeRay .comment .delimiter { color:#444 }
.CodeRay .constant { color:#036; font-weight:bold }
.CodeRay .decorator { color:#B0B }
.CodeRay .definition { color:#099; font-weight:bold }
.CodeRay .delimiter { color:black }
.CodeRay .directive { color:#088; font-weight:bold }
.CodeRay .docstring { color:#D42; }
.CodeRay .doctype { color:#34b }
.CodeRay .done { text-decoration: line-through; color: gray }
.CodeRay .entity { color:#800; font-weight:bold }
.CodeRay .error { color:#F00; background-color:#FAA }
.CodeRay .escape  { color:#666 }
.CodeRay .exception { color:#C00; font-weight:bold }
.CodeRay .float { color:#60E }
.CodeRay .function { color:#06B; font-weight:bold }
.CodeRay .function .delimiter { color:#024; font-weight:bold }
.CodeRay .global-variable { color:#d70 }
.CodeRay .hex { color:#02b }
.CodeRay .id  { color:#33D; font-weight:bold }
.CodeRay .include { color:#B44; font-weight:bold }
.CodeRay .inline { background-color: hsla(0,0%,0%,0.07); color: black }
.CodeRay .inline-delimiter { font-weight: bold; color: #666 }
.CodeRay .instance-variable { color:#33B }
.CodeRay .integer  { color:#00D }
.CodeRay .imaginary { color:#f00 }
.CodeRay .important { color:#D00 }
.CodeRay .key { color: #606 }
.CodeRay .key .char { color: #60f }
.CodeRay .key .delimiter { color: #404 }
.CodeRay .keyword { color:#080; font-weight:bold }
.CodeRay .label { color:#970; font-weight:bold }
.CodeRay .local-variable { color:#950 }
.CodeRay .map .content { color:#808 }
.CodeRay .map .delimiter { color:#40A}
.CodeRay .map { background-color:hsla(200,100%,50%,0.06); }
.CodeRay .namespace { color:#707; font-weight:bold }
.CodeRay .octal { color:#40E }
.CodeRay .operator { }
.CodeRay .predefined { color:#369; font-weight:bold }
.CodeRay .predefined-constant { color:#069 }
.CodeRay .predefined-type { color:#0a8; font-weight:bold }
.CodeRay .preprocessor { color:#579 }
.CodeRay .pseudo-class { color:#00C; font-weight:bold }
.CodeRay .regexp { background-color:hsla(300,100%,50%,0.06); }
.CodeRay .regexp .content { color:#808 }
.CodeRay .regexp .delimiter { color:#404 }
.CodeRay .regexp .modifier { color:#C2C }
.CodeRay .reserved { color:#080; font-weight:bold }
.CodeRay .shell { background-color:hsla(120,100%,50%,0.06); }
.CodeRay .shell .content { color:#2B2 }
.CodeRay .shell .delimiter { color:#161 }
.CodeRay .string { background-color:hsla(0,100%,50%,0.05); }
.CodeRay .string .char { color: #b0b }
.CodeRay .string .content { color: #D20 }
.CodeRay .string .delimiter { color: #710 }
.CodeRay .string .modifier { color: #E40 }
.CodeRay .symbol { color:#A60 }
.CodeRay .symbol .content { color:#A60 }
.CodeRay .symbol .delimiter { color:#740 }
.CodeRay .tag { color:#070; font-weight:bold }
.CodeRay .type { color:#339; font-weight:bold }
.CodeRay .value { color: #088 }
.CodeRay .variable { color:#037 }

.CodeRay .insert { background: hsla(120,100%,50%,0.12) }
.CodeRay .delete { background: hsla(0,100%,50%,0.12) }
.CodeRay .change { color: #bbf; background: #007 }
.CodeRay .head { color: #f8f; background: #505 }
.CodeRay .head .filename { color: white; }

.CodeRay .delete .eyecatcher { background-color: hsla(0,100%,50%,0.2); border: 1px solid hsla(0,100%,45%,0.5); margin: -1px; border-bottom: none; border-top-left-radius: 5px; border-top-right-radius: 5px; }
.CodeRay .insert .eyecatcher { background-color: hsla(120,100%,50%,0.2); border: 1px solid hsla(120,100%,25%,0.5); margin: -1px; border-top: none; border-bottom-left-radius: 5px; border-bottom-right-radius: 5px; }

.CodeRay .insert .insert { color: #0c0; background:transparent; font-weight:bold }
.CodeRay .delete .delete { color: #c00; background:transparent; font-weight:bold }
.CodeRay .change .change { color: #88f }
.CodeRay .head .head { color: #f4f }

.CodeRay {
  border: none;
}
  </style>
</head>
<body>

<table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
<a href="#n4" name="n4">4</a>
<a href="#n5" name="n5">5</a>
<a href="#n6" name="n6">6</a>
<a href="#n7" name="n7">7</a>
<a href="#n8" name="n8">8</a>
<a href="#n9" name="n9">9</a>
<strong><a href="#n10" name="n10">10</a></strong>
<a href="#n11" name="n11">11</a>
<a href="#n12" name="n12">12</a>
<a href="#n13" name="n13">13</a>
<a href="#n14" name="n14">14</a>
<a href="#n15" name="n15">15</a>
<a href="#n16" name="n16">16</a>
<a href="#n17" name="n17">17</a>
<a href="#n18" name="n18">18</a>
<a href="#n19" name="n19">19</a>
<strong><a href="#n20" name="n20">20</a></strong>
<a href="#n21" name="n21">21</a>
<a href="#n22" name="n22">22</a>
<a href="#n23" name="n23">23</a>
<a href="#n24" name="n24">24</a>
<a href="#n25" name="n25">25</a>
<a href="#n26" name="n26">26</a>
<a href="#n27" name="n27">27</a>
<a href="#n28" name="n28">28</a>
<a href="#n29" name="n29">29</a>
<strong><a href="#n30" name="n30">30</a></strong>
<a href="#n31" name="n31">31</a>
<a href="#n32" name="n32">32</a>
<a href="#n33" name="n33">33</a>
<a href="#n34" name="n34">34</a>
<a href="#n35" name="n35">35</a>
<a href="#n36" name="n36">36</a>
<a href="#n37" name="n37">37</a>
<a href="#n38" name="n38">38</a>
<a href="#n39" name="n39">39</a>
<strong><a href="#n40" name="n40">40</a></strong>
<a href="#n41" name="n41">41</a>
<a href="#n42" name="n42">42</a>
<a href="#n43" name="n43">43</a>
<a href="#n44" name="n44">44</a>
<a href="#n45" name="n45">45</a>
<a href="#n46" name="n46">46</a>
<a href="#n47" name="n47">47</a>
<a href="#n48" name="n48">48</a>
<a href="#n49" name="n49">49</a>
<strong><a href="#n50" name="n50">50</a></strong>
<a href="#n51" name="n51">51</a>
<a href="#n52" name="n52">52</a>
<a href="#n53" name="n53">53</a>
<a href="#n54" name="n54">54</a>
<a href="#n55" name="n55">55</a>
<a href="#n56" name="n56">56</a>
<a href="#n57" name="n57">57</a>
<a href="#n58" name="n58">58</a>
<a href="#n59" name="n59">59</a>
<strong><a href="#n60" name="n60">60</a></strong>
<a href="#n61" name="n61">61</a>
<a href="#n62" name="n62">62</a>
<a href="#n63" name="n63">63</a>
<a href="#n64" name="n64">64</a>
<a href="#n65" name="n65">65</a>
<a href="#n66" name="n66">66</a>
<a href="#n67" name="n67">67</a>
<a href="#n68" name="n68">68</a>
<a href="#n69" name="n69">69</a>
<strong><a href="#n70" name="n70">70</a></strong>
<a href="#n71" name="n71">71</a>
<a href="#n72" name="n72">72</a>
<a href="#n73" name="n73">73</a>
<a href="#n74" name="n74">74</a>
<a href="#n75" name="n75">75</a>
<a href="#n76" name="n76">76</a>
<a href="#n77" name="n77">77</a>
<a href="#n78" name="n78">78</a>
<a href="#n79" name="n79">79</a>
<strong><a href="#n80" name="n80">80</a></strong>
<a href="#n81" name="n81">81</a>
<a href="#n82" name="n82">82</a>
<a href="#n83" name="n83">83</a>
<a href="#n84" name="n84">84</a>
<a href="#n85" name="n85">85</a>
<a href="#n86" name="n86">86</a>
<a href="#n87" name="n87">87</a>
<a href="#n88" name="n88">88</a>
<a href="#n89" name="n89">89</a>
<strong><a href="#n90" name="n90">90</a></strong>
<a href="#n91" name="n91">91</a>
<a href="#n92" name="n92">92</a>
<a href="#n93" name="n93">93</a>
<a href="#n94" name="n94">94</a>
<a href="#n95" name="n95">95</a>
<a href="#n96" name="n96">96</a>
<a href="#n97" name="n97">97</a>
<a href="#n98" name="n98">98</a>
<a href="#n99" name="n99">99</a>
<strong><a href="#n100" name="n100">100</a></strong>
<a href="#n101" name="n101">101</a>
<a href="#n102" name="n102">102</a>
<a href="#n103" name="n103">103</a>
<a href="#n104" name="n104">104</a>
<a href="#n105" name="n105">105</a>
<a href="#n106" name="n106">106</a>
<a href="#n107" name="n107">107</a>
<a href="#n108" name="n108">108</a>
<a href="#n109" name="n109">109</a>
<strong><a href="#n110" name="n110">110</a></strong>
<a href="#n111" name="n111">111</a>
<a href="#n112" name="n112">112</a>
<a href="#n113" name="n113">113</a>
<a href="#n114" name="n114">114</a>
<a href="#n115" name="n115">115</a>
<a href="#n116" name="n116">116</a>
<a href="#n117" name="n117">117</a>
<a href="#n118" name="n118">118</a>
<a href="#n119" name="n119">119</a>
<strong><a href="#n120" name="n120">120</a></strong>
<a href="#n121" name="n121">121</a>
<a href="#n122" name="n122">122</a>
<a href="#n123" name="n123">123</a>
<a href="#n124" name="n124">124</a>
<a href="#n125" name="n125">125</a>
<a href="#n126" name="n126">126</a>
<a href="#n127" name="n127">127</a>
<a href="#n128" name="n128">128</a>
<a href="#n129" name="n129">129</a>
<strong><a href="#n130" name="n130">130</a></strong>
<a href="#n131" name="n131">131</a>
<a href="#n132" name="n132">132</a>
<a href="#n133" name="n133">133</a>
<a href="#n134" name="n134">134</a>
<a href="#n135" name="n135">135</a>
<a href="#n136" name="n136">136</a>
<a href="#n137" name="n137">137</a>
<a href="#n138" name="n138">138</a>
<a href="#n139" name="n139">139</a>
<strong><a href="#n140" name="n140">140</a></strong>
<a href="#n141" name="n141">141</a>
<a href="#n142" name="n142">142</a>
<a href="#n143" name="n143">143</a>
<a href="#n144" name="n144">144</a>
<a href="#n145" name="n145">145</a>
<a href="#n146" name="n146">146</a>
<a href="#n147" name="n147">147</a>
<a href="#n148" name="n148">148</a>
<a href="#n149" name="n149">149</a>
<strong><a href="#n150" name="n150">150</a></strong>
<a href="#n151" name="n151">151</a>
<a href="#n152" name="n152">152</a>
<a href="#n153" name="n153">153</a>
<a href="#n154" name="n154">154</a>
<a href="#n155" name="n155">155</a>
<a href="#n156" name="n156">156</a>
<a href="#n157" name="n157">157</a>
<a href="#n158" name="n158">158</a>
<a href="#n159" name="n159">159</a>
<strong><a href="#n160" name="n160">160</a></strong>
<a href="#n161" name="n161">161</a>
<a href="#n162" name="n162">162</a>
<a href="#n163" name="n163">163</a>
<a href="#n164" name="n164">164</a>
<a href="#n165" name="n165">165</a>
<a href="#n166" name="n166">166</a>
<a href="#n167" name="n167">167</a>
<a href="#n168" name="n168">168</a>
<a href="#n169" name="n169">169</a>
<strong><a href="#n170" name="n170">170</a></strong>
<a href="#n171" name="n171">171</a>
<a href="#n172" name="n172">172</a>
<a href="#n173" name="n173">173</a>
<a href="#n174" name="n174">174</a>
<a href="#n175" name="n175">175</a>
<a href="#n176" name="n176">176</a>
<a href="#n177" name="n177">177</a>
<a href="#n178" name="n178">178</a>
<a href="#n179" name="n179">179</a>
<strong><a href="#n180" name="n180">180</a></strong>
<a href="#n181" name="n181">181</a>
<a href="#n182" name="n182">182</a>
<a href="#n183" name="n183">183</a>
<a href="#n184" name="n184">184</a>
<a href="#n185" name="n185">185</a>
<a href="#n186" name="n186">186</a>
<a href="#n187" name="n187">187</a>
<a href="#n188" name="n188">188</a>
<a href="#n189" name="n189">189</a>
<strong><a href="#n190" name="n190">190</a></strong>
<a href="#n191" name="n191">191</a>
<a href="#n192" name="n192">192</a>
<a href="#n193" name="n193">193</a>
<a href="#n194" name="n194">194</a>
<a href="#n195" name="n195">195</a>
<a href="#n196" name="n196">196</a>
<a href="#n197" name="n197">197</a>
<a href="#n198" name="n198">198</a>
<a href="#n199" name="n199">199</a>
<strong><a href="#n200" name="n200">200</a></strong>
<a href="#n201" name="n201">201</a>
<a href="#n202" name="n202">202</a>
<a href="#n203" name="n203">203</a>
<a href="#n204" name="n204">204</a>
<a href="#n205" name="n205">205</a>
<a href="#n206" name="n206">206</a>
<a href="#n207" name="n207">207</a>
<a href="#n208" name="n208">208</a>
<a href="#n209" name="n209">209</a>
<strong><a href="#n210" name="n210">210</a></strong>
<a href="#n211" name="n211">211</a>
<a href="#n212" name="n212">212</a>
<a href="#n213" name="n213">213</a>
<a href="#n214" name="n214">214</a>
<a href="#n215" name="n215">215</a>
<a href="#n216" name="n216">216</a>
<a href="#n217" name="n217">217</a>
<a href="#n218" name="n218">218</a>
<a href="#n219" name="n219">219</a>
<strong><a href="#n220" name="n220">220</a></strong>
<a href="#n221" name="n221">221</a>
<a href="#n222" name="n222">222</a>
<a href="#n223" name="n223">223</a>
<a href="#n224" name="n224">224</a>
<a href="#n225" name="n225">225</a>
<a href="#n226" name="n226">226</a>
<a href="#n227" name="n227">227</a>
<a href="#n228" name="n228">228</a>
<a href="#n229" name="n229">229</a>
<strong><a href="#n230" name="n230">230</a></strong>
<a href="#n231" name="n231">231</a>
<a href="#n232" name="n232">232</a>
<a href="#n233" name="n233">233</a>
<a href="#n234" name="n234">234</a>
<a href="#n235" name="n235">235</a>
<a href="#n236" name="n236">236</a>
<a href="#n237" name="n237">237</a>
<a href="#n238" name="n238">238</a>
<a href="#n239" name="n239">239</a>
<strong><a href="#n240" name="n240">240</a></strong>
<a href="#n241" name="n241">241</a>
<a href="#n242" name="n242">242</a>
<a href="#n243" name="n243">243</a>
<a href="#n244" name="n244">244</a>
<a href="#n245" name="n245">245</a>
<a href="#n246" name="n246">246</a>
<a href="#n247" name="n247">247</a>
<a href="#n248" name="n248">248</a>
<a href="#n249" name="n249">249</a>
<strong><a href="#n250" name="n250">250</a></strong>
<a href="#n251" name="n251">251</a>
<a href="#n252" name="n252">252</a>
<a href="#n253" name="n253">253</a>
<a href="#n254" name="n254">254</a>
<a href="#n255" name="n255">255</a>
<a href="#n256" name="n256">256</a>
<a href="#n257" name="n257">257</a>
<a href="#n258" name="n258">258</a>
<a href="#n259" name="n259">259</a>
<strong><a href="#n260" name="n260">260</a></strong>
<a href="#n261" name="n261">261</a>
<a href="#n262" name="n262">262</a>
<a href="#n263" name="n263">263</a>
<a href="#n264" name="n264">264</a>
<a href="#n265" name="n265">265</a>
<a href="#n266" name="n266">266</a>
<a href="#n267" name="n267">267</a>
<a href="#n268" name="n268">268</a>
<a href="#n269" name="n269">269</a>
<strong><a href="#n270" name="n270">270</a></strong>
<a href="#n271" name="n271">271</a>
<a href="#n272" name="n272">272</a>
<a href="#n273" name="n273">273</a>
<a href="#n274" name="n274">274</a>
<a href="#n275" name="n275">275</a>
<a href="#n276" name="n276">276</a>
<a href="#n277" name="n277">277</a>
<a href="#n278" name="n278">278</a>
<a href="#n279" name="n279">279</a>
<strong><a href="#n280" name="n280">280</a></strong>
<a href="#n281" name="n281">281</a>
<a href="#n282" name="n282">282</a>
<a href="#n283" name="n283">283</a>
<a href="#n284" name="n284">284</a>
<a href="#n285" name="n285">285</a>
<a href="#n286" name="n286">286</a>
<a href="#n287" name="n287">287</a>
<a href="#n288" name="n288">288</a>
<a href="#n289" name="n289">289</a>
<strong><a href="#n290" name="n290">290</a></strong>
<a href="#n291" name="n291">291</a>
<a href="#n292" name="n292">292</a>
<a href="#n293" name="n293">293</a>
<a href="#n294" name="n294">294</a>
<a href="#n295" name="n295">295</a>
<a href="#n296" name="n296">296</a>
<a href="#n297" name="n297">297</a>
<a href="#n298" name="n298">298</a>
<a href="#n299" name="n299">299</a>
<strong><a href="#n300" name="n300">300</a></strong>
<a href="#n301" name="n301">301</a>
<a href="#n302" name="n302">302</a>
<a href="#n303" name="n303">303</a>
<a href="#n304" name="n304">304</a>
<a href="#n305" name="n305">305</a>
<a href="#n306" name="n306">306</a>
<a href="#n307" name="n307">307</a>
<a href="#n308" name="n308">308</a>
<a href="#n309" name="n309">309</a>
<strong><a href="#n310" name="n310">310</a></strong>
<a href="#n311" name="n311">311</a>
<a href="#n312" name="n312">312</a>
<a href="#n313" name="n313">313</a>
<a href="#n314" name="n314">314</a>
<a href="#n315" name="n315">315</a>
<a href="#n316" name="n316">316</a>
<a href="#n317" name="n317">317</a>
<a href="#n318" name="n318">318</a>
<a href="#n319" name="n319">319</a>
<strong><a href="#n320" name="n320">320</a></strong>
<a href="#n321" name="n321">321</a>
<a href="#n322" name="n322">322</a>
<a href="#n323" name="n323">323</a>
<a href="#n324" name="n324">324</a>
<a href="#n325" name="n325">325</a>
<a href="#n326" name="n326">326</a>
<a href="#n327" name="n327">327</a>
<a href="#n328" name="n328">328</a>
<a href="#n329" name="n329">329</a>
<strong><a href="#n330" name="n330">330</a></strong>
<a href="#n331" name="n331">331</a>
<a href="#n332" name="n332">332</a>
<a href="#n333" name="n333">333</a>
<a href="#n334" name="n334">334</a>
<a href="#n335" name="n335">335</a>
<a href="#n336" name="n336">336</a>
<a href="#n337" name="n337">337</a>
<a href="#n338" name="n338">338</a>
<a href="#n339" name="n339">339</a>
<strong><a href="#n340" name="n340">340</a></strong>
<a href="#n341" name="n341">341</a>
<a href="#n342" name="n342">342</a>
<a href="#n343" name="n343">343</a>
<a href="#n344" name="n344">344</a>
<a href="#n345" name="n345">345</a>
<a href="#n346" name="n346">346</a>
<a href="#n347" name="n347">347</a>
<a href="#n348" name="n348">348</a>
<a href="#n349" name="n349">349</a>
<strong><a href="#n350" name="n350">350</a></strong>
<a href="#n351" name="n351">351</a>
<a href="#n352" name="n352">352</a>
<a href="#n353" name="n353">353</a>
<a href="#n354" name="n354">354</a>
<a href="#n355" name="n355">355</a>
<a href="#n356" name="n356">356</a>
<a href="#n357" name="n357">357</a>
<a href="#n358" name="n358">358</a>
<a href="#n359" name="n359">359</a>
<strong><a href="#n360" name="n360">360</a></strong>
<a href="#n361" name="n361">361</a>
<a href="#n362" name="n362">362</a>
<a href="#n363" name="n363">363</a>
<a href="#n364" name="n364">364</a>
<a href="#n365" name="n365">365</a>
<a href="#n366" name="n366">366</a>
<a href="#n367" name="n367">367</a>
<a href="#n368" name="n368">368</a>
<a href="#n369" name="n369">369</a>
<strong><a href="#n370" name="n370">370</a></strong>
<a href="#n371" name="n371">371</a>
<a href="#n372" name="n372">372</a>
<a href="#n373" name="n373">373</a>
<a href="#n374" name="n374">374</a>
<a href="#n375" name="n375">375</a>
<a href="#n376" name="n376">376</a>
<a href="#n377" name="n377">377</a>
<a href="#n378" name="n378">378</a>
<a href="#n379" name="n379">379</a>
<strong><a href="#n380" name="n380">380</a></strong>
<a href="#n381" name="n381">381</a>
<a href="#n382" name="n382">382</a>
<a href="#n383" name="n383">383</a>
<a href="#n384" name="n384">384</a>
<a href="#n385" name="n385">385</a>
<a href="#n386" name="n386">386</a>
<a href="#n387" name="n387">387</a>
<a href="#n388" name="n388">388</a>
<a href="#n389" name="n389">389</a>
<strong><a href="#n390" name="n390">390</a></strong>
<a href="#n391" name="n391">391</a>
<a href="#n392" name="n392">392</a>
<a href="#n393" name="n393">393</a>
<a href="#n394" name="n394">394</a>
<a href="#n395" name="n395">395</a>
<a href="#n396" name="n396">396</a>
<a href="#n397" name="n397">397</a>
<a href="#n398" name="n398">398</a>
<a href="#n399" name="n399">399</a>
<strong><a href="#n400" name="n400">400</a></strong>
<a href="#n401" name="n401">401</a>
<a href="#n402" name="n402">402</a>
<a href="#n403" name="n403">403</a>
<a href="#n404" name="n404">404</a>
<a href="#n405" name="n405">405</a>
<a href="#n406" name="n406">406</a>
<a href="#n407" name="n407">407</a>
<a href="#n408" name="n408">408</a>
<a href="#n409" name="n409">409</a>
<strong><a href="#n410" name="n410">410</a></strong>
<a href="#n411" name="n411">411</a>
<a href="#n412" name="n412">412</a>
<a href="#n413" name="n413">413</a>
<a href="#n414" name="n414">414</a>
<a href="#n415" name="n415">415</a>
<a href="#n416" name="n416">416</a>
<a href="#n417" name="n417">417</a>
<a href="#n418" name="n418">418</a>
<a href="#n419" name="n419">419</a>
<strong><a href="#n420" name="n420">420</a></strong>
<a href="#n421" name="n421">421</a>
<a href="#n422" name="n422">422</a>
<a href="#n423" name="n423">423</a>
<a href="#n424" name="n424">424</a>
<a href="#n425" name="n425">425</a>
<a href="#n426" name="n426">426</a>
<a href="#n427" name="n427">427</a>
<a href="#n428" name="n428">428</a>
<a href="#n429" name="n429">429</a>
<strong><a href="#n430" name="n430">430</a></strong>
<a href="#n431" name="n431">431</a>
<a href="#n432" name="n432">432</a>
<a href="#n433" name="n433">433</a>
<a href="#n434" name="n434">434</a>
<a href="#n435" name="n435">435</a>
<a href="#n436" name="n436">436</a>
<a href="#n437" name="n437">437</a>
<a href="#n438" name="n438">438</a>
<a href="#n439" name="n439">439</a>
<strong><a href="#n440" name="n440">440</a></strong>
<a href="#n441" name="n441">441</a>
<a href="#n442" name="n442">442</a>
<a href="#n443" name="n443">443</a>
<a href="#n444" name="n444">444</a>
<a href="#n445" name="n445">445</a>
<a href="#n446" name="n446">446</a>
<a href="#n447" name="n447">447</a>
<a href="#n448" name="n448">448</a>
<a href="#n449" name="n449">449</a>
<strong><a href="#n450" name="n450">450</a></strong>
<a href="#n451" name="n451">451</a>
<a href="#n452" name="n452">452</a>
<a href="#n453" name="n453">453</a>
<a href="#n454" name="n454">454</a>
<a href="#n455" name="n455">455</a>
<a href="#n456" name="n456">456</a>
<a href="#n457" name="n457">457</a>
<a href="#n458" name="n458">458</a>
<a href="#n459" name="n459">459</a>
<strong><a href="#n460" name="n460">460</a></strong>
<a href="#n461" name="n461">461</a>
<a href="#n462" name="n462">462</a>
<a href="#n463" name="n463">463</a>
<a href="#n464" name="n464">464</a>
<a href="#n465" name="n465">465</a>
<a href="#n466" name="n466">466</a>
<a href="#n467" name="n467">467</a>
<a href="#n468" name="n468">468</a>
<a href="#n469" name="n469">469</a>
<strong><a href="#n470" name="n470">470</a></strong>
<a href="#n471" name="n471">471</a>
<a href="#n472" name="n472">472</a>
<a href="#n473" name="n473">473</a>
<a href="#n474" name="n474">474</a>
<a href="#n475" name="n475">475</a>
<a href="#n476" name="n476">476</a>
<a href="#n477" name="n477">477</a>
<a href="#n478" name="n478">478</a>
<a href="#n479" name="n479">479</a>
<strong><a href="#n480" name="n480">480</a></strong>
<a href="#n481" name="n481">481</a>
<a href="#n482" name="n482">482</a>
<a href="#n483" name="n483">483</a>
<a href="#n484" name="n484">484</a>
<a href="#n485" name="n485">485</a>
<a href="#n486" name="n486">486</a>
<a href="#n487" name="n487">487</a>
<a href="#n488" name="n488">488</a>
<a href="#n489" name="n489">489</a>
<strong><a href="#n490" name="n490">490</a></strong>
<a href="#n491" name="n491">491</a>
<a href="#n492" name="n492">492</a>
<a href="#n493" name="n493">493</a>
<a href="#n494" name="n494">494</a>
<a href="#n495" name="n495">495</a>
<a href="#n496" name="n496">496</a>
<a href="#n497" name="n497">497</a>
<a href="#n498" name="n498">498</a>
<a href="#n499" name="n499">499</a>
<strong><a href="#n500" name="n500">500</a></strong>
<a href="#n501" name="n501">501</a>
<a href="#n502" name="n502">502</a>
<a href="#n503" name="n503">503</a>
<a href="#n504" name="n504">504</a>
<a href="#n505" name="n505">505</a>
<a href="#n506" name="n506">506</a>
<a href="#n507" name="n507">507</a>
<a href="#n508" name="n508">508</a>
<a href="#n509" name="n509">509</a>
<strong><a href="#n510" name="n510">510</a></strong>
<a href="#n511" name="n511">511</a>
<a href="#n512" name="n512">512</a>
<a href="#n513" name="n513">513</a>
<a href="#n514" name="n514">514</a>
<a href="#n515" name="n515">515</a>
<a href="#n516" name="n516">516</a>
<a href="#n517" name="n517">517</a>
<a href="#n518" name="n518">518</a>
<a href="#n519" name="n519">519</a>
<strong><a href="#n520" name="n520">520</a></strong>
<a href="#n521" name="n521">521</a>
<a href="#n522" name="n522">522</a>
<a href="#n523" name="n523">523</a>
<a href="#n524" name="n524">524</a>
<a href="#n525" name="n525">525</a>
<a href="#n526" name="n526">526</a>
<a href="#n527" name="n527">527</a>
<a href="#n528" name="n528">528</a>
<a href="#n529" name="n529">529</a>
<strong><a href="#n530" name="n530">530</a></strong>
<a href="#n531" name="n531">531</a>
<a href="#n532" name="n532">532</a>
<a href="#n533" name="n533">533</a>
<a href="#n534" name="n534">534</a>
<a href="#n535" name="n535">535</a>
<a href="#n536" name="n536">536</a>
<a href="#n537" name="n537">537</a>
<a href="#n538" name="n538">538</a>
<a href="#n539" name="n539">539</a>
<strong><a href="#n540" name="n540">540</a></strong>
<a href="#n541" name="n541">541</a>
<a href="#n542" name="n542">542</a>
<a href="#n543" name="n543">543</a>
<a href="#n544" name="n544">544</a>
<a href="#n545" name="n545">545</a>
<a href="#n546" name="n546">546</a>
<a href="#n547" name="n547">547</a>
<a href="#n548" name="n548">548</a>
<a href="#n549" name="n549">549</a>
<strong><a href="#n550" name="n550">550</a></strong>
<a href="#n551" name="n551">551</a>
<a href="#n552" name="n552">552</a>
<a href="#n553" name="n553">553</a>
<a href="#n554" name="n554">554</a>
<a href="#n555" name="n555">555</a>
<a href="#n556" name="n556">556</a>
<a href="#n557" name="n557">557</a>
<a href="#n558" name="n558">558</a>
<a href="#n559" name="n559">559</a>
<strong><a href="#n560" name="n560">560</a></strong>
<a href="#n561" name="n561">561</a>
<a href="#n562" name="n562">562</a>
<a href="#n563" name="n563">563</a>
<a href="#n564" name="n564">564</a>
<a href="#n565" name="n565">565</a>
<a href="#n566" name="n566">566</a>
<a href="#n567" name="n567">567</a>
<a href="#n568" name="n568">568</a>
<a href="#n569" name="n569">569</a>
<strong><a href="#n570" name="n570">570</a></strong>
<a href="#n571" name="n571">571</a>
<a href="#n572" name="n572">572</a>
<a href="#n573" name="n573">573</a>
<a href="#n574" name="n574">574</a>
<a href="#n575" name="n575">575</a>
<a href="#n576" name="n576">576</a>
<a href="#n577" name="n577">577</a>
<a href="#n578" name="n578">578</a>
<a href="#n579" name="n579">579</a>
<strong><a href="#n580" name="n580">580</a></strong>
<a href="#n581" name="n581">581</a>
<a href="#n582" name="n582">582</a>
<a href="#n583" name="n583">583</a>
<a href="#n584" name="n584">584</a>
<a href="#n585" name="n585">585</a>
<a href="#n586" name="n586">586</a>
<a href="#n587" name="n587">587</a>
<a href="#n588" name="n588">588</a>
<a href="#n589" name="n589">589</a>
<strong><a href="#n590" name="n590">590</a></strong>
<a href="#n591" name="n591">591</a>
<a href="#n592" name="n592">592</a>
<a href="#n593" name="n593">593</a>
<a href="#n594" name="n594">594</a>
<a href="#n595" name="n595">595</a>
<a href="#n596" name="n596">596</a>
<a href="#n597" name="n597">597</a>
<a href="#n598" name="n598">598</a>
<a href="#n599" name="n599">599</a>
<strong><a href="#n600" name="n600">600</a></strong>
<a href="#n601" name="n601">601</a>
<a href="#n602" name="n602">602</a>
<a href="#n603" name="n603">603</a>
<a href="#n604" name="n604">604</a>
<a href="#n605" name="n605">605</a>
<a href="#n606" name="n606">606</a>
<a href="#n607" name="n607">607</a>
<a href="#n608" name="n608">608</a>
<a href="#n609" name="n609">609</a>
<strong><a href="#n610" name="n610">610</a></strong>
<a href="#n611" name="n611">611</a>
<a href="#n612" name="n612">612</a>
<a href="#n613" name="n613">613</a>
<a href="#n614" name="n614">614</a>
<a href="#n615" name="n615">615</a>
<a href="#n616" name="n616">616</a>
<a href="#n617" name="n617">617</a>
<a href="#n618" name="n618">618</a>
<a href="#n619" name="n619">619</a>
<strong><a href="#n620" name="n620">620</a></strong>
<a href="#n621" name="n621">621</a>
<a href="#n622" name="n622">622</a>
<a href="#n623" name="n623">623</a>
<a href="#n624" name="n624">624</a>
<a href="#n625" name="n625">625</a>
<a href="#n626" name="n626">626</a>
<a href="#n627" name="n627">627</a>
<a href="#n628" name="n628">628</a>
<a href="#n629" name="n629">629</a>
<strong><a href="#n630" name="n630">630</a></strong>
<a href="#n631" name="n631">631</a>
<a href="#n632" name="n632">632</a>
<a href="#n633" name="n633">633</a>
<a href="#n634" name="n634">634</a>
<a href="#n635" name="n635">635</a>
<a href="#n636" name="n636">636</a>
<a href="#n637" name="n637">637</a>
<a href="#n638" name="n638">638</a>
<a href="#n639" name="n639">639</a>
<strong><a href="#n640" name="n640">640</a></strong>
<a href="#n641" name="n641">641</a>
<a href="#n642" name="n642">642</a>
<a href="#n643" name="n643">643</a>
<a href="#n644" name="n644">644</a>
<a href="#n645" name="n645">645</a>
<a href="#n646" name="n646">646</a>
<a href="#n647" name="n647">647</a>
<a href="#n648" name="n648">648</a>
<a href="#n649" name="n649">649</a>
<strong><a href="#n650" name="n650">650</a></strong>
<a href="#n651" name="n651">651</a>
<a href="#n652" name="n652">652</a>
<a href="#n653" name="n653">653</a>
<a href="#n654" name="n654">654</a>
<a href="#n655" name="n655">655</a>
<a href="#n656" name="n656">656</a>
<a href="#n657" name="n657">657</a>
<a href="#n658" name="n658">658</a>
<a href="#n659" name="n659">659</a>
<strong><a href="#n660" name="n660">660</a></strong>
<a href="#n661" name="n661">661</a>
<a href="#n662" name="n662">662</a>
<a href="#n663" name="n663">663</a>
<a href="#n664" name="n664">664</a>
<a href="#n665" name="n665">665</a>
<a href="#n666" name="n666">666</a>
<a href="#n667" name="n667">667</a>
<a href="#n668" name="n668">668</a>
<a href="#n669" name="n669">669</a>
<strong><a href="#n670" name="n670">670</a></strong>
<a href="#n671" name="n671">671</a>
<a href="#n672" name="n672">672</a>
<a href="#n673" name="n673">673</a>
<a href="#n674" name="n674">674</a>
<a href="#n675" name="n675">675</a>
<a href="#n676" name="n676">676</a>
<a href="#n677" name="n677">677</a>
<a href="#n678" name="n678">678</a>
<a href="#n679" name="n679">679</a>
<strong><a href="#n680" name="n680">680</a></strong>
<a href="#n681" name="n681">681</a>
<a href="#n682" name="n682">682</a>
<a href="#n683" name="n683">683</a>
<a href="#n684" name="n684">684</a>
<a href="#n685" name="n685">685</a>
<a href="#n686" name="n686">686</a>
<a href="#n687" name="n687">687</a>
<a href="#n688" name="n688">688</a>
<a href="#n689" name="n689">689</a>
<strong><a href="#n690" name="n690">690</a></strong>
<a href="#n691" name="n691">691</a>
<a href="#n692" name="n692">692</a>
<a href="#n693" name="n693">693</a>
<a href="#n694" name="n694">694</a>
<a href="#n695" name="n695">695</a>
<a href="#n696" name="n696">696</a>
<a href="#n697" name="n697">697</a>
<a href="#n698" name="n698">698</a>
<a href="#n699" name="n699">699</a>
<strong><a href="#n700" name="n700">700</a></strong>
<a href="#n701" name="n701">701</a>
<a href="#n702" name="n702">702</a>
<a href="#n703" name="n703">703</a>
<a href="#n704" name="n704">704</a>
<a href="#n705" name="n705">705</a>
<a href="#n706" name="n706">706</a>
<a href="#n707" name="n707">707</a>
<a href="#n708" name="n708">708</a>
<a href="#n709" name="n709">709</a>
<strong><a href="#n710" name="n710">710</a></strong>
<a href="#n711" name="n711">711</a>
<a href="#n712" name="n712">712</a>
<a href="#n713" name="n713">713</a>
<a href="#n714" name="n714">714</a>
<a href="#n715" name="n715">715</a>
<a href="#n716" name="n716">716</a>
<a href="#n717" name="n717">717</a>
<a href="#n718" name="n718">718</a>
<a href="#n719" name="n719">719</a>
<strong><a href="#n720" name="n720">720</a></strong>
<a href="#n721" name="n721">721</a>
<a href="#n722" name="n722">722</a>
<a href="#n723" name="n723">723</a>
<a href="#n724" name="n724">724</a>
<a href="#n725" name="n725">725</a>
<a href="#n726" name="n726">726</a>
<a href="#n727" name="n727">727</a>
<a href="#n728" name="n728">728</a>
<a href="#n729" name="n729">729</a>
<strong><a href="#n730" name="n730">730</a></strong>
<a href="#n731" name="n731">731</a>
<a href="#n732" name="n732">732</a>
<a href="#n733" name="n733">733</a>
<a href="#n734" name="n734">734</a>
<a href="#n735" name="n735">735</a>
<a href="#n736" name="n736">736</a>
<a href="#n737" name="n737">737</a>
<a href="#n738" name="n738">738</a>
<a href="#n739" name="n739">739</a>
<strong><a href="#n740" name="n740">740</a></strong>
<a href="#n741" name="n741">741</a>
<a href="#n742" name="n742">742</a>
<a href="#n743" name="n743">743</a>
<a href="#n744" name="n744">744</a>
<a href="#n745" name="n745">745</a>
<a href="#n746" name="n746">746</a>
<a href="#n747" name="n747">747</a>
<a href="#n748" name="n748">748</a>
<a href="#n749" name="n749">749</a>
<strong><a href="#n750" name="n750">750</a></strong>
<a href="#n751" name="n751">751</a>
<a href="#n752" name="n752">752</a>
<a href="#n753" name="n753">753</a>
<a href="#n754" name="n754">754</a>
<a href="#n755" name="n755">755</a>
<a href="#n756" name="n756">756</a>
<a href="#n757" name="n757">757</a>
<a href="#n758" name="n758">758</a>
<a href="#n759" name="n759">759</a>
<strong><a href="#n760" name="n760">760</a></strong>
<a href="#n761" name="n761">761</a>
<a href="#n762" name="n762">762</a>
<a href="#n763" name="n763">763</a>
<a href="#n764" name="n764">764</a>
<a href="#n765" name="n765">765</a>
<a href="#n766" name="n766">766</a>
<a href="#n767" name="n767">767</a>
<a href="#n768" name="n768">768</a>
<a href="#n769" name="n769">769</a>
<strong><a href="#n770" name="n770">770</a></strong>
<a href="#n771" name="n771">771</a>
<a href="#n772" name="n772">772</a>
<a href="#n773" name="n773">773</a>
<a href="#n774" name="n774">774</a>
<a href="#n775" name="n775">775</a>
<a href="#n776" name="n776">776</a>
<a href="#n777" name="n777">777</a>
<a href="#n778" name="n778">778</a>
<a href="#n779" name="n779">779</a>
<strong><a href="#n780" name="n780">780</a></strong>
<a href="#n781" name="n781">781</a>
<a href="#n782" name="n782">782</a>
<a href="#n783" name="n783">783</a>
<a href="#n784" name="n784">784</a>
<a href="#n785" name="n785">785</a>
<a href="#n786" name="n786">786</a>
<a href="#n787" name="n787">787</a>
<a href="#n788" name="n788">788</a>
<a href="#n789" name="n789">789</a>
<strong><a href="#n790" name="n790">790</a></strong>
<a href="#n791" name="n791">791</a>
<a href="#n792" name="n792">792</a>
<a href="#n793" name="n793">793</a>
<a href="#n794" name="n794">794</a>
<a href="#n795" name="n795">795</a>
<a href="#n796" name="n796">796</a>
<a href="#n797" name="n797">797</a>
<a href="#n798" name="n798">798</a>
<a href="#n799" name="n799">799</a>
<strong><a href="#n800" name="n800">800</a></strong>
<a href="#n801" name="n801">801</a>
<a href="#n802" name="n802">802</a>
<a href="#n803" name="n803">803</a>
<a href="#n804" name="n804">804</a>
<a href="#n805" name="n805">805</a>
<a href="#n806" name="n806">806</a>
<a href="#n807" name="n807">807</a>
<a href="#n808" name="n808">808</a>
<a href="#n809" name="n809">809</a>
<strong><a href="#n810" name="n810">810</a></strong>
<a href="#n811" name="n811">811</a>
<a href="#n812" name="n812">812</a>
<a href="#n813" name="n813">813</a>
<a href="#n814" name="n814">814</a>
<a href="#n815" name="n815">815</a>
<a href="#n816" name="n816">816</a>
<a href="#n817" name="n817">817</a>
<a href="#n818" name="n818">818</a>
<a href="#n819" name="n819">819</a>
<strong><a href="#n820" name="n820">820</a></strong>
<a href="#n821" name="n821">821</a>
<a href="#n822" name="n822">822</a>
<a href="#n823" name="n823">823</a>
<a href="#n824" name="n824">824</a>
<a href="#n825" name="n825">825</a>
<a href="#n826" name="n826">826</a>
<a href="#n827" name="n827">827</a>
<a href="#n828" name="n828">828</a>
<a href="#n829" name="n829">829</a>
<strong><a href="#n830" name="n830">830</a></strong>
<a href="#n831" name="n831">831</a>
<a href="#n832" name="n832">832</a>
<a href="#n833" name="n833">833</a>
<a href="#n834" name="n834">834</a>
<a href="#n835" name="n835">835</a>
<a href="#n836" name="n836">836</a>
<a href="#n837" name="n837">837</a>
<a href="#n838" name="n838">838</a>
<a href="#n839" name="n839">839</a>
<strong><a href="#n840" name="n840">840</a></strong>
<a href="#n841" name="n841">841</a>
<a href="#n842" name="n842">842</a>
<a href="#n843" name="n843">843</a>
<a href="#n844" name="n844">844</a>
<a href="#n845" name="n845">845</a>
<a href="#n846" name="n846">846</a>
<a href="#n847" name="n847">847</a>
<a href="#n848" name="n848">848</a>
<a href="#n849" name="n849">849</a>
<strong><a href="#n850" name="n850">850</a></strong>
<a href="#n851" name="n851">851</a>
<a href="#n852" name="n852">852</a>
<a href="#n853" name="n853">853</a>
<a href="#n854" name="n854">854</a>
<a href="#n855" name="n855">855</a>
<a href="#n856" name="n856">856</a>
<a href="#n857" name="n857">857</a>
<a href="#n858" name="n858">858</a>
<a href="#n859" name="n859">859</a>
<strong><a href="#n860" name="n860">860</a></strong>
<a href="#n861" name="n861">861</a>
<a href="#n862" name="n862">862</a>
<a href="#n863" name="n863">863</a>
<a href="#n864" name="n864">864</a>
<a href="#n865" name="n865">865</a>
<a href="#n866" name="n866">866</a>
<a href="#n867" name="n867">867</a>
<a href="#n868" name="n868">868</a>
<a href="#n869" name="n869">869</a>
<strong><a href="#n870" name="n870">870</a></strong>
<a href="#n871" name="n871">871</a>
<a href="#n872" name="n872">872</a>
<a href="#n873" name="n873">873</a>
<a href="#n874" name="n874">874</a>
<a href="#n875" name="n875">875</a>
<a href="#n876" name="n876">876</a>
<a href="#n877" name="n877">877</a>
<a href="#n878" name="n878">878</a>
<a href="#n879" name="n879">879</a>
<strong><a href="#n880" name="n880">880</a></strong>
<a href="#n881" name="n881">881</a>
<a href="#n882" name="n882">882</a>
<a href="#n883" name="n883">883</a>
<a href="#n884" name="n884">884</a>
<a href="#n885" name="n885">885</a>
<a href="#n886" name="n886">886</a>
<a href="#n887" name="n887">887</a>
<a href="#n888" name="n888">888</a>
<a href="#n889" name="n889">889</a>
<strong><a href="#n890" name="n890">890</a></strong>
<a href="#n891" name="n891">891</a>
<a href="#n892" name="n892">892</a>
<a href="#n893" name="n893">893</a>
<a href="#n894" name="n894">894</a>
<a href="#n895" name="n895">895</a>
<a href="#n896" name="n896">896</a>
<a href="#n897" name="n897">897</a>
<a href="#n898" name="n898">898</a>
<a href="#n899" name="n899">899</a>
<strong><a href="#n900" name="n900">900</a></strong>
<a href="#n901" name="n901">901</a>
<a href="#n902" name="n902">902</a>
<a href="#n903" name="n903">903</a>
<a href="#n904" name="n904">904</a>
<a href="#n905" name="n905">905</a>
<a href="#n906" name="n906">906</a>
<a href="#n907" name="n907">907</a>
<a href="#n908" name="n908">908</a>
<a href="#n909" name="n909">909</a>
<strong><a href="#n910" name="n910">910</a></strong>
<a href="#n911" name="n911">911</a>
<a href="#n912" name="n912">912</a>
<a href="#n913" name="n913">913</a>
<a href="#n914" name="n914">914</a>
<a href="#n915" name="n915">915</a>
<a href="#n916" name="n916">916</a>
<a href="#n917" name="n917">917</a>
<a href="#n918" name="n918">918</a>
<a href="#n919" name="n919">919</a>
<strong><a href="#n920" name="n920">920</a></strong>
<a href="#n921" name="n921">921</a>
<a href="#n922" name="n922">922</a>
<a href="#n923" name="n923">923</a>
<a href="#n924" name="n924">924</a>
<a href="#n925" name="n925">925</a>
<a href="#n926" name="n926">926</a>
<a href="#n927" name="n927">927</a>
<a href="#n928" name="n928">928</a>
<a href="#n929" name="n929">929</a>
<strong><a href="#n930" name="n930">930</a></strong>
<a href="#n931" name="n931">931</a>
<a href="#n932" name="n932">932</a>
<a href="#n933" name="n933">933</a>
<a href="#n934" name="n934">934</a>
<a href="#n935" name="n935">935</a>
<a href="#n936" name="n936">936</a>
<a href="#n937" name="n937">937</a>
<a href="#n938" name="n938">938</a>
<a href="#n939" name="n939">939</a>
<strong><a href="#n940" name="n940">940</a></strong>
<a href="#n941" name="n941">941</a>
<a href="#n942" name="n942">942</a>
<a href="#n943" name="n943">943</a>
<a href="#n944" name="n944">944</a>
<a href="#n945" name="n945">945</a>
<a href="#n946" name="n946">946</a>
<a href="#n947" name="n947">947</a>
<a href="#n948" name="n948">948</a>
<a href="#n949" name="n949">949</a>
<strong><a href="#n950" name="n950">950</a></strong>
<a href="#n951" name="n951">951</a>
<a href="#n952" name="n952">952</a>
<a href="#n953" name="n953">953</a>
<a href="#n954" name="n954">954</a>
<a href="#n955" name="n955">955</a>
<a href="#n956" name="n956">956</a>
<a href="#n957" name="n957">957</a>
<a href="#n958" name="n958">958</a>
<a href="#n959" name="n959">959</a>
<strong><a href="#n960" name="n960">960</a></strong>
<a href="#n961" name="n961">961</a>
<a href="#n962" name="n962">962</a>
<a href="#n963" name="n963">963</a>
<a href="#n964" name="n964">964</a>
<a href="#n965" name="n965">965</a>
<a href="#n966" name="n966">966</a>
<a href="#n967" name="n967">967</a>
<a href="#n968" name="n968">968</a>
<a href="#n969" name="n969">969</a>
<strong><a href="#n970" name="n970">970</a></strong>
<a href="#n971" name="n971">971</a>
<a href="#n972" name="n972">972</a>
<a href="#n973" name="n973">973</a>
<a href="#n974" name="n974">974</a>
<a href="#n975" name="n975">975</a>
<a href="#n976" name="n976">976</a>
<a href="#n977" name="n977">977</a>
<a href="#n978" name="n978">978</a>
<a href="#n979" name="n979">979</a>
<strong><a href="#n980" name="n980">980</a></strong>
<a href="#n981" name="n981">981</a>
<a href="#n982" name="n982">982</a>
<a href="#n983" name="n983">983</a>
<a href="#n984" name="n984">984</a>
<a href="#n985" name="n985">985</a>
<a href="#n986" name="n986">986</a>
<a href="#n987" name="n987">987</a>
<a href="#n988" name="n988">988</a>
<a href="#n989" name="n989">989</a>
<strong><a href="#n990" name="n990">990</a></strong>
<a href="#n991" name="n991">991</a>
<a href="#n992" name="n992">992</a>
<a href="#n993" name="n993">993</a>
<a href="#n994" name="n994">994</a>
<a href="#n995" name="n995">995</a>
<a href="#n996" name="n996">996</a>
<a href="#n997" name="n997">997</a>
<a href="#n998" name="n998">998</a>
<a href="#n999" name="n999">999</a>
<strong><a href="#n1000" name="n1000">1000</a></strong>
<a href="#n1001" name="n1001">1001</a>
<a href="#n1002" name="n1002">1002</a>
<a href="#n1003" name="n1003">1003</a>
<a href="#n1004" name="n1004">1004</a>
<a href="#n1005" name="n1005">1005</a>
<a href="#n1006" name="n1006">1006</a>
<a href="#n1007" name="n1007">1007</a>
<a href="#n1008" name="n1008">1008</a>
<a href="#n1009" name="n1009">1009</a>
<strong><a href="#n1010" name="n1010">1010</a></strong>
<a href="#n1011" name="n1011">1011</a>
<a href="#n1012" name="n1012">1012</a>
<a href="#n1013" name="n1013">1013</a>
<a href="#n1014" name="n1014">1014</a>
<a href="#n1015" name="n1015">1015</a>
<a href="#n1016" name="n1016">1016</a>
<a href="#n1017" name="n1017">1017</a>
<a href="#n1018" name="n1018">1018</a>
<a href="#n1019" name="n1019">1019</a>
<strong><a href="#n1020" name="n1020">1020</a></strong>
<a href="#n1021" name="n1021">1021</a>
<a href="#n1022" name="n1022">1022</a>
<a href="#n1023" name="n1023">1023</a>
<a href="#n1024" name="n1024">1024</a>
<a href="#n1025" name="n1025">1025</a>
<a href="#n1026" name="n1026">1026</a>
<a href="#n1027" name="n1027">1027</a>
<a href="#n1028" name="n1028">1028</a>
<a href="#n1029" name="n1029">1029</a>
<strong><a href="#n1030" name="n1030">1030</a></strong>
<a href="#n1031" name="n1031">1031</a>
<a href="#n1032" name="n1032">1032</a>
<a href="#n1033" name="n1033">1033</a>
<a href="#n1034" name="n1034">1034</a>
<a href="#n1035" name="n1035">1035</a>
<a href="#n1036" name="n1036">1036</a>
<a href="#n1037" name="n1037">1037</a>
<a href="#n1038" name="n1038">1038</a>
<a href="#n1039" name="n1039">1039</a>
<strong><a href="#n1040" name="n1040">1040</a></strong>
<a href="#n1041" name="n1041">1041</a>
<a href="#n1042" name="n1042">1042</a>
<a href="#n1043" name="n1043">1043</a>
<a href="#n1044" name="n1044">1044</a>
<a href="#n1045" name="n1045">1045</a>
<a href="#n1046" name="n1046">1046</a>
<a href="#n1047" name="n1047">1047</a>
<a href="#n1048" name="n1048">1048</a>
<a href="#n1049" name="n1049">1049</a>
<strong><a href="#n1050" name="n1050">1050</a></strong>
<a href="#n1051" name="n1051">1051</a>
<a href="#n1052" name="n1052">1052</a>
<a href="#n1053" name="n1053">1053</a>
<a href="#n1054" name="n1054">1054</a>
<a href="#n1055" name="n1055">1055</a>
<a href="#n1056" name="n1056">1056</a>
<a href="#n1057" name="n1057">1057</a>
<a href="#n1058" name="n1058">1058</a>
<a href="#n1059" name="n1059">1059</a>
<strong><a href="#n1060" name="n1060">1060</a></strong>
<a href="#n1061" name="n1061">1061</a>
<a href="#n1062" name="n1062">1062</a>
<a href="#n1063" name="n1063">1063</a>
<a href="#n1064" name="n1064">1064</a>
<a href="#n1065" name="n1065">1065</a>
<a href="#n1066" name="n1066">1066</a>
<a href="#n1067" name="n1067">1067</a>
<a href="#n1068" name="n1068">1068</a>
<a href="#n1069" name="n1069">1069</a>
<strong><a href="#n1070" name="n1070">1070</a></strong>
<a href="#n1071" name="n1071">1071</a>
<a href="#n1072" name="n1072">1072</a>
<a href="#n1073" name="n1073">1073</a>
<a href="#n1074" name="n1074">1074</a>
<a href="#n1075" name="n1075">1075</a>
<a href="#n1076" name="n1076">1076</a>
<a href="#n1077" name="n1077">1077</a>
<a href="#n1078" name="n1078">1078</a>
<a href="#n1079" name="n1079">1079</a>
<strong><a href="#n1080" name="n1080">1080</a></strong>
<a href="#n1081" name="n1081">1081</a>
<a href="#n1082" name="n1082">1082</a>
<a href="#n1083" name="n1083">1083</a>
<a href="#n1084" name="n1084">1084</a>
<a href="#n1085" name="n1085">1085</a>
<a href="#n1086" name="n1086">1086</a>
<a href="#n1087" name="n1087">1087</a>
<a href="#n1088" name="n1088">1088</a>
<a href="#n1089" name="n1089">1089</a>
<strong><a href="#n1090" name="n1090">1090</a></strong>
<a href="#n1091" name="n1091">1091</a>
<a href="#n1092" name="n1092">1092</a>
<a href="#n1093" name="n1093">1093</a>
<a href="#n1094" name="n1094">1094</a>
<a href="#n1095" name="n1095">1095</a>
<a href="#n1096" name="n1096">1096</a>
<a href="#n1097" name="n1097">1097</a>
<a href="#n1098" name="n1098">1098</a>
<a href="#n1099" name="n1099">1099</a>
<strong><a href="#n1100" name="n1100">1100</a></strong>
<a href="#n1101" name="n1101">1101</a>
<a href="#n1102" name="n1102">1102</a>
<a href="#n1103" name="n1103">1103</a>
<a href="#n1104" name="n1104">1104</a>
<a href="#n1105" name="n1105">1105</a>
<a href="#n1106" name="n1106">1106</a>
<a href="#n1107" name="n1107">1107</a>
<a href="#n1108" name="n1108">1108</a>
<a href="#n1109" name="n1109">1109</a>
<strong><a href="#n1110" name="n1110">1110</a></strong>
<a href="#n1111" name="n1111">1111</a>
<a href="#n1112" name="n1112">1112</a>
<a href="#n1113" name="n1113">1113</a>
<a href="#n1114" name="n1114">1114</a>
<a href="#n1115" name="n1115">1115</a>
<a href="#n1116" name="n1116">1116</a>
<a href="#n1117" name="n1117">1117</a>
<a href="#n1118" name="n1118">1118</a>
<a href="#n1119" name="n1119">1119</a>
<strong><a href="#n1120" name="n1120">1120</a></strong>
<a href="#n1121" name="n1121">1121</a>
<a href="#n1122" name="n1122">1122</a>
<a href="#n1123" name="n1123">1123</a>
<a href="#n1124" name="n1124">1124</a>
<a href="#n1125" name="n1125">1125</a>
<a href="#n1126" name="n1126">1126</a>
<a href="#n1127" name="n1127">1127</a>
<a href="#n1128" name="n1128">1128</a>
<a href="#n1129" name="n1129">1129</a>
<strong><a href="#n1130" name="n1130">1130</a></strong>
<a href="#n1131" name="n1131">1131</a>
<a href="#n1132" name="n1132">1132</a>
<a href="#n1133" name="n1133">1133</a>
<a href="#n1134" name="n1134">1134</a>
<a href="#n1135" name="n1135">1135</a>
<a href="#n1136" name="n1136">1136</a>
<a href="#n1137" name="n1137">1137</a>
<a href="#n1138" name="n1138">1138</a>
<a href="#n1139" name="n1139">1139</a>
<strong><a href="#n1140" name="n1140">1140</a></strong>
<a href="#n1141" name="n1141">1141</a>
<a href="#n1142" name="n1142">1142</a>
<a href="#n1143" name="n1143">1143</a>
<a href="#n1144" name="n1144">1144</a>
<a href="#n1145" name="n1145">1145</a>
<a href="#n1146" name="n1146">1146</a>
<a href="#n1147" name="n1147">1147</a>
<a href="#n1148" name="n1148">1148</a>
<a href="#n1149" name="n1149">1149</a>
<strong><a href="#n1150" name="n1150">1150</a></strong>
<a href="#n1151" name="n1151">1151</a>
<a href="#n1152" name="n1152">1152</a>
<a href="#n1153" name="n1153">1153</a>
<a href="#n1154" name="n1154">1154</a>
<a href="#n1155" name="n1155">1155</a>
<a href="#n1156" name="n1156">1156</a>
<a href="#n1157" name="n1157">1157</a>
<a href="#n1158" name="n1158">1158</a>
<a href="#n1159" name="n1159">1159</a>
<strong><a href="#n1160" name="n1160">1160</a></strong>
<a href="#n1161" name="n1161">1161</a>
<a href="#n1162" name="n1162">1162</a>
<a href="#n1163" name="n1163">1163</a>
<a href="#n1164" name="n1164">1164</a>
<a href="#n1165" name="n1165">1165</a>
<a href="#n1166" name="n1166">1166</a>
<a href="#n1167" name="n1167">1167</a>
<a href="#n1168" name="n1168">1168</a>
<a href="#n1169" name="n1169">1169</a>
<strong><a href="#n1170" name="n1170">1170</a></strong>
<a href="#n1171" name="n1171">1171</a>
<a href="#n1172" name="n1172">1172</a>
<a href="#n1173" name="n1173">1173</a>
<a href="#n1174" name="n1174">1174</a>
<a href="#n1175" name="n1175">1175</a>
<a href="#n1176" name="n1176">1176</a>
<a href="#n1177" name="n1177">1177</a>
<a href="#n1178" name="n1178">1178</a>
<a href="#n1179" name="n1179">1179</a>
<strong><a href="#n1180" name="n1180">1180</a></strong>
<a href="#n1181" name="n1181">1181</a>
<a href="#n1182" name="n1182">1182</a>
<a href="#n1183" name="n1183">1183</a>
<a href="#n1184" name="n1184">1184</a>
<a href="#n1185" name="n1185">1185</a>
<a href="#n1186" name="n1186">1186</a>
<a href="#n1187" name="n1187">1187</a>
<a href="#n1188" name="n1188">1188</a>
<a href="#n1189" name="n1189">1189</a>
<strong><a href="#n1190" name="n1190">1190</a></strong>
<a href="#n1191" name="n1191">1191</a>
<a href="#n1192" name="n1192">1192</a>
<a href="#n1193" name="n1193">1193</a>
<a href="#n1194" name="n1194">1194</a>
<a href="#n1195" name="n1195">1195</a>
<a href="#n1196" name="n1196">1196</a>
<a href="#n1197" name="n1197">1197</a>
<a href="#n1198" name="n1198">1198</a>
<a href="#n1199" name="n1199">1199</a>
<strong><a href="#n1200" name="n1200">1200</a></strong>
<a href="#n1201" name="n1201">1201</a>
<a href="#n1202" name="n1202">1202</a>
<a href="#n1203" name="n1203">1203</a>
<a href="#n1204" name="n1204">1204</a>
<a href="#n1205" name="n1205">1205</a>
<a href="#n1206" name="n1206">1206</a>
<a href="#n1207" name="n1207">1207</a>
<a href="#n1208" name="n1208">1208</a>
<a href="#n1209" name="n1209">1209</a>
<strong><a href="#n1210" name="n1210">1210</a></strong>
<a href="#n1211" name="n1211">1211</a>
<a href="#n1212" name="n1212">1212</a>
<a href="#n1213" name="n1213">1213</a>
<a href="#n1214" name="n1214">1214</a>
<a href="#n1215" name="n1215">1215</a>
<a href="#n1216" name="n1216">1216</a>
<a href="#n1217" name="n1217">1217</a>
<a href="#n1218" name="n1218">1218</a>
<a href="#n1219" name="n1219">1219</a>
<strong><a href="#n1220" name="n1220">1220</a></strong>
<a href="#n1221" name="n1221">1221</a>
<a href="#n1222" name="n1222">1222</a>
<a href="#n1223" name="n1223">1223</a>
<a href="#n1224" name="n1224">1224</a>
<a href="#n1225" name="n1225">1225</a>
<a href="#n1226" name="n1226">1226</a>
<a href="#n1227" name="n1227">1227</a>
<a href="#n1228" name="n1228">1228</a>
<a href="#n1229" name="n1229">1229</a>
<strong><a href="#n1230" name="n1230">1230</a></strong>
<a href="#n1231" name="n1231">1231</a>
<a href="#n1232" name="n1232">1232</a>
<a href="#n1233" name="n1233">1233</a>
<a href="#n1234" name="n1234">1234</a>
<a href="#n1235" name="n1235">1235</a>
<a href="#n1236" name="n1236">1236</a>
<a href="#n1237" name="n1237">1237</a>
<a href="#n1238" name="n1238">1238</a>
<a href="#n1239" name="n1239">1239</a>
<strong><a href="#n1240" name="n1240">1240</a></strong>
<a href="#n1241" name="n1241">1241</a>
<a href="#n1242" name="n1242">1242</a>
<a href="#n1243" name="n1243">1243</a>
<a href="#n1244" name="n1244">1244</a>
<a href="#n1245" name="n1245">1245</a>
<a href="#n1246" name="n1246">1246</a>
<a href="#n1247" name="n1247">1247</a>
<a href="#n1248" name="n1248">1248</a>
<a href="#n1249" name="n1249">1249</a>
<strong><a href="#n1250" name="n1250">1250</a></strong>
<a href="#n1251" name="n1251">1251</a>
<a href="#n1252" name="n1252">1252</a>
<a href="#n1253" name="n1253">1253</a>
<a href="#n1254" name="n1254">1254</a>
<a href="#n1255" name="n1255">1255</a>
<a href="#n1256" name="n1256">1256</a>
<a href="#n1257" name="n1257">1257</a>
<a href="#n1258" name="n1258">1258</a>
<a href="#n1259" name="n1259">1259</a>
<strong><a href="#n1260" name="n1260">1260</a></strong>
<a href="#n1261" name="n1261">1261</a>
<a href="#n1262" name="n1262">1262</a>
<a href="#n1263" name="n1263">1263</a>
<a href="#n1264" name="n1264">1264</a>
<a href="#n1265" name="n1265">1265</a>
<a href="#n1266" name="n1266">1266</a>
<a href="#n1267" name="n1267">1267</a>
<a href="#n1268" name="n1268">1268</a>
<a href="#n1269" name="n1269">1269</a>
<strong><a href="#n1270" name="n1270">1270</a></strong>
<a href="#n1271" name="n1271">1271</a>
<a href="#n1272" name="n1272">1272</a>
<a href="#n1273" name="n1273">1273</a>
<a href="#n1274" name="n1274">1274</a>
<a href="#n1275" name="n1275">1275</a>
<a href="#n1276" name="n1276">1276</a>
<a href="#n1277" name="n1277">1277</a>
<a href="#n1278" name="n1278">1278</a>
<a href="#n1279" name="n1279">1279</a>
<strong><a href="#n1280" name="n1280">1280</a></strong>
<a href="#n1281" name="n1281">1281</a>
<a href="#n1282" name="n1282">1282</a>
<a href="#n1283" name="n1283">1283</a>
<a href="#n1284" name="n1284">1284</a>
<a href="#n1285" name="n1285">1285</a>
<a href="#n1286" name="n1286">1286</a>
<a href="#n1287" name="n1287">1287</a>
<a href="#n1288" name="n1288">1288</a>
<a href="#n1289" name="n1289">1289</a>
<strong><a href="#n1290" name="n1290">1290</a></strong>
<a href="#n1291" name="n1291">1291</a>
<a href="#n1292" name="n1292">1292</a>
<a href="#n1293" name="n1293">1293</a>
<a href="#n1294" name="n1294">1294</a>
<a href="#n1295" name="n1295">1295</a>
<a href="#n1296" name="n1296">1296</a>
<a href="#n1297" name="n1297">1297</a>
<a href="#n1298" name="n1298">1298</a>
<a href="#n1299" name="n1299">1299</a>
<strong><a href="#n1300" name="n1300">1300</a></strong>
<a href="#n1301" name="n1301">1301</a>
<a href="#n1302" name="n1302">1302</a>
<a href="#n1303" name="n1303">1303</a>
<a href="#n1304" name="n1304">1304</a>
<a href="#n1305" name="n1305">1305</a>
<a href="#n1306" name="n1306">1306</a>
<a href="#n1307" name="n1307">1307</a>
<a href="#n1308" name="n1308">1308</a>
<a href="#n1309" name="n1309">1309</a>
<strong><a href="#n1310" name="n1310">1310</a></strong>
<a href="#n1311" name="n1311">1311</a>
<a href="#n1312" name="n1312">1312</a>
<a href="#n1313" name="n1313">1313</a>
<a href="#n1314" name="n1314">1314</a>
<a href="#n1315" name="n1315">1315</a>
<a href="#n1316" name="n1316">1316</a>
<a href="#n1317" name="n1317">1317</a>
<a href="#n1318" name="n1318">1318</a>
<a href="#n1319" name="n1319">1319</a>
<strong><a href="#n1320" name="n1320">1320</a></strong>
<a href="#n1321" name="n1321">1321</a>
<a href="#n1322" name="n1322">1322</a>
<a href="#n1323" name="n1323">1323</a>
<a href="#n1324" name="n1324">1324</a>
<a href="#n1325" name="n1325">1325</a>
<a href="#n1326" name="n1326">1326</a>
<a href="#n1327" name="n1327">1327</a>
<a href="#n1328" name="n1328">1328</a>
<a href="#n1329" name="n1329">1329</a>
<strong><a href="#n1330" name="n1330">1330</a></strong>
<a href="#n1331" name="n1331">1331</a>
<a href="#n1332" name="n1332">1332</a>
<a href="#n1333" name="n1333">1333</a>
<a href="#n1334" name="n1334">1334</a>
<a href="#n1335" name="n1335">1335</a>
<a href="#n1336" name="n1336">1336</a>
<a href="#n1337" name="n1337">1337</a>
<a href="#n1338" name="n1338">1338</a>
<a href="#n1339" name="n1339">1339</a>
<strong><a href="#n1340" name="n1340">1340</a></strong>
<a href="#n1341" name="n1341">1341</a>
<a href="#n1342" name="n1342">1342</a>
<a href="#n1343" name="n1343">1343</a>
<a href="#n1344" name="n1344">1344</a>
<a href="#n1345" name="n1345">1345</a>
<a href="#n1346" name="n1346">1346</a>
<a href="#n1347" name="n1347">1347</a>
<a href="#n1348" name="n1348">1348</a>
<a href="#n1349" name="n1349">1349</a>
<strong><a href="#n1350" name="n1350">1350</a></strong>
<a href="#n1351" name="n1351">1351</a>
<a href="#n1352" name="n1352">1352</a>
<a href="#n1353" name="n1353">1353</a>
<a href="#n1354" name="n1354">1354</a>
<a href="#n1355" name="n1355">1355</a>
<a href="#n1356" name="n1356">1356</a>
<a href="#n1357" name="n1357">1357</a>
<a href="#n1358" name="n1358">1358</a>
<a href="#n1359" name="n1359">1359</a>
<strong><a href="#n1360" name="n1360">1360</a></strong>
<a href="#n1361" name="n1361">1361</a>
<a href="#n1362" name="n1362">1362</a>
<a href="#n1363" name="n1363">1363</a>
<a href="#n1364" name="n1364">1364</a>
<a href="#n1365" name="n1365">1365</a>
<a href="#n1366" name="n1366">1366</a>
<a href="#n1367" name="n1367">1367</a>
<a href="#n1368" name="n1368">1368</a>
<a href="#n1369" name="n1369">1369</a>
<strong><a href="#n1370" name="n1370">1370</a></strong>
<a href="#n1371" name="n1371">1371</a>
<a href="#n1372" name="n1372">1372</a>
<a href="#n1373" name="n1373">1373</a>
<a href="#n1374" name="n1374">1374</a>
<a href="#n1375" name="n1375">1375</a>
<a href="#n1376" name="n1376">1376</a>
<a href="#n1377" name="n1377">1377</a>
<a href="#n1378" name="n1378">1378</a>
<a href="#n1379" name="n1379">1379</a>
<strong><a href="#n1380" name="n1380">1380</a></strong>
<a href="#n1381" name="n1381">1381</a>
<a href="#n1382" name="n1382">1382</a>
<a href="#n1383" name="n1383">1383</a>
<a href="#n1384" name="n1384">1384</a>
<a href="#n1385" name="n1385">1385</a>
<a href="#n1386" name="n1386">1386</a>
<a href="#n1387" name="n1387">1387</a>
<a href="#n1388" name="n1388">1388</a>
<a href="#n1389" name="n1389">1389</a>
<strong><a href="#n1390" name="n1390">1390</a></strong>
<a href="#n1391" name="n1391">1391</a>
<a href="#n1392" name="n1392">1392</a>
<a href="#n1393" name="n1393">1393</a>
<a href="#n1394" name="n1394">1394</a>
<a href="#n1395" name="n1395">1395</a>
<a href="#n1396" name="n1396">1396</a>
<a href="#n1397" name="n1397">1397</a>
<a href="#n1398" name="n1398">1398</a>
<a href="#n1399" name="n1399">1399</a>
<strong><a href="#n1400" name="n1400">1400</a></strong>
<a href="#n1401" name="n1401">1401</a>
<a href="#n1402" name="n1402">1402</a>
<a href="#n1403" name="n1403">1403</a>
<a href="#n1404" name="n1404">1404</a>
<a href="#n1405" name="n1405">1405</a>
<a href="#n1406" name="n1406">1406</a>
<a href="#n1407" name="n1407">1407</a>
<a href="#n1408" name="n1408">1408</a>
<a href="#n1409" name="n1409">1409</a>
<strong><a href="#n1410" name="n1410">1410</a></strong>
<a href="#n1411" name="n1411">1411</a>
<a href="#n1412" name="n1412">1412</a>
<a href="#n1413" name="n1413">1413</a>
<a href="#n1414" name="n1414">1414</a>
<a href="#n1415" name="n1415">1415</a>
<a href="#n1416" name="n1416">1416</a>
<a href="#n1417" name="n1417">1417</a>
<a href="#n1418" name="n1418">1418</a>
<a href="#n1419" name="n1419">1419</a>
<strong><a href="#n1420" name="n1420">1420</a></strong>
<a href="#n1421" name="n1421">1421</a>
<a href="#n1422" name="n1422">1422</a>
<a href="#n1423" name="n1423">1423</a>
<a href="#n1424" name="n1424">1424</a>
<a href="#n1425" name="n1425">1425</a>
<a href="#n1426" name="n1426">1426</a>
<a href="#n1427" name="n1427">1427</a>
<a href="#n1428" name="n1428">1428</a>
<a href="#n1429" name="n1429">1429</a>
<strong><a href="#n1430" name="n1430">1430</a></strong>
<a href="#n1431" name="n1431">1431</a>
<a href="#n1432" name="n1432">1432</a>
<a href="#n1433" name="n1433">1433</a>
<a href="#n1434" name="n1434">1434</a>
<a href="#n1435" name="n1435">1435</a>
<a href="#n1436" name="n1436">1436</a>
<a href="#n1437" name="n1437">1437</a>
<a href="#n1438" name="n1438">1438</a>
<a href="#n1439" name="n1439">1439</a>
<strong><a href="#n1440" name="n1440">1440</a></strong>
<a href="#n1441" name="n1441">1441</a>
<a href="#n1442" name="n1442">1442</a>
<a href="#n1443" name="n1443">1443</a>
<a href="#n1444" name="n1444">1444</a>
<a href="#n1445" name="n1445">1445</a>
<a href="#n1446" name="n1446">1446</a>
<a href="#n1447" name="n1447">1447</a>
<a href="#n1448" name="n1448">1448</a>
<a href="#n1449" name="n1449">1449</a>
<strong><a href="#n1450" name="n1450">1450</a></strong>
<a href="#n1451" name="n1451">1451</a>
<a href="#n1452" name="n1452">1452</a>
<a href="#n1453" name="n1453">1453</a>
<a href="#n1454" name="n1454">1454</a>
<a href="#n1455" name="n1455">1455</a>
<a href="#n1456" name="n1456">1456</a>
<a href="#n1457" name="n1457">1457</a>
<a href="#n1458" name="n1458">1458</a>
<a href="#n1459" name="n1459">1459</a>
<strong><a href="#n1460" name="n1460">1460</a></strong>
<a href="#n1461" name="n1461">1461</a>
<a href="#n1462" name="n1462">1462</a>
<a href="#n1463" name="n1463">1463</a>
<a href="#n1464" name="n1464">1464</a>
<a href="#n1465" name="n1465">1465</a>
<a href="#n1466" name="n1466">1466</a>
<a href="#n1467" name="n1467">1467</a>
<a href="#n1468" name="n1468">1468</a>
<a href="#n1469" name="n1469">1469</a>
<strong><a href="#n1470" name="n1470">1470</a></strong>
<a href="#n1471" name="n1471">1471</a>
<a href="#n1472" name="n1472">1472</a>
<a href="#n1473" name="n1473">1473</a>
<a href="#n1474" name="n1474">1474</a>
<a href="#n1475" name="n1475">1475</a>
<a href="#n1476" name="n1476">1476</a>
<a href="#n1477" name="n1477">1477</a>
<a href="#n1478" name="n1478">1478</a>
<a href="#n1479" name="n1479">1479</a>
<strong><a href="#n1480" name="n1480">1480</a></strong>
<a href="#n1481" name="n1481">1481</a>
<a href="#n1482" name="n1482">1482</a>
<a href="#n1483" name="n1483">1483</a>
<a href="#n1484" name="n1484">1484</a>
<a href="#n1485" name="n1485">1485</a>
<a href="#n1486" name="n1486">1486</a>
<a href="#n1487" name="n1487">1487</a>
<a href="#n1488" name="n1488">1488</a>
<a href="#n1489" name="n1489">1489</a>
<strong><a href="#n1490" name="n1490">1490</a></strong>
<a href="#n1491" name="n1491">1491</a>
<a href="#n1492" name="n1492">1492</a>
<a href="#n1493" name="n1493">1493</a>
<a href="#n1494" name="n1494">1494</a>
<a href="#n1495" name="n1495">1495</a>
<a href="#n1496" name="n1496">1496</a>
<a href="#n1497" name="n1497">1497</a>
<a href="#n1498" name="n1498">1498</a>
<a href="#n1499" name="n1499">1499</a>
<strong><a href="#n1500" name="n1500">1500</a></strong>
<a href="#n1501" name="n1501">1501</a>
<a href="#n1502" name="n1502">1502</a>
<a href="#n1503" name="n1503">1503</a>
<a href="#n1504" name="n1504">1504</a>
<a href="#n1505" name="n1505">1505</a>
<a href="#n1506" name="n1506">1506</a>
<a href="#n1507" name="n1507">1507</a>
<a href="#n1508" name="n1508">1508</a>
<a href="#n1509" name="n1509">1509</a>
<strong><a href="#n1510" name="n1510">1510</a></strong>
<a href="#n1511" name="n1511">1511</a>
<a href="#n1512" name="n1512">1512</a>
<a href="#n1513" name="n1513">1513</a>
<a href="#n1514" name="n1514">1514</a>
<a href="#n1515" name="n1515">1515</a>
<a href="#n1516" name="n1516">1516</a>
<a href="#n1517" name="n1517">1517</a>
<a href="#n1518" name="n1518">1518</a>
<a href="#n1519" name="n1519">1519</a>
<strong><a href="#n1520" name="n1520">1520</a></strong>
<a href="#n1521" name="n1521">1521</a>
<a href="#n1522" name="n1522">1522</a>
<a href="#n1523" name="n1523">1523</a>
<a href="#n1524" name="n1524">1524</a>
<a href="#n1525" name="n1525">1525</a>
<a href="#n1526" name="n1526">1526</a>
<a href="#n1527" name="n1527">1527</a>
<a href="#n1528" name="n1528">1528</a>
<a href="#n1529" name="n1529">1529</a>
<strong><a href="#n1530" name="n1530">1530</a></strong>
<a href="#n1531" name="n1531">1531</a>
<a href="#n1532" name="n1532">1532</a>
<a href="#n1533" name="n1533">1533</a>
<a href="#n1534" name="n1534">1534</a>
<a href="#n1535" name="n1535">1535</a>
<a href="#n1536" name="n1536">1536</a>
<a href="#n1537" name="n1537">1537</a>
<a href="#n1538" name="n1538">1538</a>
<a href="#n1539" name="n1539">1539</a>
<strong><a href="#n1540" name="n1540">1540</a></strong>
<a href="#n1541" name="n1541">1541</a>
<a href="#n1542" name="n1542">1542</a>
<a href="#n1543" name="n1543">1543</a>
<a href="#n1544" name="n1544">1544</a>
<a href="#n1545" name="n1545">1545</a>
<a href="#n1546" name="n1546">1546</a>
<a href="#n1547" name="n1547">1547</a>
<a href="#n1548" name="n1548">1548</a>
<a href="#n1549" name="n1549">1549</a>
<strong><a href="#n1550" name="n1550">1550</a></strong>
<a href="#n1551" name="n1551">1551</a>
<a href="#n1552" name="n1552">1552</a>
<a href="#n1553" name="n1553">1553</a>
<a href="#n1554" name="n1554">1554</a>
<a href="#n1555" name="n1555">1555</a>
<a href="#n1556" name="n1556">1556</a>
<a href="#n1557" name="n1557">1557</a>
<a href="#n1558" name="n1558">1558</a>
<a href="#n1559" name="n1559">1559</a>
<strong><a href="#n1560" name="n1560">1560</a></strong>
<a href="#n1561" name="n1561">1561</a>
<a href="#n1562" name="n1562">1562</a>
<a href="#n1563" name="n1563">1563</a>
<a href="#n1564" name="n1564">1564</a>
<a href="#n1565" name="n1565">1565</a>
<a href="#n1566" name="n1566">1566</a>
<a href="#n1567" name="n1567">1567</a>
<a href="#n1568" name="n1568">1568</a>
<a href="#n1569" name="n1569">1569</a>
<strong><a href="#n1570" name="n1570">1570</a></strong>
<a href="#n1571" name="n1571">1571</a>
<a href="#n1572" name="n1572">1572</a>
<a href="#n1573" name="n1573">1573</a>
<a href="#n1574" name="n1574">1574</a>
<a href="#n1575" name="n1575">1575</a>
<a href="#n1576" name="n1576">1576</a>
<a href="#n1577" name="n1577">1577</a>
<a href="#n1578" name="n1578">1578</a>
<a href="#n1579" name="n1579">1579</a>
<strong><a href="#n1580" name="n1580">1580</a></strong>
<a href="#n1581" name="n1581">1581</a>
<a href="#n1582" name="n1582">1582</a>
<a href="#n1583" name="n1583">1583</a>
<a href="#n1584" name="n1584">1584</a>
<a href="#n1585" name="n1585">1585</a>
<a href="#n1586" name="n1586">1586</a>
<a href="#n1587" name="n1587">1587</a>
<a href="#n1588" name="n1588">1588</a>
<a href="#n1589" name="n1589">1589</a>
<strong><a href="#n1590" name="n1590">1590</a></strong>
<a href="#n1591" name="n1591">1591</a>
<a href="#n1592" name="n1592">1592</a>
<a href="#n1593" name="n1593">1593</a>
<a href="#n1594" name="n1594">1594</a>
<a href="#n1595" name="n1595">1595</a>
<a href="#n1596" name="n1596">1596</a>
<a href="#n1597" name="n1597">1597</a>
<a href="#n1598" name="n1598">1598</a>
<a href="#n1599" name="n1599">1599</a>
<strong><a href="#n1600" name="n1600">1600</a></strong>
<a href="#n1601" name="n1601">1601</a>
<a href="#n1602" name="n1602">1602</a>
<a href="#n1603" name="n1603">1603</a>
<a href="#n1604" name="n1604">1604</a>
<a href="#n1605" name="n1605">1605</a>
<a href="#n1606" name="n1606">1606</a>
<a href="#n1607" name="n1607">1607</a>
<a href="#n1608" name="n1608">1608</a>
<a href="#n1609" name="n1609">1609</a>
<strong><a href="#n1610" name="n1610">1610</a></strong>
<a href="#n1611" name="n1611">1611</a>
<a href="#n1612" name="n1612">1612</a>
<a href="#n1613" name="n1613">1613</a>
<a href="#n1614" name="n1614">1614</a>
<a href="#n1615" name="n1615">1615</a>
<a href="#n1616" name="n1616">1616</a>
<a href="#n1617" name="n1617">1617</a>
<a href="#n1618" name="n1618">1618</a>
<a href="#n1619" name="n1619">1619</a>
<strong><a href="#n1620" name="n1620">1620</a></strong>
<a href="#n1621" name="n1621">1621</a>
<a href="#n1622" name="n1622">1622</a>
<a href="#n1623" name="n1623">1623</a>
<a href="#n1624" name="n1624">1624</a>
<a href="#n1625" name="n1625">1625</a>
<a href="#n1626" name="n1626">1626</a>
<a href="#n1627" name="n1627">1627</a>
<a href="#n1628" name="n1628">1628</a>
<a href="#n1629" name="n1629">1629</a>
<strong><a href="#n1630" name="n1630">1630</a></strong>
<a href="#n1631" name="n1631">1631</a>
<a href="#n1632" name="n1632">1632</a>
<a href="#n1633" name="n1633">1633</a>
<a href="#n1634" name="n1634">1634</a>
<a href="#n1635" name="n1635">1635</a>
<a href="#n1636" name="n1636">1636</a>
<a href="#n1637" name="n1637">1637</a>
<a href="#n1638" name="n1638">1638</a>
<a href="#n1639" name="n1639">1639</a>
<strong><a href="#n1640" name="n1640">1640</a></strong>
<a href="#n1641" name="n1641">1641</a>
<a href="#n1642" name="n1642">1642</a>
<a href="#n1643" name="n1643">1643</a>
<a href="#n1644" name="n1644">1644</a>
<a href="#n1645" name="n1645">1645</a>
<a href="#n1646" name="n1646">1646</a>
<a href="#n1647" name="n1647">1647</a>
<a href="#n1648" name="n1648">1648</a>
<a href="#n1649" name="n1649">1649</a>
<strong><a href="#n1650" name="n1650">1650</a></strong>
<a href="#n1651" name="n1651">1651</a>
<a href="#n1652" name="n1652">1652</a>
<a href="#n1653" name="n1653">1653</a>
<a href="#n1654" name="n1654">1654</a>
<a href="#n1655" name="n1655">1655</a>
<a href="#n1656" name="n1656">1656</a>
<a href="#n1657" name="n1657">1657</a>
<a href="#n1658" name="n1658">1658</a>
<a href="#n1659" name="n1659">1659</a>
<strong><a href="#n1660" name="n1660">1660</a></strong>
<a href="#n1661" name="n1661">1661</a>
<a href="#n1662" name="n1662">1662</a>
<a href="#n1663" name="n1663">1663</a>
<a href="#n1664" name="n1664">1664</a>
<a href="#n1665" name="n1665">1665</a>
<a href="#n1666" name="n1666">1666</a>
<a href="#n1667" name="n1667">1667</a>
<a href="#n1668" name="n1668">1668</a>
<a href="#n1669" name="n1669">1669</a>
<strong><a href="#n1670" name="n1670">1670</a></strong>
<a href="#n1671" name="n1671">1671</a>
<a href="#n1672" name="n1672">1672</a>
<a href="#n1673" name="n1673">1673</a>
<a href="#n1674" name="n1674">1674</a>
<a href="#n1675" name="n1675">1675</a>
<a href="#n1676" name="n1676">1676</a>
<a href="#n1677" name="n1677">1677</a>
<a href="#n1678" name="n1678">1678</a>
<a href="#n1679" name="n1679">1679</a>
<strong><a href="#n1680" name="n1680">1680</a></strong>
<a href="#n1681" name="n1681">1681</a>
<a href="#n1682" name="n1682">1682</a>
<a href="#n1683" name="n1683">1683</a>
<a href="#n1684" name="n1684">1684</a>
<a href="#n1685" name="n1685">1685</a>
<a href="#n1686" name="n1686">1686</a>
<a href="#n1687" name="n1687">1687</a>
<a href="#n1688" name="n1688">1688</a>
<a href="#n1689" name="n1689">1689</a>
<strong><a href="#n1690" name="n1690">1690</a></strong>
<a href="#n1691" name="n1691">1691</a>
<a href="#n1692" name="n1692">1692</a>
<a href="#n1693" name="n1693">1693</a>
<a href="#n1694" name="n1694">1694</a>
<a href="#n1695" name="n1695">1695</a>
<a href="#n1696" name="n1696">1696</a>
<a href="#n1697" name="n1697">1697</a>
<a href="#n1698" name="n1698">1698</a>
<a href="#n1699" name="n1699">1699</a>
<strong><a href="#n1700" name="n1700">1700</a></strong>
<a href="#n1701" name="n1701">1701</a>
<a href="#n1702" name="n1702">1702</a>
<a href="#n1703" name="n1703">1703</a>
<a href="#n1704" name="n1704">1704</a>
<a href="#n1705" name="n1705">1705</a>
<a href="#n1706" name="n1706">1706</a>
<a href="#n1707" name="n1707">1707</a>
<a href="#n1708" name="n1708">1708</a>
<a href="#n1709" name="n1709">1709</a>
<strong><a href="#n1710" name="n1710">1710</a></strong>
<a href="#n1711" name="n1711">1711</a>
<a href="#n1712" name="n1712">1712</a>
<a href="#n1713" name="n1713">1713</a>
<a href="#n1714" name="n1714">1714</a>
<a href="#n1715" name="n1715">1715</a>
<a href="#n1716" name="n1716">1716</a>
<a href="#n1717" name="n1717">1717</a>
<a href="#n1718" name="n1718">1718</a>
<a href="#n1719" name="n1719">1719</a>
<strong><a href="#n1720" name="n1720">1720</a></strong>
<a href="#n1721" name="n1721">1721</a>
<a href="#n1722" name="n1722">1722</a>
<a href="#n1723" name="n1723">1723</a>
<a href="#n1724" name="n1724">1724</a>
<a href="#n1725" name="n1725">1725</a>
<a href="#n1726" name="n1726">1726</a>
<a href="#n1727" name="n1727">1727</a>
<a href="#n1728" name="n1728">1728</a>
<a href="#n1729" name="n1729">1729</a>
<strong><a href="#n1730" name="n1730">1730</a></strong>
<a href="#n1731" name="n1731">1731</a>
<a href="#n1732" name="n1732">1732</a>
<a href="#n1733" name="n1733">1733</a>
<a href="#n1734" name="n1734">1734</a>
<a href="#n1735" name="n1735">1735</a>
<a href="#n1736" name="n1736">1736</a>
<a href="#n1737" name="n1737">1737</a>
<a href="#n1738" name="n1738">1738</a>
<a href="#n1739" name="n1739">1739</a>
<strong><a href="#n1740" name="n1740">1740</a></strong>
<a href="#n1741" name="n1741">1741</a>
<a href="#n1742" name="n1742">1742</a>
<a href="#n1743" name="n1743">1743</a>
<a href="#n1744" name="n1744">1744</a>
<a href="#n1745" name="n1745">1745</a>
<a href="#n1746" name="n1746">1746</a>
<a href="#n1747" name="n1747">1747</a>
<a href="#n1748" name="n1748">1748</a>
<a href="#n1749" name="n1749">1749</a>
<strong><a href="#n1750" name="n1750">1750</a></strong>
<a href="#n1751" name="n1751">1751</a>
<a href="#n1752" name="n1752">1752</a>
<a href="#n1753" name="n1753">1753</a>
<a href="#n1754" name="n1754">1754</a>
<a href="#n1755" name="n1755">1755</a>
<a href="#n1756" name="n1756">1756</a>
<a href="#n1757" name="n1757">1757</a>
<a href="#n1758" name="n1758">1758</a>
<a href="#n1759" name="n1759">1759</a>
<strong><a href="#n1760" name="n1760">1760</a></strong>
<a href="#n1761" name="n1761">1761</a>
<a href="#n1762" name="n1762">1762</a>
<a href="#n1763" name="n1763">1763</a>
<a href="#n1764" name="n1764">1764</a>
<a href="#n1765" name="n1765">1765</a>
<a href="#n1766" name="n1766">1766</a>
<a href="#n1767" name="n1767">1767</a>
<a href="#n1768" name="n1768">1768</a>
<a href="#n1769" name="n1769">1769</a>
<strong><a href="#n1770" name="n1770">1770</a></strong>
<a href="#n1771" name="n1771">1771</a>
<a href="#n1772" name="n1772">1772</a>
<a href="#n1773" name="n1773">1773</a>
<a href="#n1774" name="n1774">1774</a>
<a href="#n1775" name="n1775">1775</a>
<a href="#n1776" name="n1776">1776</a>
<a href="#n1777" name="n1777">1777</a>
<a href="#n1778" name="n1778">1778</a>
<a href="#n1779" name="n1779">1779</a>
<strong><a href="#n1780" name="n1780">1780</a></strong>
<a href="#n1781" name="n1781">1781</a>
<a href="#n1782" name="n1782">1782</a>
<a href="#n1783" name="n1783">1783</a>
<a href="#n1784" name="n1784">1784</a>
<a href="#n1785" name="n1785">1785</a>
<a href="#n1786" name="n1786">1786</a>
<a href="#n1787" name="n1787">1787</a>
<a href="#n1788" name="n1788">1788</a>
<a href="#n1789" name="n1789">1789</a>
<strong><a href="#n1790" name="n1790">1790</a></strong>
<a href="#n1791" name="n1791">1791</a>
<a href="#n1792" name="n1792">1792</a>
<a href="#n1793" name="n1793">1793</a>
<a href="#n1794" name="n1794">1794</a>
<a href="#n1795" name="n1795">1795</a>
<a href="#n1796" name="n1796">1796</a>
<a href="#n1797" name="n1797">1797</a>
<a href="#n1798" name="n1798">1798</a>
<a href="#n1799" name="n1799">1799</a>
<strong><a href="#n1800" name="n1800">1800</a></strong>
<a href="#n1801" name="n1801">1801</a>
<a href="#n1802" name="n1802">1802</a>
<a href="#n1803" name="n1803">1803</a>
<a href="#n1804" name="n1804">1804</a>
<a href="#n1805" name="n1805">1805</a>
<a href="#n1806" name="n1806">1806</a>
<a href="#n1807" name="n1807">1807</a>
<a href="#n1808" name="n1808">1808</a>
<a href="#n1809" name="n1809">1809</a>
<strong><a href="#n1810" name="n1810">1810</a></strong>
<a href="#n1811" name="n1811">1811</a>
<a href="#n1812" name="n1812">1812</a>
<a href="#n1813" name="n1813">1813</a>
<a href="#n1814" name="n1814">1814</a>
<a href="#n1815" name="n1815">1815</a>
<a href="#n1816" name="n1816">1816</a>
<a href="#n1817" name="n1817">1817</a>
<a href="#n1818" name="n1818">1818</a>
<a href="#n1819" name="n1819">1819</a>
<strong><a href="#n1820" name="n1820">1820</a></strong>
<a href="#n1821" name="n1821">1821</a>
<a href="#n1822" name="n1822">1822</a>
<a href="#n1823" name="n1823">1823</a>
<a href="#n1824" name="n1824">1824</a>
<a href="#n1825" name="n1825">1825</a>
<a href="#n1826" name="n1826">1826</a>
<a href="#n1827" name="n1827">1827</a>
<a href="#n1828" name="n1828">1828</a>
<a href="#n1829" name="n1829">1829</a>
<strong><a href="#n1830" name="n1830">1830</a></strong>
<a href="#n1831" name="n1831">1831</a>
<a href="#n1832" name="n1832">1832</a>
<a href="#n1833" name="n1833">1833</a>
<a href="#n1834" name="n1834">1834</a>
<a href="#n1835" name="n1835">1835</a>
<a href="#n1836" name="n1836">1836</a>
<a href="#n1837" name="n1837">1837</a>
<a href="#n1838" name="n1838">1838</a>
<a href="#n1839" name="n1839">1839</a>
<strong><a href="#n1840" name="n1840">1840</a></strong>
<a href="#n1841" name="n1841">1841</a>
<a href="#n1842" name="n1842">1842</a>
<a href="#n1843" name="n1843">1843</a>
<a href="#n1844" name="n1844">1844</a>
<a href="#n1845" name="n1845">1845</a>
<a href="#n1846" name="n1846">1846</a>
<a href="#n1847" name="n1847">1847</a>
<a href="#n1848" name="n1848">1848</a>
<a href="#n1849" name="n1849">1849</a>
<strong><a href="#n1850" name="n1850">1850</a></strong>
<a href="#n1851" name="n1851">1851</a>
<a href="#n1852" name="n1852">1852</a>
<a href="#n1853" name="n1853">1853</a>
<a href="#n1854" name="n1854">1854</a>
<a href="#n1855" name="n1855">1855</a>
<a href="#n1856" name="n1856">1856</a>
<a href="#n1857" name="n1857">1857</a>
<a href="#n1858" name="n1858">1858</a>
<a href="#n1859" name="n1859">1859</a>
<strong><a href="#n1860" name="n1860">1860</a></strong>
<a href="#n1861" name="n1861">1861</a>
<a href="#n1862" name="n1862">1862</a>
<a href="#n1863" name="n1863">1863</a>
<a href="#n1864" name="n1864">1864</a>
<a href="#n1865" name="n1865">1865</a>
<a href="#n1866" name="n1866">1866</a>
<a href="#n1867" name="n1867">1867</a>
<a href="#n1868" name="n1868">1868</a>
<a href="#n1869" name="n1869">1869</a>
<strong><a href="#n1870" name="n1870">1870</a></strong>
<a href="#n1871" name="n1871">1871</a>
<a href="#n1872" name="n1872">1872</a>
<a href="#n1873" name="n1873">1873</a>
<a href="#n1874" name="n1874">1874</a>
<a href="#n1875" name="n1875">1875</a>
<a href="#n1876" name="n1876">1876</a>
<a href="#n1877" name="n1877">1877</a>
<a href="#n1878" name="n1878">1878</a>
<a href="#n1879" name="n1879">1879</a>
<strong><a href="#n1880" name="n1880">1880</a></strong>
<a href="#n1881" name="n1881">1881</a>
<a href="#n1882" name="n1882">1882</a>
<a href="#n1883" name="n1883">1883</a>
<a href="#n1884" name="n1884">1884</a>
<a href="#n1885" name="n1885">1885</a>
<a href="#n1886" name="n1886">1886</a>
<a href="#n1887" name="n1887">1887</a>
<a href="#n1888" name="n1888">1888</a>
<a href="#n1889" name="n1889">1889</a>
<strong><a href="#n1890" name="n1890">1890</a></strong>
<a href="#n1891" name="n1891">1891</a>
<a href="#n1892" name="n1892">1892</a>
<a href="#n1893" name="n1893">1893</a>
<a href="#n1894" name="n1894">1894</a>
<a href="#n1895" name="n1895">1895</a>
<a href="#n1896" name="n1896">1896</a>
<a href="#n1897" name="n1897">1897</a>
<a href="#n1898" name="n1898">1898</a>
<a href="#n1899" name="n1899">1899</a>
<strong><a href="#n1900" name="n1900">1900</a></strong>
<a href="#n1901" name="n1901">1901</a>
<a href="#n1902" name="n1902">1902</a>
<a href="#n1903" name="n1903">1903</a>
<a href="#n1904" name="n1904">1904</a>
<a href="#n1905" name="n1905">1905</a>
<a href="#n1906" name="n1906">1906</a>
<a href="#n1907" name="n1907">1907</a>
<a href="#n1908" name="n1908">1908</a>
<a href="#n1909" name="n1909">1909</a>
<strong><a href="#n1910" name="n1910">1910</a></strong>
<a href="#n1911" name="n1911">1911</a>
<a href="#n1912" name="n1912">1912</a>
<a href="#n1913" name="n1913">1913</a>
<a href="#n1914" name="n1914">1914</a>
<a href="#n1915" name="n1915">1915</a>
<a href="#n1916" name="n1916">1916</a>
<a href="#n1917" name="n1917">1917</a>
<a href="#n1918" name="n1918">1918</a>
<a href="#n1919" name="n1919">1919</a>
<strong><a href="#n1920" name="n1920">1920</a></strong>
<a href="#n1921" name="n1921">1921</a>
<a href="#n1922" name="n1922">1922</a>
<a href="#n1923" name="n1923">1923</a>
<a href="#n1924" name="n1924">1924</a>
<a href="#n1925" name="n1925">1925</a>
<a href="#n1926" name="n1926">1926</a>
<a href="#n1927" name="n1927">1927</a>
<a href="#n1928" name="n1928">1928</a>
<a href="#n1929" name="n1929">1929</a>
<strong><a href="#n1930" name="n1930">1930</a></strong>
<a href="#n1931" name="n1931">1931</a>
<a href="#n1932" name="n1932">1932</a>
<a href="#n1933" name="n1933">1933</a>
<a href="#n1934" name="n1934">1934</a>
<a href="#n1935" name="n1935">1935</a>
<a href="#n1936" name="n1936">1936</a>
<a href="#n1937" name="n1937">1937</a>
<a href="#n1938" name="n1938">1938</a>
<a href="#n1939" name="n1939">1939</a>
<strong><a href="#n1940" name="n1940">1940</a></strong>
<a href="#n1941" name="n1941">1941</a>
<a href="#n1942" name="n1942">1942</a>
<a href="#n1943" name="n1943">1943</a>
<a href="#n1944" name="n1944">1944</a>
<a href="#n1945" name="n1945">1945</a>
<a href="#n1946" name="n1946">1946</a>
<a href="#n1947" name="n1947">1947</a>
<a href="#n1948" name="n1948">1948</a>
<a href="#n1949" name="n1949">1949</a>
<strong><a href="#n1950" name="n1950">1950</a></strong>
<a href="#n1951" name="n1951">1951</a>
<a href="#n1952" name="n1952">1952</a>
<a href="#n1953" name="n1953">1953</a>
<a href="#n1954" name="n1954">1954</a>
<a href="#n1955" name="n1955">1955</a>
<a href="#n1956" name="n1956">1956</a>
<a href="#n1957" name="n1957">1957</a>
<a href="#n1958" name="n1958">1958</a>
<a href="#n1959" name="n1959">1959</a>
<strong><a href="#n1960" name="n1960">1960</a></strong>
<a href="#n1961" name="n1961">1961</a>
<a href="#n1962" name="n1962">1962</a>
<a href="#n1963" name="n1963">1963</a>
<a href="#n1964" name="n1964">1964</a>
<a href="#n1965" name="n1965">1965</a>
<a href="#n1966" name="n1966">1966</a>
<a href="#n1967" name="n1967">1967</a>
<a href="#n1968" name="n1968">1968</a>
<a href="#n1969" name="n1969">1969</a>
<strong><a href="#n1970" name="n1970">1970</a></strong>
<a href="#n1971" name="n1971">1971</a>
<a href="#n1972" name="n1972">1972</a>
<a href="#n1973" name="n1973">1973</a>
<a href="#n1974" name="n1974">1974</a>
<a href="#n1975" name="n1975">1975</a>
<a href="#n1976" name="n1976">1976</a>
<a href="#n1977" name="n1977">1977</a>
<a href="#n1978" name="n1978">1978</a>
<a href="#n1979" name="n1979">1979</a>
<strong><a href="#n1980" name="n1980">1980</a></strong>
<a href="#n1981" name="n1981">1981</a>
<a href="#n1982" name="n1982">1982</a>
<a href="#n1983" name="n1983">1983</a>
<a href="#n1984" name="n1984">1984</a>
<a href="#n1985" name="n1985">1985</a>
<a href="#n1986" name="n1986">1986</a>
<a href="#n1987" name="n1987">1987</a>
<a href="#n1988" name="n1988">1988</a>
<a href="#n1989" name="n1989">1989</a>
<strong><a href="#n1990" name="n1990">1990</a></strong>
<a href="#n1991" name="n1991">1991</a>
<a href="#n1992" name="n1992">1992</a>
<a href="#n1993" name="n1993">1993</a>
<a href="#n1994" name="n1994">1994</a>
<a href="#n1995" name="n1995">1995</a>
<a href="#n1996" name="n1996">1996</a>
<a href="#n1997" name="n1997">1997</a>
<a href="#n1998" name="n1998">1998</a>
<a href="#n1999" name="n1999">1999</a>
<strong><a href="#n2000" name="n2000">2000</a></strong>
<a href="#n2001" name="n2001">2001</a>
<a href="#n2002" name="n2002">2002</a>
<a href="#n2003" name="n2003">2003</a>
<a href="#n2004" name="n2004">2004</a>
<a href="#n2005" name="n2005">2005</a>
<a href="#n2006" name="n2006">2006</a>
<a href="#n2007" name="n2007">2007</a>
<a href="#n2008" name="n2008">2008</a>
<a href="#n2009" name="n2009">2009</a>
<strong><a href="#n2010" name="n2010">2010</a></strong>
<a href="#n2011" name="n2011">2011</a>
<a href="#n2012" name="n2012">2012</a>
<a href="#n2013" name="n2013">2013</a>
<a href="#n2014" name="n2014">2014</a>
<a href="#n2015" name="n2015">2015</a>
<a href="#n2016" name="n2016">2016</a>
<a href="#n2017" name="n2017">2017</a>
<a href="#n2018" name="n2018">2018</a>
<a href="#n2019" name="n2019">2019</a>
<strong><a href="#n2020" name="n2020">2020</a></strong>
<a href="#n2021" name="n2021">2021</a>
<a href="#n2022" name="n2022">2022</a>
<a href="#n2023" name="n2023">2023</a>
<a href="#n2024" name="n2024">2024</a>
<a href="#n2025" name="n2025">2025</a>
<a href="#n2026" name="n2026">2026</a>
<a href="#n2027" name="n2027">2027</a>
<a href="#n2028" name="n2028">2028</a>
<a href="#n2029" name="n2029">2029</a>
<strong><a href="#n2030" name="n2030">2030</a></strong>
<a href="#n2031" name="n2031">2031</a>
<a href="#n2032" name="n2032">2032</a>
<a href="#n2033" name="n2033">2033</a>
<a href="#n2034" name="n2034">2034</a>
<a href="#n2035" name="n2035">2035</a>
<a href="#n2036" name="n2036">2036</a>
<a href="#n2037" name="n2037">2037</a>
<a href="#n2038" name="n2038">2038</a>
<a href="#n2039" name="n2039">2039</a>
<strong><a href="#n2040" name="n2040">2040</a></strong>
<a href="#n2041" name="n2041">2041</a>
</pre></td>
  <td class="code"><pre><span class="comment">/* DreemGL is a collaboration between Teeming Society &amp; Samsung Electronics, sponsored by Samsung and others.
   Copyright 2015-2016 Teeming Society. Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); You may not use this file except in compliance with the License.
   You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing,
   software distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and limitations under the License.*/</span>

<span class="string"><span class="delimiter">&quot;</span><span class="content">use strict</span><span class="delimiter">&quot;</span></span>

define.<span class="reserved">class</span>(<span class="string"><span class="delimiter">'</span><span class="content">$system/base/node</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(require){
<span class="comment">// Base UI view object</span>


        <span class="keyword">var</span> FlexLayout = require(<span class="string"><span class="delimiter">'</span><span class="content">$system/lib/layout</span><span class="delimiter">'</span></span>)
        <span class="keyword">var</span> Render = require(<span class="string"><span class="delimiter">'</span><span class="content">$system/base/render</span><span class="delimiter">'</span></span>)
        <span class="keyword">var</span> Shader = <span class="local-variable">this</span>.Shader = require(<span class="string"><span class="delimiter">'</span><span class="content">$system/platform/$platform/shader$platform</span><span class="delimiter">'</span></span>)
        <span class="keyword">var</span> view = <span class="local-variable">this</span>.constructor

        <span class="local-variable">this</span>.attributes = {
                <span class="comment">// wether to draw it</span>
                <span class="key">visible</span>: <span class="predefined-constant">true</span>,

                <span class="key">drawtarget</span>: Config({<span class="key">type</span>:Enum(<span class="string"><span class="delimiter">'</span><span class="content">both</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">pick</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">color</span><span class="delimiter">'</span></span>), <span class="key">value</span>:<span class="string"><span class="delimiter">'</span><span class="content">both</span><span class="delimiter">'</span></span>}),

                <span class="comment">// pos(ition) of the view, relative to parent. For 2D only the first 2 components are used, for 3D all three.</span>
                <span class="key">pos</span>: Config({<span class="key">type</span>:vec3, <span class="key">value</span>:vec3(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>),<span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">xyz</span><span class="delimiter">&quot;</span></span>}),

                <span class="comment">// alias for the x component of pos</span>
                <span class="key">x</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">pos</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// alias for the y component of pos</span>
                <span class="key">y</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">pos</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// alias for the z component of pos</span>
                <span class="key">z</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">pos</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),

                <span class="comment">// alias for the x component of pos</span>
                <span class="key">left</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">pos</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// alias for the y component of pos</span>
                <span class="key">top</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">pos</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// alias for the z component of pos</span>
                <span class="key">front</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">pos</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),

                <span class="comment">// the bottom/right/rear corner, used by layout</span>
                <span class="key">corner</span>: Config({<span class="key">type</span>:vec3, <span class="key">value</span>:vec3(<span class="predefined-constant">NaN</span>)}),
                <span class="comment">// alias for the x component of corner</span>
                <span class="key">right</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">corner</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// alias for  y component of corner</span>
                <span class="key">bottom</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">corner</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// alias for z component of corner</span>
                <span class="key">rear</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">corner</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),

                <span class="comment">// the background color of a view, referenced by various shaders</span>
                <span class="key">bgcolor</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>:vec4, <span class="key">value</span>: vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>}),
                <span class="comment">// the background image of a view. Accepts a string-url or can be assigned a require('./mypic.png')</span>
                <span class="key">bgimage</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>,<span class="key">type</span>:Object, <span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">texture</span><span class="delimiter">&quot;</span></span>}),
                <span class="comment">// the opacity of the image</span>
                <span class="key">opacity</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>, <span class="key">value</span>: <span class="float">1.0</span>, <span class="key">type</span>:<span class="reserved">float</span>}),
                <span class="comment">// Per channel color filter, each color is a value in the range 0.0 ~ 1.0 and is multiplied by the color of the background image</span>
                <span class="key">colorfilter</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>:vec4, <span class="key">value</span>: vec4(<span class="integer">1</span>,<span class="integer">1</span>,<span class="integer">1</span>,<span class="integer">1</span>), <span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>}),

                <span class="comment">// Image mode alters how/where the background image is scaled, streched, fit and drawn within the view's bounds.</span>
                <span class="key">bgimagemode</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>:Enum(<span class="string"><span class="delimiter">&quot;</span><span class="content">resize</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">custom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">stretch</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">aspect-fit</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">aspect-fill</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">top-left</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">top-right</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-left</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-right</span><span class="delimiter">&quot;</span></span>), <span class="key">value</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">stretch</span><span class="delimiter">&quot;</span></span>}),
                <span class="key">bgimageaspect</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>, <span class="key">value</span>:vec2(<span class="integer">1</span>,<span class="integer">1</span>)}),

                <span class="comment">// Offets the image within the view.  This value is in texture coordinates.</span>
                <span class="key">bgimageoffset</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>, <span class="key">value</span>:vec2(<span class="integer">0</span>,<span class="integer">0</span>)}),

                <span class="comment">// When using `aspect-fit`, or `apsect-fill` this property will automatically adjust the image's location within the view.</span>
                <span class="key">bgimagealign</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>:Enum(<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">start</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">end</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">top-left</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">top-right</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-left</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-right</span><span class="delimiter">&quot;</span></span>), <span class="key">value</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>}),

                <span class="comment">// the clear color of the view when it is in '2D' or '3D' viewport mode</span>
                <span class="key">clearcolor</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>,<span class="key">type</span>:vec4, <span class="key">value</span>: <span class="predefined-constant">NaN</span>, <span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>}),

                <span class="comment">// the scroll position of the view matrix, allows to scroll/move items in a viewport. Only works on a viewport:'2D'</span>
                <span class="comment">// this property is manipulated by the overflow:'SCROLL' scrollbars</span>
                <span class="key">scroll</span>: Config({<span class="key">type</span>:vec2, <span class="key">value</span>:vec2(<span class="integer">0</span>, <span class="integer">0</span>), <span class="key">persist</span>: <span class="predefined-constant">true</span>}),
                <span class="comment">// the zoom factor of the view matrix, allows zooming of items in a viewport. Only works on viewport:'2D'</span>
                <span class="key">zoom</span>: Config({<span class="key">type</span>:<span class="reserved">float</span>, <span class="key">value</span>:<span class="integer">1</span>}),
                <span class="comment">// overflow control, shows scrollbars when the content is larger than the viewport. If any value is set, it defaults to viewport:'2D'</span>
                <span class="comment">// works the same way as the CSS property</span>
                <span class="key">overflow</span>: Config({<span class="key">type</span>: Enum(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">hidden</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">scroll</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">auto</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">hscroll</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">vscroll</span><span class="delimiter">'</span></span>), <span class="key">value</span>:<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>}),

                <span class="comment">// size, this holds the width/height/depth of the view. When set to NaN it means the layout engine calculates the size</span>
                <span class="key">size</span>: Config({<span class="key">type</span>:vec3, <span class="key">value</span>:vec3(<span class="predefined-constant">NaN</span>), <span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">xyz</span><span class="delimiter">&quot;</span></span>}),

                <span class="comment">// internal, alias for the x component of size</span>
                <span class="key">w</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">size</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// internal, alias for the y component of size</span>
                <span class="key">h</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">size</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// internal, alias for the z component of size</span>
                <span class="key">d</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">size</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),

                <span class="comment">// alias for the x component of size</span>
                <span class="key">width</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">size</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// alias for the y component of size</span>
                <span class="key">height</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">size</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// alias for the z component of size</span>
                <span class="key">depth</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">size</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),

                <span class="key">percentsize</span>: Config({<span class="key">type</span>:vec3, <span class="key">value</span>:vec3(<span class="predefined-constant">NaN</span>)}),

                <span class="comment">// alias for the x component of percentsize</span>
                <span class="key">percentwidth</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">percentsize</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// alias for the y component of percentsize</span>
                <span class="key">percentheight</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">percentsize</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// alias for the z component of percentsize</span>
                <span class="key">percentdepth</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">percentsize</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),

                <span class="key">percentpos</span>: Config({<span class="key">type</span>:vec3, <span class="key">value</span>:vec3(<span class="predefined-constant">NaN</span>)}),

                <span class="comment">// internal, percentage widths/heights</span>
                <span class="key">percentx</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">percentpos</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// internal, percentage widths/heights</span>
                <span class="key">percenty</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">percentpos</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// internal, percentage widths/heights</span>
                <span class="key">percentz</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">percentpos</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),

                <span class="comment">// the pixelratio of a viewport. Allows scaling the texture buffer to arbitrary resolutions. Defaults to the system (low/high DPI)</span>
                <span class="key">pixelratio</span>: Config({<span class="key">type</span>: <span class="reserved">float</span>, <span class="key">value</span>:<span class="predefined-constant">NaN</span>}),

                <span class="comment">// the minimum size for the flexbox layout engine</span>
                <span class="key">minsize</span>: Config({<span class="key">type</span>: vec3, <span class="key">value</span>:vec3(<span class="predefined-constant">NaN</span>), <span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">xyz</span><span class="delimiter">&quot;</span></span>}),
                <span class="comment">// the maximum size for the flexbox layout engine</span>
                <span class="key">maxsize</span>: Config({<span class="key">type</span>: vec3, <span class="key">value</span>:vec3(<span class="predefined-constant">NaN</span>), <span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">xyz</span><span class="delimiter">&quot;</span></span>}),

                <span class="comment">// alias for the x component of minsize</span>
                <span class="key">minwidth</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">minsize</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// alias for the y component of minsize</span>
                <span class="key">minheight</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">minsize</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// alias for the z component of minsize</span>
                <span class="key">mindepth</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">minsize</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),

                <span class="comment">// alias for the x component of maxsize</span>
                <span class="key">maxwidth</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">maxsize</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// alias for the y component of maxsize</span>
                <span class="key">maxheight</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">maxsize</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// alias for the z component of maxsize</span>
                <span class="key">maxdepth</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">maxsize</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),

                <span class="comment">// the margin on 4 sides of the box (left, top, right, bottom). Can be assigned a single value to set them all at once</span>
                <span class="key">margin</span>: Config({<span class="key">type</span>: vec4, <span class="key">value</span>: vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="key">meta</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ltrb</span><span class="delimiter">&quot;</span></span>}),
                <span class="comment">// alias for the first component of margin</span>
                <span class="key">marginleft</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">margin</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// alias for the second component of margin</span>
                <span class="key">margintop</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">margin</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// alias for the third component of margin</span>
                <span class="key">marginright</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">margin</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),
                <span class="comment">// alias for the fourth component of margin</span>
                <span class="key">marginbottom</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">margin</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">3</span>}),

                <span class="comment">// the padding on 4 sides of the box (left, top, right, bottom) Can be assigned a single value to set them all at once</span>
                <span class="key">padding</span>: Config({<span class="key">type</span>: vec4, <span class="key">value</span>: vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="key">meta</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">ltrb</span><span class="delimiter">&quot;</span></span>}),
                <span class="comment">// alias for the first component of padding</span>
                <span class="key">paddingleft</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">padding</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// alias for the second component of padding</span>
                <span class="key">paddingtop</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">padding</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// alias for the third component of padding</span>
                <span class="key">paddingright</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">padding</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),
                <span class="comment">// alias for the fourth component of padding</span>
                <span class="key">paddingbottom</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">padding</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">3</span>}),

                <span class="key">translate</span>: Config({<span class="key">type</span>: vec3, <span class="key">value</span>:vec3(<span class="integer">0</span>.)}),
                <span class="comment">// Scale of an item, only useful for items belof a 3D viewport</span>
                <span class="key">scale</span>: Config({<span class="key">type</span>: vec3, <span class="key">value</span>: vec3(<span class="integer">1</span>), <span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">xyz</span><span class="delimiter">&quot;</span></span>}),
                <span class="comment">// The anchor point around which items scale and rotate, depending on anchor mode its either a factor of size or and absolute value</span>
                <span class="key">anchor</span>: Config({<span class="key">type</span>: vec3, <span class="key">value</span>: vec3(<span class="integer">0</span>.)}),
                <span class="comment">// the mode with which the anchor is computed. Factor uses the size of an item to find the point, defaulting to center</span>
                <span class="key">anchormode</span>: Config({<span class="key">type</span>:Enum(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">factor</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">absolute</span><span class="delimiter">'</span></span>), <span class="key">value</span>:<span class="string"><span class="delimiter">'</span><span class="content">factor</span><span class="delimiter">'</span></span>}),
                <span class="comment">// rotate the item around x, y or z in radians. If you want degrees type it like this: 90*DEG</span>
                <span class="key">rotate</span>: Config({<span class="key">type</span>: vec3, <span class="key">value</span>: vec3(<span class="integer">0</span>), <span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">xyz</span><span class="delimiter">&quot;</span></span>}),

                <span class="comment">// the color of the border of an item.</span>
                <span class="key">bordercolor</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>,<span class="key">type</span>: vec4, <span class="key">value</span>: vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>}),

                <span class="comment">// the radius of the corners of an item, individually settable left, top, right, bottom. Setting this value will switch to rounded corner shaders</span>
                <span class="key">borderradius</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>,<span class="key">type</span>: vec4, <span class="key">value</span>: vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>)}),

                <span class="comment">// the width of the border. Setting this value will automatically enable the border shaders</span>
                <span class="key">borderwidth</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">style</span><span class="delimiter">&quot;</span></span>,<span class="key">type</span>: vec4, <span class="key">value</span>: vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>)}),

                <span class="comment">// alias for the first component of borderwidth</span>
                <span class="key">borderleftwidth</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">borderwidth</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">0</span>}),
                <span class="comment">// alias for the second component of borderwith</span>
                <span class="key">bordertopwidth</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">borderwidth</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">1</span>}),
                <span class="comment">// alias for the third component of borderwith</span>
                <span class="key">borderrightwidth</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">borderwidth</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">2</span>}),
                <span class="comment">// alias for the fourth component of borderwith</span>
                <span class="key">borderbottomwidth</span>: Config({<span class="key">alias</span>:<span class="string"><span class="delimiter">'</span><span class="content">borderwidth</span><span class="delimiter">'</span></span>, <span class="key">index</span>:<span class="integer">3</span>}),

                <span class="comment">// turn on flex sizing. Flex is a factor that distributes either the widths or the heights of nodes by this factor</span>
                <span class="comment">// flexbox layout is a web standard and has many great tutorials online to learn how it works</span>
                <span class="key">flex</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">layout</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>: <span class="reserved">float</span>, <span class="key">value</span>: <span class="predefined-constant">NaN</span>}),

                <span class="comment">// wraps nodes around when the flexspace is full</span>
                <span class="key">flexwrap</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">layout</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>: Enum(<span class="string"><span class="delimiter">'</span><span class="content">wrap</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">nowrap</span><span class="delimiter">'</span></span>), <span class="key">value</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">wrap</span><span class="delimiter">&quot;</span></span>}),
                <span class="comment">// which direction the flex layout is working,</span>
                <span class="key">flexdirection</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">layout</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>: Enum(<span class="string"><span class="delimiter">'</span><span class="content">row</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">column</span><span class="delimiter">'</span></span>), <span class="key">value</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">row</span><span class="delimiter">&quot;</span></span>}),
                <span class="comment">// pushes items eitehr to the start, center or end</span>
                <span class="key">justifycontent</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">layout</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>: Enum(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">flex-start</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">center</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">flex-end</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">space-between</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">space-around</span><span class="delimiter">'</span></span>), <span class="key">value</span>: <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>}),
                <span class="comment">// align items to either start, center, end or stretch them</span>
                <span class="key">alignitems</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">layout</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>: Enum(<span class="string"><span class="delimiter">'</span><span class="content">flex-start</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">center</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">flex-end</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">stretch</span><span class="delimiter">'</span></span>), <span class="key">value</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">stretch</span><span class="delimiter">&quot;</span></span>}),
                <span class="comment">// overrides the parents alignitems with our own preference</span>
                <span class="key">alignself</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">layout</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>: Enum(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">flex-start</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">center</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">flex-end</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">stretch</span><span class="delimiter">'</span></span>), <span class="key">value</span>:<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>}),
                <span class="comment">// item positioning, if absolute it steps 'outside' the normal flex layout</span>
                <span class="key">position</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">layout</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>:  Enum(<span class="string"><span class="delimiter">'</span><span class="content">relative</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">absolute</span><span class="delimiter">'</span></span>), <span class="key">value</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">relative</span><span class="delimiter">&quot;</span></span> }),

                <span class="comment">// the layout object, contains width/height/top/left after computing. Its a read-only property and should be used in shaders only.</span>
                <span class="comment">// Can be listened to to observe layout changes</span>
                <span class="key">layout</span>: Config({ <span class="key">type</span>:Object, <span class="key">value</span>:{}, <span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>}),

                <span class="comment">// When set to 2D or 3D the render engine will create a separate texture pass for this view and all its children</span>
                <span class="comment">// using a 2D viewport is a great way to optimize render performance as when nothing changes, none of the childstructures</span>
                <span class="comment">// need to be processed and a single texture can just be drawn by the parent</span>
                <span class="comment">// the viewportblend shader can be used to render this texture it into its parent</span>
                <span class="key">viewport</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">layout</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>:Enum(<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">2d</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">3d</span><span class="delimiter">'</span></span>), <span class="key">value</span>:<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>}),

                <span class="comment">// the field of view of a 3D viewport. Only useful on a viewport:'3D'</span>
                <span class="key">fov</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">3d</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>:<span class="reserved">float</span>, <span class="key">value</span>: <span class="integer">45</span>}),
                <span class="comment">// the nearplane of a 3D viewport, controls at which Z value near clipping start. Only useful on a viewport:'3D'</span>
                <span class="key">nearplane</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">3d</span><span class="delimiter">&quot;</span></span>,<span class="key">type</span>:<span class="reserved">float</span>, <span class="key">value</span>: <span class="float">0.001</span>}),
                <span class="comment">// the farplane of a 3D viewport, controls at which Z value far clipping start. Only useful on a viewport:'3D'</span>
                <span class="key">farplane</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">3d</span><span class="delimiter">&quot;</span></span>,<span class="key">type</span>:<span class="reserved">float</span>, <span class="key">value</span>: <span class="integer">1000</span>}),

                <span class="comment">// the position of the camera in 3D space. Only useful on a viewport:'3D'</span>
                <span class="key">camera</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">3d</span><span class="delimiter">&quot;</span></span>,<span class="key">type</span>: vec3, <span class="key">value</span>: vec3(-<span class="integer">2</span>,<span class="integer">2</span>,-<span class="integer">2</span>)}),
                <span class="comment">// the point the camera is looking at in 3D space. Only useful on a viewport:'3D'</span>
                <span class="key">lookat</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">3d</span><span class="delimiter">&quot;</span></span>,<span class="key">type</span>: vec3, <span class="key">value</span>: vec3(<span class="integer">0</span>)}),
                <span class="comment">// the up vector of the camera (which way is up for the camera). Only useful on a viewport:'3D'</span>
                <span class="key">up</span>: Config({<span class="key">group</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">3d</span><span class="delimiter">&quot;</span></span>,<span class="key">type</span>: vec3, <span class="key">value</span>: vec3(<span class="integer">0</span>,-<span class="integer">1</span>,<span class="integer">0</span>)}),

                <span class="comment">// internal, the current time which can be used in shaders to create continous animations</span>
                <span class="key">time</span>:Config({<span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>, <span class="key">value</span>:<span class="integer">0</span>}),

                <span class="comment">// fires when pointer is pressed down.</span>
                <span class="key">pointerstart</span>:Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when pointer is pressed and moved (dragged).</span>
                <span class="key">pointermove</span>:Config({<span class="key">type</span>:Event}),
                <span class="key">pointermultimove</span>:Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when pointer is released.</span>
                <span class="key">pointerend</span>:Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when pointer is pressed and released quickly.</span>
                <span class="key">pointertap</span>:Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when pointer moved without being pressed.</span>
                <span class="key">pointerhover</span>:Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when pointer enters an element.</span>
                <span class="key">pointerover</span>:Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when pointer leaves an element.</span>
                <span class="key">pointerout</span>:Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when mouse wheel is used.</span>
                <span class="key">pointerwheel</span>:Config({<span class="key">type</span>:Event}),

                <span class="comment">// fires when a drag drop item enters</span>
                <span class="key">dragover</span>:Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when a drag drop item moves</span>
                <span class="key">dragmove</span>:Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when a drag drop item leaves</span>
                <span class="key">dragout</span>:Config({<span class="key">type</span>:Event}),

                <span class="comment">// fires when a key goes to up. The event argument is {repeat:int, code:int, name:String}</span>
                <span class="key">keyup</span>: Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when a key goes to down. The event argument is {repeat:int, code:int, name:String}</span>
                <span class="key">keydown</span>: Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when a key gets pressed. The event argument is {repeat:int, value:string, char:int}</span>
                <span class="key">keypress</span>: Config({<span class="key">type</span>:Event}),
                <span class="comment">// fires when someone pastes data into the view. The event argument is {text:string}</span>
                <span class="key">keypaste</span>: Config({<span class="key">type</span>:Event}),

                <span class="comment">// fires when this view loses focus</span>
                <span class="key">blur</span>: Config({<span class="key">type</span>:Event}),

                <span class="comment">// drop shadow size</span>
                <span class="key">dropshadowradius</span>:Config({<span class="key">type</span>:<span class="reserved">float</span>, <span class="key">value</span>:<span class="integer">20</span>}),
                <span class="comment">// drop shadow movement</span>
                <span class="key">dropshadowoffset</span>:Config({<span class="key">type</span>:vec2, <span class="key">value</span>:vec2(<span class="integer">0</span>,<span class="integer">0</span>)}),
                <span class="comment">// drop shadow hardness</span>
                <span class="key">dropshadowhardness</span>:Config({<span class="key">type</span>:<span class="reserved">float</span>, <span class="key">value</span>:<span class="float">0.5</span>, <span class="key">minvalue</span>: <span class="integer">0</span>, <span class="key">maxvalue</span>:<span class="integer">1</span>}),
                <span class="comment">// drop shadow opacity</span>
                <span class="key">dropshadowopacity</span>:Config({<span class="key">type</span>:<span class="reserved">float</span>, <span class="key">value</span>:<span class="integer">0</span>, <span class="key">minvalue</span>: <span class="integer">0</span>, <span class="key">maxvalue</span>:<span class="integer">1</span>}),
                <span class="comment">// drop shadow color</span>
                <span class="key">dropshadowcolor</span>:Config({<span class="key">type</span>:vec4,<span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>, <span class="key">value</span>:vec4(<span class="string"><span class="delimiter">&quot;</span><span class="content">black</span><span class="delimiter">&quot;</span></span>)}),

                <span class="comment">// whether this view has focus</span>
                <span class="key">focus</span>: Config({<span class="key">meta</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">hidden</span><span class="delimiter">&quot;</span></span>, <span class="key">value</span>:<span class="predefined-constant">false</span>, <span class="key">persist</span>:<span class="predefined-constant">true</span>}),
                <span class="comment">// tabstop, sorted by number</span>
                <span class="key">tabstop</span>: <span class="predefined-constant">NaN</span>,

                <span class="comment">// the type of pointer cursor to use for this view</span>
                <span class="key">cursor</span>: Config({<span class="key">type</span>:Enum(
                        <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">arrow</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">none</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">wait</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">text</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">pointer</span><span class="delimiter">'</span></span>,
                        <span class="string"><span class="delimiter">'</span><span class="content">zoom-in</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">zoom-out</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">grab</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">grabbing</span><span class="delimiter">'</span></span>,
                        <span class="string"><span class="delimiter">'</span><span class="content">ns-resize</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">ew-resize</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">nwse-resize</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">nesw-resize</span><span class="delimiter">'</span></span>,
                        <span class="string"><span class="delimiter">'</span><span class="content">w-resize</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">e-resize</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">n-resize</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">s-resize</span><span class="delimiter">'</span></span>,
                        <span class="string"><span class="delimiter">'</span><span class="content">nw-resize</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">ne-resize</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">sw-resize</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">se-resize</span><span class="delimiter">'</span></span>,
                        <span class="string"><span class="delimiter">'</span><span class="content">help</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">crosshair</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">move</span><span class="delimiter">'</span></span>,
                        <span class="string"><span class="delimiter">'</span><span class="content">col-resize</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">row-resize</span><span class="delimiter">'</span></span>,
                        <span class="string"><span class="delimiter">'</span><span class="content">vertical-text</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">context-menu</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">no-drop</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">not-allowed</span><span class="delimiter">'</span></span>,
                        <span class="string"><span class="delimiter">'</span><span class="content">alias</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">cell</span><span class="delimiter">'</span></span>,<span class="string"><span class="delimiter">'</span><span class="content">copy</span><span class="delimiter">'</span></span>
                ), <span class="key">value</span>:<span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>}),

                <span class="comment">// The number of render passes for this view. Note that corresponding</span>
                <span class="comment">// inner classes will need to be created for multi pass rendering to work,</span>
                <span class="comment">// see /classes/ui/blurtest.js for an example.</span>
                <span class="key">passes</span>: Config({<span class="key">type</span>:<span class="reserved">int</span>, <span class="key">value</span>:<span class="integer">0</span>, <span class="key">minvalue</span>: <span class="integer">0</span>, <span class="key">maxvalue</span>:<span class="integer">10</span>}),
        }

        <span class="local-variable">this</span>.name = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
        <span class="local-variable">this</span>.<span class="reserved">class</span> = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>

        <span class="local-variable">this</span>.onvisible = <span class="local-variable">this</span>.oncamera = <span class="local-variable">this</span>.onlookat = <span class="local-variable">this</span>.<span class="function">onup</span> = <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.redraw()
        }

        <span class="comment">// the number of pick ID's to reserve for this view.</span>
        <span class="local-variable">this</span>.pickrange = <span class="integer">1</span>

        <span class="local-variable">this</span>.boundscheck = <span class="predefined-constant">true</span>
        <span class="comment">// the local matrix</span>
        <span class="local-variable">this</span>.modelmatrix = mat4.identity()
        <span class="comment">// the concatenation of all parent model matrices</span>
        <span class="local-variable">this</span>.totalmatrix = mat4.identity()
        <span class="comment">// the last view matrix used</span>
        <span class="local-variable">this</span>.viewmatrix = mat4.identity()
        <span class="comment">// the viewport matrix used to render the viewportblend</span>
        <span class="local-variable">this</span>.viewportmatrix = mat4.identity()
        <span class="comment">// the normal matrix contains the transform without translate (for normals)</span>
        <span class="local-variable">this</span>.normalmatrix = mat4.identity()
        <span class="comment">// the remap matrix used to remap pointer vec2 to local space</span>
        <span class="local-variable">this</span>.remapmatrix = mat4()

        <span class="comment">// forward references for shaders</span>
        <span class="local-variable">this</span>.layout = {<span class="key">width</span>:<span class="integer">0</span>, <span class="key">height</span>:<span class="integer">0</span>, <span class="key">left</span>:-<span class="integer">1</span>, <span class="key">top</span>:-<span class="integer">1</span>, <span class="key">right</span>:<span class="integer">0</span>, <span class="key">bottom</span>:<span class="integer">0</span>}
        <span class="local-variable">this</span>.screen = {<span class="key">device</span>:{<span class="key">size</span>:vec2(), <span class="key">frame</span>:{<span class="key">size</span>:vec2()}}}

        <span class="local-variable">this</span>.noise = require(<span class="string"><span class="delimiter">'</span><span class="content">$system/shaderlib/noiselib</span><span class="delimiter">'</span></span>)
        <span class="local-variable">this</span>.pal = require(<span class="string"><span class="delimiter">'</span><span class="content">$system/shaderlib/palettelib</span><span class="delimiter">'</span></span>)
        <span class="local-variable">this</span>.shape = require(<span class="string"><span class="delimiter">'</span><span class="content">$system/shaderlib/shapelib</span><span class="delimiter">'</span></span>)
        <span class="local-variable">this</span>.math = require(<span class="string"><span class="delimiter">'</span><span class="content">$system/shaderlib/mathlib</span><span class="delimiter">'</span></span>)
        <span class="local-variable">this</span>.demo = require(<span class="string"><span class="delimiter">'</span><span class="content">$system/shaderlib/demolib</span><span class="delimiter">'</span></span>)
        <span class="local-variable">this</span>.material = require(<span class="string"><span class="delimiter">'</span><span class="content">$system/shaderlib/materiallib</span><span class="delimiter">'</span></span>)
        <span class="local-variable">this</span>.colorlib = require(<span class="string"><span class="delimiter">'</span><span class="content">$system/shaderlib/colorlib</span><span class="delimiter">'</span></span>)

        <span class="comment">// turn off rpc proxy generation for this prototype level</span>
        <span class="local-variable">this</span>.rpcproxy = <span class="predefined-constant">false</span>

        <span class="local-variable">this</span>.<span class="function">ondropshadowradius</span> = <span class="keyword">function</span>(){
                <span class="keyword">if</span> (<span class="local-variable">this</span>.dropshadowopacity &gt; <span class="integer">0</span>){
                        <span class="local-variable">this</span>.shadowrect = <span class="predefined-constant">true</span>
                } <span class="keyword">else</span> {
                        <span class="local-variable">this</span>.shadowrect = <span class="predefined-constant">false</span>
                }
        }

        <span class="comment">// internal, listen to switch the shaders when borderradius changes</span>
        <span class="local-variable">this</span>.<span class="function">onborderradius</span> = <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.setBorderShaders()
        }

        <span class="local-variable">this</span>.<span class="function">onborderwidth</span> = <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.setBorderShaders()
        }

        <span class="local-variable">this</span>.<span class="function">onbgcolor</span> = <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.setBorderShaders()
        }

        <span class="local-variable">this</span>.<span class="function">setBorderShaders</span> = <span class="keyword">function</span>(){
                <span class="keyword">var</span> radius = <span class="local-variable">this</span>._borderradius
                <span class="comment">//var value = event.value</span>
                <span class="keyword">var</span> border_on = <span class="predefined-constant">true</span>
                <span class="keyword">var</span> width = <span class="local-variable">this</span>._borderwidth
                <span class="keyword">if</span> (width[<span class="integer">0</span>] === <span class="integer">0</span> &amp;&amp; width[<span class="integer">1</span>] === <span class="integer">0</span> &amp;&amp; width[<span class="integer">2</span>] === <span class="integer">0</span> &amp;&amp; width[<span class="integer">3</span>] === <span class="integer">0</span>){
                        border_on = <span class="predefined-constant">false</span>
                } <span class="keyword">else</span> {
                        border_on = <span class="predefined-constant">true</span>
                }

                <span class="keyword">var</span> bg_on = isNaN(<span class="local-variable">this</span>._bgcolor[<span class="integer">0</span>])? <span class="predefined-constant">false</span>: <span class="predefined-constant">true</span>

                <span class="keyword">if</span> (<span class="local-variable">this</span>._viewport === <span class="string"><span class="delimiter">'</span><span class="content">3d</span><span class="delimiter">'</span></span>) border_on = <span class="predefined-constant">false</span>, bg_on = <span class="predefined-constant">false</span>

                <span class="keyword">if</span> (radius[<span class="integer">0</span>] !== <span class="integer">0</span> || radius[<span class="integer">1</span>] !== <span class="integer">0</span> || radius[<span class="integer">2</span>] !== <span class="integer">0</span> || radius[<span class="integer">3</span>] !== <span class="integer">0</span>){
                        <span class="comment">// this switches the bg shader to the rounded one</span>
                        <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimage){
                                <span class="local-variable">this</span>.roundedimage = <span class="predefined-constant">true</span>
                                <span class="local-variable">this</span>.roundedrect = <span class="predefined-constant">false</span>
                        } <span class="keyword">else</span> {
                                <span class="local-variable">this</span>.roundedrect = bg_on
                                <span class="local-variable">this</span>.roundedimage = <span class="predefined-constant">false</span>
                        }
                        <span class="local-variable">this</span>.roundedborder = border_on
                        <span class="local-variable">this</span>.hardimage = <span class="predefined-constant">false</span>
                        <span class="local-variable">this</span>.hardrect = <span class="predefined-constant">false</span>
                        <span class="local-variable">this</span>.hardborder = <span class="predefined-constant">false</span>
                } <span class="keyword">else</span> {
                        <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimage){
                                <span class="local-variable">this</span>.hardimage = <span class="predefined-constant">true</span>
                                <span class="local-variable">this</span>.hardrect = <span class="predefined-constant">false</span>
                        } <span class="keyword">else</span> {
                                <span class="local-variable">this</span>.hardrect = bg_on
                                <span class="local-variable">this</span>.hardimage = <span class="predefined-constant">false</span>
                        }

                        <span class="local-variable">this</span>.hardborder = border_on
                        <span class="local-variable">this</span>.roundedrect = <span class="predefined-constant">false</span>
                        <span class="local-variable">this</span>.roundedborder = <span class="predefined-constant">false</span>
                        <span class="local-variable">this</span>.roundedimage = <span class="predefined-constant">false</span>
                }
        }

        <span class="comment">// internal, listen to the viewport to turn off our background and border shaders when 3D</span>
        <span class="local-variable">this</span>.<span class="function">onviewport</span> = <span class="keyword">function</span>(event){
                <span class="local-variable">this</span>.setBorderShaders()
        }

        <span class="comment">// internal, automatically turn a viewport:'2D' on when we  have an overflow (scrollbars) set</span>
        <span class="local-variable">this</span>.<span class="function">onoverflow</span> = <span class="keyword">function</span>(){
                <span class="keyword">if</span> (<span class="local-variable">this</span>._overflow){
                        <span class="keyword">if</span> (!<span class="local-variable">this</span>._viewport) <span class="local-variable">this</span>._viewport = <span class="string"><span class="delimiter">'</span><span class="content">2d</span><span class="delimiter">'</span></span>
                }
        }

        <span class="comment">// internal, setting focus to true</span>
        <span class="local-variable">this</span>.<span class="function">onfocus</span> = <span class="keyword">function</span>(event){
                <span class="keyword">if</span> (!event.mark){ <span class="comment">// someone set it to true that wasnt us</span>
                        <span class="local-variable">this</span>.screen.setFocus(<span class="local-variable">this</span>)
                }
        }

        <span class="comment">// internal, put a tablistener</span>
        <span class="local-variable">this</span>.<span class="function">ontabstop</span> = <span class="keyword">function</span>(event){
                <span class="keyword">if</span> (isNaN(event.old) &amp;&amp; !isNaN(event.value)){
                        <span class="local-variable">this</span>.addListener(<span class="string"><span class="delimiter">'</span><span class="content">keydown</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(value){
                                <span class="keyword">if</span> (value.name === <span class="string"><span class="delimiter">'</span><span class="content">tab</span><span class="delimiter">'</span></span>){
                                        <span class="keyword">if</span> (value.shift) {
                                                <span class="local-variable">this</span>.screen.focusPrev(<span class="local-variable">this</span>)
                                        } <span class="keyword">else</span> {
                                                <span class="local-variable">this</span>.screen.focusNext(<span class="local-variable">this</span>)
                                        }
                                }
                        })
                }
        }

        <span class="comment">// draw dirty is a bitmask of 2 bits, the guid-dirty and the color-dirty</span>
        <span class="local-variable">this</span>.draw_dirty = <span class="integer">3</span>
        <span class="comment">// layout dirty causes a relayout to occur (only on viewports)</span>
        <span class="local-variable">this</span>.layout_dirty = <span class="predefined-constant">true</span>
        <span class="comment">// update dirty causes a shader update to occur</span>
        <span class="local-variable">this</span>.update_dirty = <span class="predefined-constant">true</span>
        <span class="comment">// update matrix stack</span>
        <span class="local-variable">this</span>.matrix_dirty = <span class="predefined-constant">true</span>

        <span class="comment">// internal, initialization of a view</span>
        <span class="local-variable">this</span>.<span class="function">atViewInit</span> = <span class="keyword">function</span>(prev){

                <span class="local-variable">this</span>.anims = {}
                <span class="comment">//this.layout = {width:0, height:0, left:0, top:0, right:0, bottom:0}</span>
                <span class="local-variable">this</span>.shader_list = []

                <span class="local-variable">this</span>.initialized = <span class="predefined-constant">true</span>

                <span class="keyword">if</span> (prev){
                        <span class="local-variable">this</span>.modelmatrix = prev.modelmatrix
                        <span class="local-variable">this</span>.totalmatrix = prev.totalmatrix
                        <span class="local-variable">this</span>.viewportmatrix = prev.viewportmatrix
                        <span class="local-variable">this</span>.layout = prev.layout
                } <span class="keyword">else</span> {
                        <span class="local-variable">this</span>.modelmatrix = mat4()
                        <span class="keyword">if</span> (<span class="local-variable">this</span>._viewport) {
                                <span class="local-variable">this</span>.totalmatrix = mat4.identity()
                        } <span class="keyword">else</span> {
                                <span class="local-variable">this</span>.totalmatrix = mat4()
                        }
                        <span class="local-variable">this</span>.viewportmatrix = mat4()
                }

                <span class="comment">// create shaders</span>
                <span class="local-variable">this</span>.shaders = {}
                <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> <span class="local-variable">this</span>.shader_enable){
                        <span class="keyword">var</span> enable = <span class="local-variable">this</span>.shader_enable[key]
                        <span class="keyword">if</span> (!enable) <span class="keyword">continue</span>
                        <span class="keyword">var</span> shader = <span class="local-variable">this</span>[key]
                        <span class="keyword">if</span> (shader){
                                <span class="keyword">var</span> prevshader = prev &amp;&amp; prev.shaders &amp;&amp; prev.shaders[key]
                                <span class="keyword">var</span> shobj
                                <span class="comment">// ok so instead of comparing constructor, lets compare the computational result</span>
                                <span class="keyword">if</span> (prevshader &amp;&amp; (prevshader.constructor === shader || prevshader.isShaderEqual(shader.prototype, <span class="local-variable">this</span>, prev))){
                                        shobj = prevshader
                                        Object.defineProperty(shobj, <span class="string"><span class="delimiter">'</span><span class="content">constructor</span><span class="delimiter">'</span></span>,{<span class="key">value</span>:shader, <span class="key">configurable</span>:<span class="predefined-constant">true</span>})

                                        shobj.view = <span class="local-variable">this</span>
                                        shobj.outer = <span class="local-variable">this</span>

                                        <span class="comment">// ok now check if we need to dirty it</span>
                                        <span class="keyword">if</span> (shobj._view_listeners) <span class="keyword">for</span> (<span class="keyword">var</span> shkey <span class="keyword">in</span> shobj._view_listeners){
                                                <span class="local-variable">this</span>.addListener(shkey, shobj.reupdate.bind(shobj))
                                                <span class="keyword">var</span> value = <span class="local-variable">this</span>[shkey]
                                                <span class="keyword">if</span> (!(value &amp;&amp; value.struct &amp;&amp; value.struct.equals(value, prev[shkey]) || value === prev[shkey])){
                                                        shobj.reupdate(shkey)
                                                }
                                        }
                                        prevshader.reused = <span class="predefined-constant">true</span>
                                } <span class="keyword">else</span> {
                                        shobj = <span class="keyword">new</span> shader(<span class="local-variable">this</span>)
                                }
                                shobj.shadername = key
                                <span class="local-variable">this</span>.shaders[key] = shobj
                                <span class="local-variable">this</span>.shader_list.push(shobj)
                        }
                }

                <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimage){
                        <span class="local-variable">this</span>.onbgimage()
                }

                <span class="comment">// a _viewport is a top-level canvas object, or a scrolling view.</span>
                <span class="keyword">if</span> (<span class="local-variable">this</span>._viewport){
                        <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> <span class="local-variable">this</span>.shaders){
                                <span class="keyword">var</span> shader = <span class="local-variable">this</span>.shaders[key]
                                <span class="keyword">if</span> (shader.dont_scroll_as_viewport){
                                        <span class="local-variable">this</span>.shaders[key].noscroll = <span class="predefined-constant">true</span>
                                }
                        }
                        <span class="local-variable">this</span>.shaders.viewportblend = <span class="keyword">new</span> <span class="local-variable">this</span>.viewportblend(<span class="local-variable">this</span>)

                        <span class="keyword">if</span> (<span class="local-variable">this</span>.passes &gt; <span class="integer">0</span>) {
                                <span class="comment">// loop and create RenderPass instances</span>
                                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="integer">0</span>; i &lt; <span class="local-variable">this</span>.passes; i++) {
                                        <span class="comment">// based on this.passes with names pass0..9</span>
                                        <span class="keyword">var</span> key = <span class="string"><span class="delimiter">'</span><span class="content">pass</span><span class="delimiter">'</span></span> + i
                                        <span class="keyword">if</span> (key <span class="keyword">in</span> <span class="local-variable">this</span>) {
                                                <span class="local-variable">this</span>.shaders[key] = <span class="keyword">new</span> <span class="local-variable">this</span>[key](<span class="local-variable">this</span>)
                                        } <span class="keyword">else</span> {
                                                console.warn(<span class="string"><span class="delimiter">'</span><span class="content">you are missing an inner class named</span><span class="delimiter">'</span></span>, key, <span class="string"><span class="delimiter">'</span><span class="content">in</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>)
                                        }
                                }
                        }
                }
                <span class="local-variable">this</span>.sortShaders()
        }

        <span class="comment">// lets destroy some shaders/vertexbuffers</span>
        <span class="local-variable">this</span>.<span class="function">atViewDestroy</span> = <span class="keyword">function</span>(){
                <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> <span class="local-variable">this</span>.shaders){
                        <span class="keyword">var</span> shader = <span class="local-variable">this</span>.shaders[key]
                        <span class="keyword">if</span> (!shader.reused &amp;&amp; shader.hasOwnProperty(<span class="string"><span class="delimiter">'</span><span class="content">mesh</span><span class="delimiter">'</span></span>) &amp;&amp; !shader.mesh.sticky){
                                <span class="local-variable">this</span>.screen.device.gl.deleteBuffer(shader.mesh.glvb)
                                shader.mesh.glvb = <span class="predefined-constant">undefined</span>
                        }
                        shader.reused = <span class="predefined-constant">undefined</span>
                }
        }

        Object.defineProperty(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">'</span><span class="content">bg</span><span class="delimiter">'</span></span>, {
                <span class="function">get</span>:<span class="keyword">function</span>(){},
                <span class="function">set</span>:<span class="keyword">function</span>(){
                        console.error(<span class="string"><span class="delimiter">'</span><span class="content">bg property depricated, please use bgcolor:NaN to turn off background shader, and subclass via bgcolorfn or hardrect/roundedrect specifically</span><span class="delimiter">'</span></span>)
                }
        })

        <span class="local-variable">this</span>.<span class="function">onbgimage</span> = <span class="keyword">function</span>(){
                <span class="keyword">if</span> (<span class="local-variable">this</span>.initialized){
                        <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="local-variable">this</span>._bgimage === <span class="string"><span class="delimiter">'</span><span class="content">string</span><span class="delimiter">'</span></span>){
                                <span class="comment">// Path to image was specified</span>
                                <span class="keyword">if</span> (require.loaded(<span class="local-variable">this</span>._bgimage)){
                                        <span class="keyword">var</span> img = require(<span class="local-variable">this</span>._bgimage)
                                        <span class="local-variable">this</span>.setBgImage(img)
                                } <span class="keyword">else</span> {
                                        <span class="comment">// check if loaded already</span>
                                        requireDreem.async(<span class="local-variable">this</span>._bgimage, <span class="string"><span class="delimiter">'</span><span class="content">jpeg</span><span class="delimiter">'</span></span>).then(<span class="keyword">function</span>(result){
                                                <span class="local-variable">this</span>.setBgImage(result)
                                        }.bind(<span class="local-variable">this</span>))
                                }
                        } <span class="keyword">else</span> {
                                <span class="local-variable">this</span>.setBgImage(<span class="local-variable">this</span>._bgimage)
                        }
                } <span class="keyword">else</span> {
                        <span class="local-variable">this</span>.setBorderShaders()
                }
        }

        <span class="local-variable">this</span>.<span class="function">defaultKeyboardHandler</span> = <span class="keyword">function</span>(v, prefix){
                <span class="keyword">if</span> (!prefix) prefix = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>

                <span class="keyword">var</span> keyboard = <span class="local-variable">this</span>.screen.keyboard
                keyboard.textarea.focus()

                <span class="keyword">var</span> name = prefix + <span class="string"><span class="delimiter">'</span><span class="content">keydown</span><span class="delimiter">'</span></span> + v.name[<span class="integer">0</span>].toUpperCase() + v.name.slice(<span class="integer">1</span>)
                <span class="comment">//this.undo_group++</span>

                <span class="keyword">if</span> (keyboard.leftmeta || keyboard.rightmeta) name += <span class="string"><span class="delimiter">'</span><span class="content">Cmd</span><span class="delimiter">'</span></span>
                <span class="keyword">if</span> (keyboard.ctrl) name += <span class="string"><span class="delimiter">'</span><span class="content">Ctrl</span><span class="delimiter">'</span></span>
                <span class="keyword">if</span> (keyboard.alt) name += <span class="string"><span class="delimiter">'</span><span class="content">Alt</span><span class="delimiter">'</span></span>
                <span class="keyword">if</span> (keyboard.shift) name += <span class="string"><span class="delimiter">'</span><span class="content">Shift</span><span class="delimiter">'</span></span>

                <span class="keyword">if</span> (<span class="local-variable">this</span>[name]) {
                        <span class="local-variable">this</span>[name](v)
                } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.keydownHandler) {
                        <span class="local-variable">this</span>.keydownHandler(name)
                }
        }

        <span class="comment">// image can be an image, or a Texture (has array property).</span>
        <span class="local-variable">this</span>.<span class="function">setBgImage</span> = <span class="keyword">function</span>(image){
                <span class="keyword">var</span> shader = <span class="local-variable">this</span>.shaders.hardimage || <span class="local-variable">this</span>.shaders.roundedimage
                <span class="keyword">if</span> (!shader) <span class="keyword">return</span>

                <span class="comment">// Callback method to update the bgimage. Some platforms support a</span>
                <span class="comment">// second argument to Texture.fromImage for delayed loading</span>
                <span class="keyword">var</span> <span class="function">update</span> = <span class="keyword">function</span>(img) {
                        <span class="keyword">if</span> (!img) <span class="keyword">return</span>
                        shader.texture = img
                        <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">resize</span><span class="delimiter">&quot;</span></span>){
                                <span class="local-variable">this</span>._size = img.size
                                <span class="local-variable">this</span>.relayout()
                        } <span class="keyword">else</span> <span class="keyword">if</span> (img) {
                                <span class="local-variable">this</span>.onbgimagemode()
                        } <span class="keyword">else</span> <span class="local-variable">this</span>.redraw()
                }.bind(<span class="local-variable">this</span>)

                update((image.array) ? image : Shader.Texture.fromImage(image, update))
        }

        <span class="comment">// internal, emit an event upward (to all parents) untill a listener is hit</span>
        <span class="local-variable">this</span>.<span class="function">emitUpward</span> = <span class="keyword">function</span>(key, msg){
                <span class="keyword">if</span> (<span class="local-variable">this</span>[<span class="string"><span class="delimiter">'</span><span class="content">_listen_</span><span class="delimiter">'</span></span>+key] || <span class="local-variable">this</span>[<span class="string"><span class="delimiter">'</span><span class="content">on</span><span class="delimiter">'</span></span>+key]){
                        <span class="local-variable">this</span>.emit(key, msg)
                        <span class="keyword">return</span> <span class="local-variable">this</span>
                }
                <span class="keyword">if</span> (<span class="local-variable">this</span>.parent) {
                        <span class="keyword">return</span> <span class="local-variable">this</span>.parent.emitUpward(key, msg)
                }
        }

        <span class="local-variable">this</span>.<span class="function">findEmitUpward</span> = <span class="keyword">function</span>(key){
                <span class="keyword">if</span> (<span class="local-variable">this</span>[<span class="string"><span class="delimiter">'</span><span class="content">_listen_</span><span class="delimiter">'</span></span>+key] || <span class="local-variable">this</span>[<span class="string"><span class="delimiter">'</span><span class="content">on</span><span class="delimiter">'</span></span>+key]){
                        <span class="keyword">return</span> <span class="local-variable">this</span>
                }
                <span class="keyword">if</span> (<span class="local-variable">this</span>.parent) {
                        <span class="keyword">return</span> <span class="local-variable">this</span>.parent.findEmitUpward(key)
                }
        }

        <span class="local-variable">this</span>.<span class="function">computeCursor</span> = <span class="keyword">function</span>(){
                <span class="keyword">var</span> node = <span class="local-variable">this</span>
                <span class="keyword">while</span>(node){
                        <span class="keyword">if</span> (node._cursor !== <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>){
                                <span class="local-variable">this</span>.screen.pointer.cursor = node._cursor
                                <span class="keyword">break</span>
                        }
                        node = node.parent
                }
        }

        <span class="comment">// internal, sorts the shaders</span>
        <span class="local-variable">this</span>.<span class="function">sortShaders</span> = <span class="keyword">function</span>(){
                <span class="keyword">var</span> shaders = <span class="local-variable">this</span>.shaders
                <span class="local-variable">this</span>.shader_draw_list = <span class="local-variable">this</span>.shader_list.slice(<span class="integer">0</span>).sort(<span class="keyword">function</span>(a, b){
                        <span class="keyword">return</span> shaders[a.shadername].draworder &gt; shaders[b.shadername].draworder
                }.bind(<span class="local-variable">this</span>))
                <span class="local-variable">this</span>.shader_update_list = <span class="local-variable">this</span>.shader_list.slice(<span class="integer">0</span>).sort(<span class="keyword">function</span>(a, b){
                        <span class="keyword">return</span> shaders[a.shadername].updateorder &gt; shaders[b.shadername].updateorder
                }.bind(<span class="local-variable">this</span>))
        }

        <span class="comment">// internal, custom hook in the inner class assignment to handle nested shaders specifically</span>
        <span class="local-variable">this</span>.<span class="function">atInnerClassAssign</span> = <span class="keyword">function</span>(key, value){
                <span class="keyword">if</span> (!<span class="local-variable">this</span>.hasOwnProperty(<span class="string"><span class="delimiter">'</span><span class="content">shader_enable</span><span class="delimiter">'</span></span>)) <span class="local-variable">this</span>.shader_enable = Object.create(<span class="local-variable">this</span>.shader_enable || {})
                <span class="comment">// set the shader order</span>
                <span class="keyword">if</span> (!value || <span class="keyword">typeof</span> value === <span class="string"><span class="delimiter">'</span><span class="content">number</span><span class="delimiter">'</span></span> || <span class="keyword">typeof</span> value === <span class="string"><span class="delimiter">'</span><span class="content">boolean</span><span class="delimiter">'</span></span>){
                        <span class="local-variable">this</span>.shader_enable[key] = value? <span class="predefined-constant">true</span>: <span class="predefined-constant">false</span>
                        <span class="keyword">return</span>
                }
                <span class="comment">// its a class assignment</span>
                <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string"><span class="delimiter">'</span><span class="content">function</span><span class="delimiter">'</span></span> &amp;&amp; Object.getPrototypeOf(value.prototype) !== Object.prototype){
                        <span class="local-variable">this</span>[<span class="string"><span class="delimiter">'</span><span class="content">_</span><span class="delimiter">'</span></span> + key] = value
                        <span class="keyword">return</span>
                }
                <span class="comment">// its inheritance</span>
                <span class="keyword">var</span> cls = <span class="local-variable">this</span>[<span class="string"><span class="delimiter">'</span><span class="content">_</span><span class="delimiter">'</span></span> + key]
                <span class="local-variable">this</span>[<span class="string"><span class="delimiter">'</span><span class="content">_</span><span class="delimiter">'</span></span> + key] = cls.extend(value, <span class="local-variable">this</span>)
        }

        <span class="comment">// internal, redraw our view and bubble up the viewport dirtiness to the root</span>
        <span class="local-variable">this</span>.<span class="function">redraw</span> = <span class="keyword">function</span>(){
                <span class="keyword">if</span> (!<span class="local-variable">this</span>.parent_viewport){
                        <span class="keyword">return</span>
                }
                <span class="keyword">if</span> (<span class="local-variable">this</span>.parent_viewport.draw_dirty === <span class="integer">3</span>){
                        <span class="keyword">return</span>
                }
                <span class="keyword">var</span> parent = <span class="local-variable">this</span>
                <span class="keyword">while</span>(parent){
                        <span class="keyword">var</span> viewport = parent.parent_viewport
                        <span class="keyword">if</span> (!viewport) <span class="keyword">break</span>
                        <span class="keyword">if</span> (viewport.draw_dirty === <span class="integer">3</span>){
                                <span class="keyword">return</span>
                        }
                        viewport.draw_dirty = <span class="integer">3</span>
                        parent = viewport.parent
                }
                <span class="local-variable">this</span>.draw_dirty = <span class="integer">3</span>
                <span class="keyword">if</span> (<span class="local-variable">this</span>.screen.device &amp;&amp; <span class="local-variable">this</span>.screen.device.redraw) {
                        <span class="local-variable">this</span>.screen.device.redraw()
                }
        }

        <span class="comment">// internal, updates all the shaders</span>
        <span class="local-variable">this</span>.<span class="function">reupdate</span> = <span class="keyword">function</span>(){
                <span class="keyword">var</span> shaders = <span class="local-variable">this</span>.shader_list
                <span class="keyword">if</span> (shaders) <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="integer">0</span>; i &lt; shaders.length; i++){
                        shaders[i].reupdate()
                }
        }

        <span class="local-variable">this</span>.<span class="function">getViewGuid</span> = <span class="keyword">function</span>(){
                <span class="keyword">if</span> (<span class="local-variable">this</span>.viewguid) <span class="keyword">return</span> <span class="local-variable">this</span>.viewguid
                <span class="keyword">if</span> (<span class="local-variable">this</span>.pickguid){
                        <span class="local-variable">this</span>.viewguid = <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span> +<span class="local-variable">this</span>.pickguid
                }
                <span class="keyword">var</span> node = <span class="local-variable">this</span>, id = <span class="string"><span class="delimiter">'</span><span class="delimiter">'</span></span>
                <span class="keyword">while</span>(node){
                        <span class="keyword">if</span> (node.parent) id += node.parent.children.indexOf(node)
                        node = node.parent
                }
                <span class="local-variable">this</span>.viewguid = id
                <span class="keyword">return</span> id
        }

        <span class="keyword">function</span> <span class="function">UnProject</span>(glx, gly, glz, modelview, projection){
                <span class="keyword">var</span> inv = vec4()
                <span class="keyword">var</span> A = mat4.mat4_mul_mat4(modelview, projection)
                <span class="keyword">var</span> m = mat4.invert(A)
                inv[<span class="integer">0</span>] = glx
                inv[<span class="integer">1</span>] = gly
                inv[<span class="integer">2</span>] = <span class="float">2.0</span> * glz - <span class="float">1.0</span>
                inv[<span class="integer">3</span>] = <span class="float">1.0</span>
                out = vec4.vec4_mul_mat4(inv, m)
                <span class="comment">// divide by W to perform perspective!</span>
                out[<span class="integer">0</span>] /= out[<span class="integer">3</span>]
                out[<span class="integer">1</span>] /= out[<span class="integer">3</span>]
                out[<span class="integer">2</span>] /= out[<span class="integer">3</span>]
                <span class="keyword">return</span> vec3(out)
        }

        <span class="comment">// Internal: remap the x and y coordinates to local space</span>
        <span class="local-variable">this</span>.<span class="function">globalToLocal</span> = <span class="keyword">function</span>(value){
                <span class="comment">//TODO(aki): Simplify.</span>
                <span class="keyword">var</span> sx = <span class="local-variable">this</span>.screen.device.main_frame.size[<span class="integer">0</span>]  / <span class="local-variable">this</span>.screen.device.ratio
                <span class="keyword">var</span> sy = <span class="local-variable">this</span>.screen.device.main_frame.size[<span class="integer">1</span>]  / <span class="local-variable">this</span>.screen.device.ratio
                <span class="keyword">var</span> mx = value[<span class="integer">0</span>] / (sx / <span class="integer">2</span>) - <span class="float">1.0</span>
                <span class="keyword">var</span> my = -<span class="integer">1</span> * (value[<span class="integer">1</span>] / (sy / <span class="integer">2</span>) - <span class="float">1.0</span>)

                <span class="keyword">var</span> parentlist = [], ip = <span class="local-variable">this</span>.parent
                <span class="keyword">while</span> (ip){
                        <span class="keyword">if</span> (ip._viewport || !ip.parent) parentlist.push(ip)
                        ip = ip.parent
                }

                <span class="keyword">var</span> raystart = vec3(mx,my,-<span class="integer">100</span>)
                <span class="keyword">var</span> rayend   = vec3(mx,my,<span class="integer">100</span>)
                <span class="keyword">var</span> lastrayafteradjust = vec3(mx,my,-<span class="integer">100</span>)
                <span class="keyword">var</span> lastprojection = mat4.identity()
                <span class="keyword">var</span> lastviewmatrix = mat4.identity()
                <span class="keyword">var</span> camerapos = vec3(<span class="integer">0</span>)
                <span class="keyword">var</span> scaletemp = mat4.scalematrix([<span class="integer">1</span>,<span class="integer">1</span>,<span class="integer">1</span>])
                <span class="keyword">var</span> transtemp2 = mat4.translatematrix([-<span class="integer">1</span>,-<span class="integer">1</span>,<span class="integer">0</span>])

                <span class="keyword">var</span> lastmode = <span class="string"><span class="delimiter">&quot;</span><span class="content">2d</span><span class="delimiter">&quot;</span></span>

                <span class="local-variable">this</span>.remapmatrix = mat4.identity()

                <span class="keyword">for</span> (<span class="keyword">var</span> i = parentlist.length - <span class="integer">1</span>; i &gt;= <span class="integer">0</span>; i--) {
                        <span class="keyword">var</span> P = parentlist[i]
                        <span class="keyword">var</span> newmode = P.parent? P._viewport:<span class="string"><span class="delimiter">&quot;</span><span class="content">2d</span><span class="delimiter">&quot;</span></span>

                        <span class="keyword">if</span> (P.parent) {

                                <span class="keyword">var</span> MM = P._viewport? P.viewportmatrix: P.totalmatrix

                                <span class="keyword">if</span> (!P.viewportmatrix) console.log(i, <span class="string"><span class="delimiter">&quot;</span><span class="content">whaaa</span><span class="delimiter">&quot;</span></span> )
                                mat4.invert(P.viewportmatrix, <span class="local-variable">this</span>.remapmatrix)

                                <span class="comment">// 3d to layer transition -&gt; do a raypick.</span>
                                <span class="keyword">if</span> (lastmode == <span class="string"><span class="delimiter">&quot;</span><span class="content">3d</span><span class="delimiter">&quot;</span></span>) {
                                        <span class="keyword">var</span> startv = UnProject(lastrayafteradjust.x, lastrayafteradjust.y, <span class="integer">0</span>, lastviewmatrix, lastprojection)
                                        <span class="keyword">var</span> endv = UnProject(lastrayafteradjust.x, lastrayafteradjust.y, <span class="integer">1</span>, lastviewmatrix, lastprojection)

                                        camlocal = vec3.mul_mat4(camerapos, <span class="local-variable">this</span>.remapmatrix)
                                        endlocal = vec3.mul_mat4(endv, <span class="local-variable">this</span>.remapmatrix)

                                        <span class="keyword">var</span> R = vec3.intersectplane(camlocal, endlocal, vec3(<span class="integer">0</span>,<span class="integer">0</span>,-<span class="integer">1</span>), <span class="integer">0</span>)
                                        <span class="keyword">if</span> (!R)        {
                                                raystart = vec3(<span class="float">0.5</span>,<span class="float">0.5</span>,<span class="integer">0</span>)
                                        } <span class="keyword">else</span> {
                                                R = vec3.mul_mat4(R, P.viewportmatrix)
                                                raystart = R
                                        }
                                }

                                raystart = vec3.mul_mat4(raystart, <span class="local-variable">this</span>.remapmatrix)

                                mat4.scalematrix([P.layout.width/<span class="integer">2</span>,P.layout.height/<span class="integer">2</span>,<span class="integer">1000</span>/<span class="integer">2</span>], scaletemp)
                                mat4.invert(scaletemp, <span class="local-variable">this</span>.remapmatrix)

                                raystart = vec3.mul_mat4(raystart, <span class="local-variable">this</span>.remapmatrix)
                                raystart = vec3.mul_mat4(raystart, transtemp2)

                                lastrayafteradjust = vec3(raystart.x, raystart.y,-<span class="integer">1</span>)
                                lastprojection = P.colormatrices.perspectivematrix
                                lastviewmatrix = P.colormatrices.lookatmatrix
                                camerapos = P._camera

                        }

                        <span class="keyword">if</span> (i == <span class="integer">0</span> &amp;&amp; <span class="local-variable">this</span>.noscroll){
                                mat4.invert(P.colormatrices.noscrollmatrix, <span class="local-variable">this</span>.remapmatrix) }        <span class="keyword">else</span> {
                                mat4.invert(P.colormatrices.viewmatrix, <span class="local-variable">this</span>.remapmatrix)
                        }

                        raystart = vec3.mul_mat4(raystart, <span class="local-variable">this</span>.remapmatrix)

                        lastmode = newmode
                }

                <span class="keyword">var</span> MM = <span class="local-variable">this</span>._viewport?<span class="local-variable">this</span>.viewportmatrix: <span class="local-variable">this</span>.totalmatrix
                mat4.invert(MM, <span class="local-variable">this</span>.remapmatrix)
                raystart = vec3.mul_mat4(raystart, <span class="local-variable">this</span>.remapmatrix)
                rayend = vec3.mul_mat4(rayend, <span class="local-variable">this</span>.remapmatrix)

                <span class="keyword">return</span> vec2(raystart.x, raystart.y)
        }

        <span class="comment">// internal, this gets called by the render engine</span>
        <span class="local-variable">this</span>.<span class="function">updateShaders</span> = <span class="keyword">function</span>(){
                <span class="keyword">if</span> (!<span class="local-variable">this</span>.update_dirty) <span class="keyword">return</span>
                <span class="local-variable">this</span>.update_dirty = <span class="predefined-constant">false</span>
                <span class="comment">// we can wire up the shader</span>
                <span class="keyword">if</span> (!<span class="local-variable">this</span>._shaderswired){
                        <span class="local-variable">this</span>.<span class="function">atAttributeGet</span> = <span class="keyword">function</span>(attrname){
                                <span class="comment">//if (this.constructor.name === 'label')</span>
                                <span class="comment">//console.log(this.constructor.name, attrname, this['_'+attrname])</span>
                                <span class="comment">// monitor attribute wires for geometry</span>
                                <span class="comment">// lets add a listener</span>
                                <span class="keyword">if</span> (!shader._view_listeners) shader._view_listeners = {}
                                shader._view_listeners[attrname] = <span class="integer">1</span>

                                <span class="local-variable">this</span>.addListener(attrname,shader.reupdate.bind(shader, attrname))

                        }.bind(<span class="local-variable">this</span>)
                }


                <span class="keyword">var</span> shaders = <span class="local-variable">this</span>.shader_update_list
                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="integer">0</span>; i &lt; shaders.length; i ++){
                        <span class="keyword">var</span> shader = shaders[i]
                        <span class="keyword">if</span> (shader.update &amp;&amp; shader.update_dirty){
                                shader.update_dirty = <span class="predefined-constant">false</span>
                                shader.update()
                        }
                }

                <span class="keyword">if</span> (!<span class="local-variable">this</span>._shaderswired) {
                        <span class="local-variable">this</span>._shaderswired = <span class="predefined-constant">true</span>
                        <span class="local-variable">this</span>.atAttributeGet = <span class="predefined-constant">undefined</span>
                }
        }

        <span class="comment">// starts a drag view via render function</span>
        <span class="local-variable">this</span>.<span class="function">startDrag</span> = <span class="keyword">function</span>(pointerevent, render){
                <span class="keyword">var</span> dragview = <span class="local-variable">this</span>.screen.openOverlay(render)

                <span class="keyword">if</span> (!dragview.atDragMove){
                        dragview.<span class="function">atDragMove</span> = <span class="keyword">function</span>(position){
                                <span class="local-variable">this</span>.x = position[<span class="integer">0</span>] - <span class="local-variable">this</span>.width*<span class="float">0.5</span>
                                <span class="local-variable">this</span>.y = position[<span class="integer">1</span>] - <span class="local-variable">this</span>.height*<span class="float">0.5</span>
                        }
                }

                <span class="comment">// make sure we pick the screen in pointermove</span>
                pointerevent.pickview = <span class="predefined-constant">true</span>
                dragview.atDragMove(pointerevent.value)

                <span class="keyword">var</span> lastdrag
                <span class="local-variable">this</span>.<span class="function">onpointermove</span> = <span class="keyword">function</span>(event){
                        dragview.atDragMove(event.value)
                        <span class="comment">// lets send dragenter/leave events</span>
                        <span class="keyword">var</span> newdrag = event.pick

                        <span class="keyword">if</span> (!dragview.isDropTarget(newdrag,event)) newdrag = <span class="predefined-constant">undefined</span>

                        <span class="keyword">if</span> (lastdrag !== newdrag){
                                <span class="keyword">if</span> (lastdrag) lastdrag.emitUpward(<span class="string"><span class="delimiter">'</span><span class="content">dragout</span><span class="delimiter">'</span></span>,{})
                                <span class="keyword">if</span> (newdrag) newdrag.emitUpward(<span class="string"><span class="delimiter">'</span><span class="content">dragover</span><span class="delimiter">'</span></span>,{})
                                lastdrag = newdrag
                        }
                        <span class="keyword">if</span> (newdrag) newdrag.emitUpward(<span class="string"><span class="delimiter">'</span><span class="content">dragmove</span><span class="delimiter">'</span></span>, event)
                }
                <span class="local-variable">this</span>.<span class="function">onpointerend</span> = <span class="keyword">function</span>(event){
                        <span class="local-variable">this</span>.onpointermove = <span class="predefined-constant">undefined</span>
                        dragview.closeOverlay()
                        <span class="keyword">if</span> (lastdrag){
                                lastdrag.emitUpward(<span class="string"><span class="delimiter">'</span><span class="content">dragout</span><span class="delimiter">'</span></span>,{})
                        }
                        dragview.atDrop(lastdrag, event)
                        <span class="local-variable">this</span>.onpointerend = <span class="predefined-constant">undefined</span>
                }
        }

        <span class="comment">// internal, decide to inject scrollbars into our childarray</span>
        <span class="local-variable">this</span>.<span class="function">atRender</span> = <span class="keyword">function</span>(){
                <span class="keyword">if</span> (<span class="local-variable">this</span>._viewport === <span class="string"><span class="delimiter">'</span><span class="content">2d</span><span class="delimiter">'</span></span> &amp;&amp; (<span class="local-variable">this</span>._overflow === <span class="string"><span class="delimiter">'</span><span class="content">auto</span><span class="delimiter">'</span></span> || <span class="local-variable">this</span>._overflow === <span class="string"><span class="delimiter">'</span><span class="content">scroll</span><span class="delimiter">'</span></span> || <span class="local-variable">this</span>._overflow === <span class="string"><span class="delimiter">'</span><span class="content">hscroll</span><span class="delimiter">'</span></span> || <span class="local-variable">this</span>._overflow === <span class="string"><span class="delimiter">'</span><span class="content">vscroll</span><span class="delimiter">'</span></span> || <span class="local-variable">this</span>._overflow === <span class="string"><span class="delimiter">'</span><span class="content">auto</span><span class="delimiter">'</span></span>)){

                        <span class="keyword">if</span> (<span class="local-variable">this</span>.vscrollbar) <span class="local-variable">this</span>.vscrollbar.value = <span class="integer">0</span>
                        <span class="keyword">if</span> (<span class="local-variable">this</span>.hscrollbar) <span class="local-variable">this</span>.hscrollbar.value = <span class="integer">0</span>

                        <span class="local-variable">this</span>.<span class="function">scroll</span> = <span class="keyword">function</span>(event){
                                <span class="keyword">if</span> (event.mark) <span class="keyword">return</span>
                                <span class="keyword">if</span> (<span class="local-variable">this</span>.vscrollbar){
                                        <span class="local-variable">this</span>.vscrollbar.value = Mark(event.value[<span class="integer">1</span>])
                                }
                                <span class="keyword">if</span> (<span class="local-variable">this</span>.hscrollbar){
                                        <span class="local-variable">this</span>.hscrollbar.value = Mark(event.value[<span class="integer">0</span>])
                                }
                        }

                        <span class="keyword">if</span> (<span class="local-variable">this</span>._overflow === <span class="string"><span class="delimiter">'</span><span class="content">auto</span><span class="delimiter">'</span></span> || <span class="local-variable">this</span>._overflow === <span class="string"><span class="delimiter">'</span><span class="content">scroll</span><span class="delimiter">'</span></span> || <span class="local-variable">this</span>._overflow === <span class="string"><span class="delimiter">'</span><span class="content">vscroll</span><span class="delimiter">'</span></span>) <span class="local-variable">this</span>.children.push(
                                <span class="local-variable">this</span>.vscrollbar = <span class="local-variable">this</span>.scrollbar({
                                        <span class="key">position</span>:<span class="string"><span class="delimiter">'</span><span class="content">absolute</span><span class="delimiter">'</span></span>,
                                        <span class="key">vertical</span>:<span class="predefined-constant">true</span>,
                                        <span class="key">noscroll</span>:<span class="predefined-constant">true</span>,
                                        <span class="function">value</span>:<span class="keyword">function</span>(event){
                                                <span class="keyword">if</span> (event.mark) <span class="keyword">return</span>
                                                <span class="local-variable">this</span>.parent.scroll = Mark(vec2(<span class="local-variable">this</span>.parent._scroll[<span class="integer">0</span>],<span class="local-variable">this</span>._value))
                                        },
                                        <span class="function">layout</span>:<span class="keyword">function</span>(){
                                                <span class="keyword">var</span> parent_layout = <span class="local-variable">this</span>.parent.layout
                                                <span class="keyword">var</span> this_layout = <span class="local-variable">this</span>.layout
                                                this_layout.top = <span class="integer">0</span>
                                                this_layout.width = <span class="integer">10</span>
                                                this_layout.height = parent_layout.height
                                                this_layout.left = parent_layout.width - this_layout.width
                                        }
                                })
                        )

                        <span class="keyword">if</span> (<span class="local-variable">this</span>._overflow === <span class="string"><span class="delimiter">'</span><span class="content">auto</span><span class="delimiter">'</span></span> || <span class="local-variable">this</span>._overflow === <span class="string"><span class="delimiter">'</span><span class="content">scroll</span><span class="delimiter">'</span></span> || <span class="local-variable">this</span>._overflow === <span class="string"><span class="delimiter">'</span><span class="content">hscroll</span><span class="delimiter">'</span></span>) <span class="local-variable">this</span>.children.push(
                                <span class="local-variable">this</span>.hscrollbar = <span class="local-variable">this</span>.scrollbar({
                                        <span class="key">position</span>: <span class="string"><span class="delimiter">'</span><span class="content">absolute</span><span class="delimiter">'</span></span>,
                                        <span class="key">vertical</span>: <span class="predefined-constant">false</span>,
                                        <span class="key">noscroll</span>: <span class="predefined-constant">true</span>,
                                        <span class="function">value</span>: <span class="keyword">function</span>(event){
                                                <span class="keyword">if</span> (event.mark) <span class="keyword">return</span>
                                                <span class="local-variable">this</span>.parent.scroll = Mark(vec2(<span class="local-variable">this</span>._value,<span class="local-variable">this</span>.parent._scroll[<span class="integer">1</span>]))
                                        },
                                        <span class="function">layout</span>: <span class="keyword">function</span>(){
                                                <span class="keyword">var</span> parent_layout = <span class="local-variable">this</span>.parent.layout
                                                <span class="keyword">var</span> this_layout = <span class="local-variable">this</span>.layout
                                                this_layout.left = <span class="integer">0</span>
                                                this_layout.height = <span class="integer">10</span>
                                                this_layout.width = parent_layout.width
                                                this_layout.top = parent_layout.height - this_layout.height
                                        }
                                })
                        )


                        <span class="keyword">if</span> (<span class="local-variable">this</span>.hscrollbar) <span class="local-variable">this</span>.hscrollbar.value = Mark(<span class="local-variable">this</span>._scroll[<span class="integer">0</span>])
                        <span class="keyword">if</span> (<span class="local-variable">this</span>.vscrollbar) <span class="local-variable">this</span>.vscrollbar.value = Mark(<span class="local-variable">this</span>._scroll[<span class="integer">1</span>])

                        <span class="local-variable">this</span>.<span class="function">pointerwheel</span> = <span class="keyword">function</span>(event){
                                <span class="comment">// cumulative damped wheel value.</span>
                                <span class="comment">// Used to decide if enough horizontal/vertical movement is present.</span>
                                <span class="local-variable">this</span>.dampedwheel = <span class="local-variable">this</span>.dampedwheel || vec2(<span class="integer">0</span>, <span class="integer">0</span>, <span class="integer">0</span>)
                                <span class="local-variable">this</span>.dampedwheel = vec2(
                                        (<span class="local-variable">this</span>.dampedwheel[<span class="integer">0</span>] * <span class="integer">9</span> + event.wheel[<span class="integer">0</span>]) / <span class="integer">10</span>,
                                        (<span class="local-variable">this</span>.dampedwheel[<span class="integer">1</span>] * <span class="integer">9</span> + event.wheel[<span class="integer">1</span>]) / <span class="integer">10</span>
                                )

                                <span class="keyword">if</span> (<span class="local-variable">this</span>.vscrollbar &amp;&amp; <span class="local-variable">this</span>.vscrollbar._visible){
                                        <span class="keyword">if</span> (!<span class="local-variable">this</span>.hscrollbar || !<span class="local-variable">this</span>.hscrollbar._visible) {
                                                <span class="keyword">if</span> (abs(<span class="local-variable">this</span>.dampedwheel[<span class="integer">0</span>]) &gt; abs(<span class="local-variable">this</span>.dampedwheel[<span class="integer">1</span>]) * <span class="integer">2</span>) <span class="keyword">return</span>
                                        }
                                        <span class="local-variable">this</span>.vscrollbar.value = clamp(<span class="local-variable">this</span>.vscrollbar._value + event.wheel[<span class="integer">1</span>], <span class="integer">0</span>, <span class="local-variable">this</span>.vscrollbar._total - <span class="local-variable">this</span>.vscrollbar._page)
                                }
                                <span class="keyword">if</span> (<span class="local-variable">this</span>.hscrollbar &amp;&amp; <span class="local-variable">this</span>.hscrollbar._visible){
                                        <span class="keyword">if</span> (!<span class="local-variable">this</span>.vscrollbar || !<span class="local-variable">this</span>.vscrollbar._visible) {
                                                <span class="keyword">if</span> (abs(<span class="local-variable">this</span>.dampedwheel[<span class="integer">1</span>]) &gt; abs(<span class="local-variable">this</span>.dampedwheel[<span class="integer">0</span>]) / <span class="integer">2</span>) <span class="keyword">return</span>
                                        }
                                        <span class="local-variable">this</span>.hscrollbar.value = clamp(<span class="local-variable">this</span>.hscrollbar._value + event.wheel[<span class="integer">0</span>], <span class="integer">0</span>, <span class="local-variable">this</span>.hscrollbar._total - <span class="local-variable">this</span>.hscrollbar._page)
                                }
                        }

                        <span class="comment">//TODO(aki): implement zoom</span>
                        <span class="comment">// this.pointerzoom = function(event){</span>
                        <span class="comment">//         var zoom = event.value.zoom</span>
                        <span class="comment">//         var lastzoom = this._zoom</span>
                        <span class="comment">//         var newzoom = clamp(lastzoom * (1+0.03 * zoom),0.01,10)</span>
                        <span class="comment">//         this.zoom = newzoom</span>
                        <span class="comment">//</span>
                        <span class="comment">//         var pos = this.globalToLocal(event.value.position)</span>
                        <span class="comment">//</span>
                        <span class="comment">//         var shiftx = pos[0] * lastzoom - pos[0] * this._zoom</span>
                        <span class="comment">//         var shifty = pos[1] * lastzoom - pos[1] * this._zoom</span>
                        <span class="comment">//</span>
                        <span class="comment">//         this.hscrollbar.value = clamp(this.hscrollbar._value + shiftx, 0, this.hscrollbar._total - this.hscrollbar._page)</span>
                        <span class="comment">//         this.vscrollbar.value = clamp(this.vscrollbar._value + shifty, 0, this.vscrollbar._total - this.vscrollbar._page)</span>
                        <span class="comment">//</span>
                        <span class="comment">//         this.updateScrollbars()</span>
                        <span class="comment">//         this.redraw()</span>
                        <span class="comment">// }</span>
                }
        }

        <span class="comment">// internal, show/hide scrollbars</span>
        <span class="local-variable">this</span>.<span class="function">updateScrollbars</span> = <span class="keyword">function</span>(){

                <span class="keyword">if</span> (<span class="local-variable">this</span>.vscrollbar){
                        <span class="keyword">var</span> scroll = <span class="local-variable">this</span>.vscrollbar
                        <span class="keyword">var</span> totalsize = Math.floor(<span class="local-variable">this</span>.layout.boundh)
                        <span class="keyword">var</span> viewsize = Math.floor(<span class="local-variable">this</span>.layout.height * <span class="local-variable">this</span>.zoom)
                        <span class="keyword">if</span> (totalsize &gt; viewsize+<span class="integer">1</span>){
                                scroll._visible = <span class="predefined-constant">true</span>
                                scroll._total = totalsize
                                scroll._page = viewsize
                                <span class="keyword">var</span> off = clamp(scroll._value,<span class="integer">0</span>, scroll._total - scroll._page)
                                <span class="keyword">if</span> (off !== scroll._value) scroll.value = off
                        } <span class="keyword">else</span> {
                                <span class="keyword">if</span> (<span class="integer">0</span> !== scroll._offset){
                                        scroll.value = <span class="integer">0</span>
                                }
                                scroll._visible = <span class="predefined-constant">false</span>
                        }
                }
                <span class="keyword">if</span> (<span class="local-variable">this</span>.hscrollbar){
                        <span class="keyword">var</span> scroll = <span class="local-variable">this</span>.hscrollbar
                        <span class="keyword">var</span> totalsize = Math.floor(<span class="local-variable">this</span>._layout.boundw)
                        <span class="keyword">var</span> viewsize = Math.floor(<span class="local-variable">this</span>._layout.width* <span class="local-variable">this</span>.zoom)
                        <span class="keyword">if</span> (totalsize &gt; viewsize + <span class="integer">1</span>){
                                scroll._visible = <span class="predefined-constant">true</span>
                                scroll._total = totalsize
                                scroll._page = viewsize
                                <span class="keyword">var</span> off = clamp(scroll._value,<span class="integer">0</span>, scroll._total - scroll._page)
                                <span class="keyword">if</span> (off !== scroll._value) scroll.value = off
                        } <span class="keyword">else</span> {
                                <span class="keyword">if</span> (<span class="integer">0</span> !== scroll._value) scroll.value = <span class="integer">0</span>
                                scroll._visible = <span class="predefined-constant">false</span>
                        }
                }
        }

        <span class="comment">// internal, called by doLayout, to update the matrices to layout and parent matrix</span>
        <span class="local-variable">this</span>.<span class="function">updateMatrices</span> = <span class="keyword">function</span>(parentmatrix, parentviewport, parent_changed, boundsinput, bailbound){
                <span class="comment">// allow pre-matrix gen hooking</span>
                <span class="keyword">if</span> (<span class="local-variable">this</span>.atMatrix) <span class="local-variable">this</span>.atMatrix()

                <span class="keyword">var</span> boundsobj = boundsinput
                <span class="keyword">if</span> (!boundsinput){
                        boundsobj = <span class="local-variable">this</span>._layout
                        boundsobj.absx = <span class="integer">0</span>
                        boundsobj.absy = <span class="integer">0</span>
                        boundsobj.boundw = <span class="integer">0</span>
                        boundsobj.boundh = <span class="integer">0</span>
                }

                <span class="keyword">var</span> layout = <span class="local-variable">this</span>._layout

                <span class="keyword">if</span> (<span class="local-variable">this</span>.measured_width !== <span class="predefined-constant">undefined</span> || <span class="local-variable">this</span>.measured_height !== <span class="predefined-constant">undefined</span>){
                        <span class="keyword">var</span> width = layout.absx + max(layout.width ,<span class="local-variable">this</span>.measured_width)
                        <span class="keyword">var</span> height = layout.absy + max(layout.height, <span class="local-variable">this</span>.measured_height)
                } <span class="keyword">else</span> {
                        <span class="keyword">var</span> width = layout.absx + layout.width
                        <span class="keyword">var</span> height = layout.absy + layout.height
                }

                <span class="keyword">if</span> (width &gt; boundsobj.boundw) {
                        boundsobj.boundw = width
                }
                <span class="keyword">if</span> (height &gt; boundsobj.boundh) {
                        boundsobj.boundh = height
                }

                <span class="keyword">if</span> (bailbound) <span class="keyword">return</span>

                <span class="keyword">var</span> matrix_changed = parent_changed
                <span class="keyword">if</span> (parentviewport === <span class="string"><span class="delimiter">'</span><span class="content">3d</span><span class="delimiter">'</span></span>){
                        matrix_changed = <span class="predefined-constant">true</span>
                        <span class="keyword">if</span> (<span class="local-variable">this</span>._scale &amp;&amp; <span class="local-variable">this</span>._anchor &amp;&amp; <span class="local-variable">this</span>._rotate &amp;&amp; <span class="local-variable">this</span>._pos){
                                mat4.TSRT2(<span class="local-variable">this</span>._anchor, <span class="local-variable">this</span>._scale, <span class="local-variable">this</span>._rotate, <span class="local-variable">this</span>._pos, <span class="local-variable">this</span>.modelmatrix)
                        } <span class="keyword">else</span> {
                                mat4.identity(<span class="local-variable">this</span>.modelmatrix)
                        }
                } <span class="keyword">else</span> {
                        <span class="comment">// compute TSRT matrix</span>
                        <span class="keyword">if</span> (layout){
                                <span class="comment">//console.log(this.matrix_dirty)</span>
                                <span class="comment">//var ml = this.matrix_layout</span>
                                <span class="comment">//if (!ml || ml.left !== layout.left || ml.top !== layout.top ||</span>
                                <span class="comment">//        ml.width !== layout.width || ml.height !== layout.height</span>
                                 <span class="comment">//   || ml.scale !== this._scale || ml.rotate !== this._rotate</span>
                                <span class="comment">//){</span>
                                <span class="comment">//        this.matrix_layout = {</span>
                                <span class="comment">//                left:layout.left,</span>
                                <span class="comment">///                top:layout.top,</span>
                                        <span class="comment">//        width:layout.width,</span>
                                        <span class="comment">//        height:layout.height,</span>
                                        <span class="comment">//        scale: this._scale,</span>
                                        <span class="comment">//        rotate:this._rotate</span>
                                <span class="comment">//        }</span>

                                matrix_changed = <span class="predefined-constant">true</span>
                                <span class="keyword">var</span> s = <span class="local-variable">this</span>._scale
                                <span class="keyword">var</span> r = <span class="local-variable">this</span>._rotate
                                <span class="keyword">var</span> tr = <span class="local-variable">this</span>._translate
                                <span class="keyword">var</span> t0 = layout.left + tr[<span class="integer">0</span>], t1 = layout.top+ tr[<span class="integer">1</span>], t2 = tr[<span class="integer">2</span>]
                                <span class="comment">//if (this.name === 'handle') console.log(this.constructor.name, layout.top)</span>
                                <span class="comment">//var hw = (  this.layout.width !== undefined ? this.layout.width: this._size[0] ) / 2</span>
                                <span class="comment">//var hh = ( this.layout.height !== undefined ? this.layout.height: this._size[1]) / 2</span>
                                <span class="keyword">var</span> hw = layout.width / <span class="integer">2</span>
                                <span class="keyword">var</span> hh = layout.height / <span class="integer">2</span>
                                mat4.TSRT(-hw, -hh, <span class="integer">0</span>, s[<span class="integer">0</span>], s[<span class="integer">1</span>], s[<span class="integer">2</span>], r[<span class="integer">0</span>], r[<span class="integer">1</span>], r[<span class="integer">2</span>], t0 + hw * s[<span class="integer">0</span>], t1 + hh * s[<span class="integer">1</span>], t2, <span class="local-variable">this</span>.modelmatrix)
                        } <span class="keyword">else</span> {
                                matrix_changed = <span class="predefined-constant">true</span>
                                <span class="keyword">var</span> s = <span class="local-variable">this</span>._scale
                                <span class="keyword">var</span> r = <span class="local-variable">this</span>._rotate
                                <span class="keyword">var</span> t = <span class="local-variable">this</span>._translate
                                <span class="keyword">var</span> hw = <span class="local-variable">this</span>._size[<span class="integer">0</span>] / <span class="integer">2</span>
                                <span class="keyword">var</span> hh = <span class="local-variable">this</span>._size[<span class="integer">1</span>] / <span class="integer">2</span>
                                mat4.TSRT(-hw, -hh, <span class="integer">0</span>, s[<span class="integer">0</span>], s[<span class="integer">1</span>], s[<span class="integer">2</span>], <span class="integer">0</span>, <span class="integer">0</span>, r[<span class="integer">2</span>], t[<span class="integer">0</span>] + hw * s[<span class="integer">0</span>], t[<span class="integer">1</span>] + hh * s[<span class="integer">1</span>], t[<span class="integer">2</span>], <span class="local-variable">this</span>.modelmatrix)
                        }
                }

                <span class="keyword">var</span> parentmode = parentviewport
                <span class="keyword">if</span> (<span class="local-variable">this</span>._viewport){
                        <span class="keyword">if</span> (parentmatrix) {
                                mat4.mat4_mul_mat4(<span class="local-variable">this</span>.modelmatrix, parentmatrix, <span class="local-variable">this</span>.viewportmatrix)
                        } <span class="keyword">else</span> {
                                <span class="local-variable">this</span>.viewportmatrix = <span class="local-variable">this</span>.modelmatrix
                        }
                        mat4.identity(<span class="local-variable">this</span>.totalmatrix)
                        parentmode = <span class="local-variable">this</span>._viewport
                        parentmatrix = mat4.global_identity
                } <span class="keyword">else</span> {
                        <span class="keyword">if</span> (parentmatrix &amp;&amp; matrix_changed) mat4.mat4_mul_mat4( <span class="local-variable">this</span>.modelmatrix, parentmatrix, <span class="local-variable">this</span>.totalmatrix)
                }

                <span class="keyword">var</span> children = <span class="local-variable">this</span>.children
                <span class="keyword">var</span> len = children.length

                <span class="keyword">if</span> (children) <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="integer">0</span>; i &lt; len; i++){
                        <span class="keyword">var</span> child = children[i]
                        <span class="keyword">var</span> clayout = child.layout
                        <span class="keyword">if</span> (!clayout) <span class="keyword">continue</span>
                        clayout.absx = layout.absx + clayout.left
                        clayout.absy = layout.absy + clayout.top
                        child.updateMatrices(<span class="local-variable">this</span>.totalmatrix, parentmode, matrix_changed, boundsobj, child._viewport)
                }

                <span class="keyword">if</span> (!boundsinput){
                        <span class="local-variable">this</span>.updateScrollbars()
                }

                <span class="local-variable">this</span>.matrix_dirty = <span class="predefined-constant">false</span>
        }

        <span class="comment">// emit post layout</span>
        <span class="keyword">function</span> <span class="function">emitPostLayout</span>(node, nochild){
                <span class="keyword">var</span> ref = node.ref
                <span class="keyword">var</span> oldlayout = ref.oldlayout || {}
                <span class="keyword">var</span> layout = ref._layout

                <span class="keyword">if</span> (!nochild){
                        <span class="keyword">var</span> children = node.children
                        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="integer">0</span>; i &lt; children.length; i++){
                                <span class="keyword">var</span> child = children[i]
                                emitPostLayout(child, child.ref._viewport)
                        }
                        ref.layout_dirty = <span class="predefined-constant">false</span>
                }

                <span class="keyword">var</span> oldlayout = ref.oldlayout || {}
                <span class="keyword">if</span> ((ref._listen_layout || ref.onlayout) &amp;&amp; (layout.left !== oldlayout.left || layout.top !== oldlayout.top ||
                         layout.width !== oldlayout.width || layout.height !== oldlayout.height)){
                        ref.emit(<span class="string"><span class="delimiter">'</span><span class="content">layout</span><span class="delimiter">'</span></span>, {<span class="key">type</span>:<span class="string"><span class="delimiter">'</span><span class="content">setter</span><span class="delimiter">'</span></span>, <span class="key">owner</span>:ref, <span class="key">key</span>:<span class="string"><span class="delimiter">'</span><span class="content">layout</span><span class="delimiter">'</span></span>, <span class="key">value</span>:layout})
                }
                ref.oldlayout = layout
                ref.matrix_dirty = <span class="predefined-constant">true</span>

                <span class="keyword">if</span> (ref._bgimage){
                        ref.onbgimagemode()
                }
        }

        <span class="comment">// cause this node, all childnodes and relevant parent nodes to relayout</span>

        <span class="local-variable">this</span>.<span class="function">relayoutRecur</span> = <span class="keyword">function</span>(source){
                <span class="local-variable">this</span>.layout_dirty = <span class="predefined-constant">true</span>
                <span class="local-variable">this</span>.draw_dirty = <span class="integer">3</span> <span class="comment">// bitmask, 2 = pick, 1= color</span>
                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="integer">0</span>; i &lt; <span class="local-variable">this</span>.child_viewport_list.length; i++){
                        <span class="keyword">var</span> child = <span class="local-variable">this</span>.child_viewport_list[i]
                        <span class="comment">//if (child._overflow) continue</span>
                        <span class="keyword">if</span> (child !== source){
                                child.relayoutRecur()
                        }
                }
                <span class="keyword">if</span> (<span class="local-variable">this</span>.parent_viewport !== <span class="local-variable">this</span>){
                        <span class="keyword">if</span> (<span class="local-variable">this</span>.parent_viewport._overflow) <span class="keyword">return</span>
                        <span class="local-variable">this</span>.parent_viewport.relayoutRecur(<span class="local-variable">this</span>)
                }
        }

        <span class="comment">// ok so. what we need to do is</span>
        <span class="comment">// scan up towards overflow something</span>
        <span class="comment">// scan down and skip overflow something.</span>

        <span class="local-variable">this</span>.<span class="function">relayout</span> = <span class="keyword">function</span>(shallow){
                <span class="keyword">if</span> (<span class="local-variable">this</span>.layout_dirty) <span class="keyword">return</span>
                <span class="local-variable">this</span>.layout_dirty = <span class="predefined-constant">true</span>
                <span class="local-variable">this</span>.redraw()
                <span class="keyword">if</span> (<span class="local-variable">this</span>.parent_viewport) <span class="local-variable">this</span>.parent_viewport.relayoutRecur()
        }

        <span class="local-variable">this</span>.<span class="function">rematrix</span> = <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.matrix_dirty = <span class="predefined-constant">true</span>
                <span class="keyword">if</span> (<span class="local-variable">this</span>.parent_viewport){
                        <span class="local-variable">this</span>.parent_viewport.matrix_dirty = <span class="predefined-constant">true</span>
                        <span class="local-variable">this</span>.redraw()
                }
        }

        <span class="comment">// internal, moving a position in absolute should only trigger a matrix reload</span>
        <span class="local-variable">this</span>.<span class="function">pos</span> = <span class="keyword">function</span>(){
                <span class="keyword">if</span> (<span class="local-variable">this</span>._position === <span class="string"><span class="delimiter">'</span><span class="content">absolute</span><span class="delimiter">'</span></span>){
                        <span class="local-variable">this</span>._layout.left = <span class="local-variable">this</span>._pos[<span class="integer">0</span>]
                        <span class="local-variable">this</span>._layout.top = <span class="local-variable">this</span>._pos[<span class="integer">1</span>]
                        <span class="local-variable">this</span>.rematrix()
                } <span class="keyword">else</span> {
                        <span class="local-variable">this</span>.relayout()
                }
        }

        <span class="local-variable">this</span>.corner =
        <span class="local-variable">this</span>.size =
        <span class="local-variable">this</span>.minsize =
        <span class="local-variable">this</span>.maxsize =
        <span class="local-variable">this</span>.margin =
        <span class="local-variable">this</span>.padding =
        <span class="local-variable">this</span>.flex =
        <span class="local-variable">this</span>.flexwrap =
        <span class="local-variable">this</span>.flexdirection =
        <span class="local-variable">this</span>.justifycontent =
        <span class="local-variable">this</span>.alignitems =
        <span class="local-variable">this</span>.alignself =
        <span class="local-variable">this</span>.position =
        <span class="local-variable">this</span>.relayout

        <span class="local-variable">this</span>.translate =
        <span class="local-variable">this</span>.scale =
        <span class="local-variable">this</span>.rotate = <span class="local-variable">this</span>.rematrix

        <span class="comment">// internal, called by the render engine</span>
        <span class="local-variable">this</span>.<span class="function">doLayout</span> = <span class="keyword">function</span>(){

                <span class="keyword">if</span> (<span class="local-variable">this</span>.parent &amp;&amp; !isNaN(<span class="local-variable">this</span>._flex)){ <span class="comment">// means our layout has been externally defined</span>

                        <span class="keyword">var</span> layout = <span class="local-variable">this</span>._layout
                        <span class="keyword">var</span> flex = <span class="local-variable">this</span>._flex
                        <span class="keyword">var</span> size = <span class="local-variable">this</span>._size

                        <span class="keyword">var</span> presizex = isNaN(<span class="local-variable">this</span>._percentsize[<span class="integer">0</span>])?layout.width:<span class="local-variable">this</span>.parent._layout.width * <span class="local-variable">this</span>._percentsize[<span class="integer">0</span>]
                        <span class="keyword">var</span> presizey = isNaN(<span class="local-variable">this</span>._percentsize[<span class="integer">1</span>])?layout.height: <span class="local-variable">this</span>.parent._layout.height * <span class="local-variable">this</span>._percentsize[<span class="integer">1</span>]

                        <span class="comment">//console.log(this._percentsize, presizex,presizey)</span>
                        <span class="comment">//this._size = vec2(layout.width, layout.height)</span>

                        <span class="keyword">var</span> flexwrap = <span class="local-variable">this</span>._flexwrap
                        <span class="local-variable">this</span>._flex = <span class="integer">1</span>
                        <span class="local-variable">this</span>._size = vec2(presizex, presizey)
                        <span class="local-variable">this</span>._flexwrap = <span class="predefined-constant">false</span>

                        <span class="keyword">if</span> (<span class="local-variable">this</span>.measure) <span class="local-variable">this</span>.measure() <span class="comment">// otherwise it doesnt get called</span>

                        <span class="keyword">var</span> copynodes = FlexLayout.fillNodes(<span class="local-variable">this</span>)
                        FlexLayout.computeLayout(copynodes)

                        <span class="local-variable">this</span>._flex = flex
                        <span class="local-variable">this</span>._size = size
                        <span class="local-variable">this</span>._flexwrap = flexwrap
                        <span class="local-variable">this</span>._layout = layout

                        emitPostLayout(copynodes)
                } <span class="keyword">else</span> {
                        <span class="keyword">var</span> layout = <span class="local-variable">this</span>._layout

                        <span class="comment">//this._size = vec2(presizex, presizey)</span>
                        <span class="keyword">var</span> size = <span class="local-variable">this</span>._size
                        <span class="keyword">var</span> pos = <span class="local-variable">this</span>._pos

                        <span class="keyword">var</span> presizex = isNaN(<span class="local-variable">this</span>._percentsize[<span class="integer">0</span>])?size[<span class="integer">0</span>]: <span class="local-variable">this</span>.parent._layout.width * <span class="float">0.01</span> * <span class="local-variable">this</span>._percentsize[<span class="integer">0</span>]
                        <span class="keyword">var</span> presizey = isNaN(<span class="local-variable">this</span>._percentsize[<span class="integer">1</span>])?size[<span class="integer">1</span>]: <span class="local-variable">this</span>.parent._layout.height * <span class="float">0.01</span> * <span class="local-variable">this</span>._percentsize[<span class="integer">1</span>]
                        <span class="keyword">var</span> presizez = isNaN(<span class="local-variable">this</span>._percentsize[<span class="integer">2</span>])?size[<span class="integer">2</span>]: <span class="local-variable">this</span>.parent.depth * <span class="float">0.01</span> * <span class="local-variable">this</span>._percentsize[<span class="integer">2</span>]

                        <span class="keyword">var</span> preposx = isNaN(<span class="local-variable">this</span>._percentpos[<span class="integer">0</span>])?pos[<span class="integer">0</span>]: <span class="local-variable">this</span>.parent._layout.width * <span class="float">0.01</span> * <span class="local-variable">this</span>._percentpos[<span class="integer">0</span>]
                        <span class="keyword">var</span> preposy = isNaN(<span class="local-variable">this</span>._percentpos[<span class="integer">1</span>])?pos[<span class="integer">1</span>]: <span class="local-variable">this</span>.parent._layout.height * <span class="float">0.01</span> * <span class="local-variable">this</span>._percentpos[<span class="integer">1</span>]

                        <span class="comment">// we have some kind of overflow, cause we are a viewport</span>
                        <span class="comment">// so if height is not given we have to take up the external height</span>
                        <span class="comment">//console.log(presizey, this.layout.height)</span>
                        <span class="comment">//console.log(&quot;This is where we get the percentage size&quot;, this._percentsize, presizex,presizey)</span>

                        <span class="local-variable">this</span>._size = vec2(presizex, presizey)
                        <span class="local-variable">this</span>._pos = vec2(preposx, preposy)
                        <span class="keyword">var</span> preheight = <span class="local-variable">this</span>._layout.height
                        <span class="keyword">var</span> copynodes = FlexLayout.fillNodes(<span class="local-variable">this</span>)
                        FlexLayout.computeLayout(copynodes)

                        <span class="keyword">if</span> (isNaN(presizey)){
                                <span class="local-variable">this</span>._layout.height = preheight
                        }

                        <span class="local-variable">this</span>._size = size
                        <span class="local-variable">this</span>._pos = pos

                        emitPostLayout(copynodes)
                }
        }

        <span class="comment">// Animates an attribute over time.</span>
        <span class="comment">// &lt;attribute&gt; {String} The name of the attribute to animate on this view.</span>
        <span class="comment">// &lt;track&gt; {Object} An object consisting of keys with time offset (in seconds)/value pairs. Each value can be discrete, or an object with motion and value keys where motion describes the interpolation from the previous value to this one, and value describes the value to animate to.</span>
        <span class="comment">// Returns a promise that resolves when the animation completes. This allows animations</span>
        <span class="comment">// to be chained together, or other behaviors to occur when an animation ends.</span>
        <span class="local-variable">this</span>.<span class="function">animate</span> = <span class="keyword">function</span>(attribute, track){
                <span class="keyword">return</span> <span class="keyword">new</span> define.Promise(<span class="keyword">function</span>(resolve, reject){
                        <span class="local-variable">this</span>.startAnimation(attribute, <span class="predefined-constant">undefined</span>, track, resolve)
                }.bind(<span class="local-variable">this</span>))
        }

        <span class="comment">// internal, called by animation setters</span>
        <span class="local-variable">this</span>.<span class="function">startAnimation</span> = <span class="keyword">function</span>(attribute, value, track, resolve){
                <span class="keyword">if</span> (<span class="local-variable">this</span>.initialized) {
                        <span class="keyword">return</span> <span class="local-variable">this</span>.screen.startAnimationRoot(<span class="local-variable">this</span>, attribute, value, track, resolve)
                } <span class="keyword">else</span> {
                        <span class="keyword">return</span> <span class="predefined-constant">false</span>
                }
        }

        <span class="comment">// Stops a running animation for an attribute</span>
        <span class="comment">// &lt;attribute&gt; {String} The name of the attribute to stop animating on this view.</span>
        <span class="local-variable">this</span>.<span class="function">stopAnimation</span> = <span class="keyword">function</span>(attribute){
                <span class="keyword">if</span> (<span class="local-variable">this</span>.initialized) <span class="local-variable">this</span>.screen.stopAnimationRoot(<span class="local-variable">this</span>, attribute)
        }

        <span class="comment">// Determines the background color that should be drawn at a given position.</span>
        <span class="comment">// Returns a vec4 color value, defaults to bgcolor.</span>
        <span class="local-variable">this</span>.<span class="function">bgcolorfn</span> = <span class="keyword">function</span>(pos <span class="comment">/*vec2*/</span>){
                <span class="keyword">return</span> bgcolor
        }

        <span class="local-variable">this</span>.<span class="function">appendChild</span> = <span class="keyword">function</span>(render){
                <span class="comment">// wrap our render function in a temporary view</span>
                <span class="keyword">var</span> vroot = view()
                <span class="comment">// set up a temporary view</span>
                vroot.render = render
                vroot.parent = <span class="local-variable">this</span>
                vroot.rpc = <span class="local-variable">this</span>.rpc
                vroot.screen = <span class="local-variable">this</span>.screen
                vroot.parent_viewport = <span class="local-variable">this</span>._viewport?<span class="local-variable">this</span>:<span class="local-variable">this</span>.parent_viewport
                <span class="comment">// render it</span>
                Render.process(vroot, <span class="predefined-constant">undefined</span>, <span class="predefined-constant">undefined</span>, <span class="predefined-constant">true</span>)
                <span class="comment">// move the children over</span>
                <span class="local-variable">this</span>.children.push.apply(<span class="local-variable">this</span>.children, vroot.children)
                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="integer">0</span>; i &lt; vroot.children.length; i++){
                        vroot.children[i].parent = <span class="local-variable">this</span>
                }
                <span class="comment">// lets cause a relayout</span>
                <span class="local-variable">this</span>.relayout()
        }

        define.<span class="reserved">class</span>(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">'</span><span class="content">hardrect</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>.Shader, <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.updateorder = <span class="integer">0</span>
                <span class="local-variable">this</span>.draworder = <span class="integer">0</span>
                <span class="local-variable">this</span>.dont_scroll_as_viewport = <span class="predefined-constant">true</span>
                <span class="local-variable">this</span>.mesh = vec2.array()
                <span class="local-variable">this</span>.mesh.pushQuad(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">1</span>,<span class="integer">1</span>)
                <span class="local-variable">this</span>.<span class="function">position</span> = <span class="keyword">function</span>(){
                        uv = mesh.xy
                        pos = vec2(mesh.x * view.layout.width, mesh.y * view.layout.height)
                        <span class="keyword">var</span> res = vec4(pos, -<span class="float">0.004</span>, <span class="integer">1</span>) * view.totalmatrix * view.viewmatrix
                        <span class="keyword">return</span> res
                }
                <span class="local-variable">this</span>.<span class="function">color</span> = <span class="keyword">function</span>(){
                        <span class="keyword">var</span> col = view.bgcolorfn(mesh.xy)
                        <span class="keyword">return</span> vec4(col.rgb, col.a * view.opacity)
                }
        })
        <span class="local-variable">this</span>.hardrect = <span class="predefined-constant">true</span>

        <span class="local-variable">this</span>.<span class="function">bordercolorfn</span> = <span class="keyword">function</span>(pos){
                <span class="keyword">return</span> bordercolor
        }

        define.<span class="reserved">class</span>(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">'</span><span class="content">hardborder</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>.Shader, <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.updateorder = <span class="integer">0</span>
                <span class="local-variable">this</span>.draworder = <span class="integer">1</span>
                <span class="local-variable">this</span>.mesh = vec2.array()
                <span class="local-variable">this</span>.dont_scroll_as_viewport = <span class="predefined-constant">true</span>

                <span class="local-variable">this</span>.<span class="function">update</span> = <span class="keyword">function</span>(){
                        <span class="keyword">var</span> view = <span class="local-variable">this</span>.view
                        <span class="keyword">var</span> width = view.layout?view.layout.width:view.width
                        <span class="keyword">var</span> height = view.layout?view.layout.height:view.height
                        <span class="keyword">var</span> bw1 = view.borderwidth[<span class="integer">0</span>]/width
                        <span class="keyword">var</span> bw2 = view.borderwidth[<span class="integer">1</span>]/width
                        <span class="keyword">var</span> bw3 = view.borderwidth[<span class="integer">2</span>]/height
                        <span class="keyword">var</span> bw4 = view.borderwidth[<span class="integer">3</span>]/height

                        <span class="keyword">var</span> mesh = <span class="local-variable">this</span>.mesh = vec2.array()

                        mesh.pushQuad(<span class="integer">0</span>,<span class="integer">0</span>, bw1,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,bw1,<span class="integer">1</span>)
                        mesh.pushQuad(<span class="integer">1</span>-bw2,<span class="integer">0</span>, <span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">1</span>-bw2,<span class="integer">1</span>,<span class="integer">1</span>,<span class="integer">1</span>)
                        mesh.pushQuad(<span class="integer">0</span>,<span class="integer">0</span>, <span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,bw3,<span class="integer">1</span>,bw3)
                        mesh.pushQuad(<span class="integer">0</span>,<span class="integer">1</span>-bw4, <span class="integer">1</span>,<span class="integer">1</span>-bw4,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">1</span>,<span class="integer">1</span>)
                }

                <span class="local-variable">this</span>.mesh.pushQuad(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">1</span>,<span class="integer">1</span>)
                <span class="local-variable">this</span>.mesh.pushQuad(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">1</span>,<span class="integer">1</span>)
                <span class="local-variable">this</span>.mesh.pushQuad(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">1</span>,<span class="integer">1</span>)
                <span class="local-variable">this</span>.mesh.pushQuad(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">1</span>,<span class="integer">1</span>)

                <span class="local-variable">this</span>.<span class="function">position</span> = <span class="keyword">function</span>(){
                        uv = mesh.xy
                        pos = vec2(mesh.x * view.layout.width, mesh.y * view.layout.height)
                        <span class="keyword">return</span> vec4(pos, <span class="integer">0</span>, <span class="integer">1</span>) * view.totalmatrix * view.viewmatrix
                }
                <span class="local-variable">this</span>.<span class="function">color</span> = <span class="keyword">function</span>(){
                        <span class="keyword">var</span> col = view.bordercolorfn(uv.xy)
                        <span class="keyword">return</span> vec4(col.rgb, col.a * view.opacity)
                }
        })

        <span class="comment">// hard edged bgimage shader</span>
        define.<span class="reserved">class</span>(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">'</span><span class="content">hardimage</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>.hardrect, <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.dont_scroll_as_viewport = <span class="predefined-constant">true</span>
                <span class="local-variable">this</span>.updateorder = <span class="integer">0</span>
                <span class="local-variable">this</span>.draworder = <span class="integer">0</span>
                <span class="local-variable">this</span>.texture = Shader.Texture.fromType(Shader.Texture.RGBA)

                <span class="local-variable">this</span>.<span class="function">color</span> = <span class="keyword">function</span>(){
                        <span class="keyword">var</span> img = <span class="local-variable">this</span>.texture.samplemip(vec2(view.bgimageoffset[<span class="integer">0</span>] + mesh.xy.x * view.bgimageaspect[<span class="integer">0</span>], view.bgimageoffset[<span class="integer">1</span>] + mesh.xy.y * view.bgimageaspect[<span class="integer">1</span>]));
                        <span class="keyword">var</span> bg = view.bgcolor

                        <span class="comment">// premultiply alpha</span>
                        img.rgb = (img.rgb * img.a) + (bg.rgb * (<span class="integer">1</span> - img.a));

                        <span class="keyword">var</span> col = mix(bg, img, img.a)

                        <span class="keyword">return</span> vec4(
                                col.r * view.colorfilter[<span class="integer">0</span>],
                                col.g * view.colorfilter[<span class="integer">1</span>],
                                col.b * view.colorfilter[<span class="integer">2</span>],
                                col.a * view.colorfilter[<span class="integer">3</span>] * view.opacity)
                }
        })

        <span class="local-variable">this</span>.<span class="function">onbgimagemode</span> = <span class="keyword">function</span>(ev, v, o) {

                <span class="keyword">if</span> (<span class="local-variable">this</span>.shaders) {
                        <span class="keyword">var</span> shader = <span class="local-variable">this</span>.shaders.hardimage || <span class="local-variable">this</span>.shaders.roundedimage

                        <span class="keyword">if</span> (shader &amp;&amp; shader.texture) {
                                <span class="keyword">var</span> size = shader.texture.size

                                <span class="keyword">var</span> imgw = size[<span class="integer">0</span>]
                                <span class="keyword">var</span> imgh = size[<span class="integer">1</span>]
                                <span class="keyword">var</span> aspect = <span class="local-variable">this</span>._width / <span class="local-variable">this</span>._height
                                <span class="keyword">var</span> uselayout = <span class="predefined-constant">false</span>
                                <span class="keyword">if</span> (isNaN(aspect)) {
                                        uselayout = <span class="predefined-constant">true</span>
                                        aspect = <span class="local-variable">this</span>._layout.width / <span class="local-variable">this</span>._layout.height
                                }
                                <span class="keyword">var</span> ratio = imgw / imgh / aspect
                                <span class="keyword">var</span> rx, ry, fitsize, target, offset

                                <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">stretch</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">resize</span><span class="delimiter">&quot;</span></span>) {
                                        <span class="local-variable">this</span>.bgimageaspect = vec2(<span class="float">1.0</span>,<span class="float">1.0</span>)
                                } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">aspect-fit</span><span class="delimiter">&quot;</span></span>) {
                                        <span class="keyword">if</span> (uselayout) {
                                                rx = <span class="local-variable">this</span>._layout.width / imgw;
                                                ry = <span class="local-variable">this</span>._layout.height / imgh;
                                        } <span class="keyword">else</span> {
                                                rx = <span class="local-variable">this</span>._width / imgw;
                                                ry = <span class="local-variable">this</span>._height / imgh;
                                        }

                                        <span class="keyword">if</span> ((uselayout &amp;&amp; <span class="local-variable">this</span>._layout.width &gt; <span class="local-variable">this</span>._layout.height) || (!uselayout &amp;&amp; <span class="local-variable">this</span>._width &gt; <span class="local-variable">this</span>._height)) {
                                                <span class="local-variable">this</span>.bgimageaspect = vec2(<span class="float">1.0</span> / ratio, <span class="float">1.0</span>)
                                                <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign !== <span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>) {
                                                        fitsize = imgw * ry;
                                                        <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="local-variable">this</span>._layout.width * <span class="float">0.5</span> - (fitsize * <span class="float">0.5</span>);
                                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">end</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-right</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-right</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="local-variable">this</span>._layout.width - fitsize;
                                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">start</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-left</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-left</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="integer">0</span>
                                                        }
                                                        offset = target / fitsize;
                                                        <span class="local-variable">this</span>.bgimageoffset = vec2(-offset, <span class="integer">0</span>);
                                                }
                                        } <span class="keyword">else</span> {
                                                <span class="local-variable">this</span>.bgimageaspect = vec2(<span class="float">1.0</span>, ratio)
                                                <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign !== <span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>) {
                                                        fitsize = imgh * rx;
                                                        <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="local-variable">this</span>._layout.height * <span class="float">0.5</span> - (fitsize * <span class="float">0.5</span>);
                                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">end</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-right</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-left</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="local-variable">this</span>._layout.height - fitsize;
                                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">start</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-right</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-left</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="integer">0</span>
                                                        }
                                                        offset = target / fitsize;
                                                        <span class="local-variable">this</span>.bgimageoffset = vec2(<span class="integer">0</span>, -offset);
                                                }
                                        }
                                } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">aspect-fill</span><span class="delimiter">&quot;</span></span>) {

                                        <span class="keyword">if</span> ((uselayout &amp;&amp; <span class="local-variable">this</span>._layout.width &gt; <span class="local-variable">this</span>._layout.height) || (!uselayout &amp;&amp; <span class="local-variable">this</span>._width &gt; <span class="local-variable">this</span>._height)) {
                                                <span class="local-variable">this</span>.bgimageaspect = vec2(<span class="float">1.0</span>, ratio)

                                                <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign !== <span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>) {
                                                        fitsize = imgh * (<span class="local-variable">this</span>._layout.width / imgw);
                                                        <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="local-variable">this</span>._layout.height * <span class="float">0.5</span> - (fitsize * <span class="float">0.5</span>);
                                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">end</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-left</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-right</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="local-variable">this</span>._layout.height - fitsize;
                                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">start</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-left</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-right</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="integer">0</span>;
                                                        }
                                                        <span class="keyword">if</span> (target) {
                                                                offset = target / fitsize;
                                                                <span class="local-variable">this</span>.bgimageoffset = vec2(<span class="integer">0</span>, -offset);
                                                        }
                                                }
                                        } <span class="keyword">else</span> {
                                                <span class="local-variable">this</span>.bgimageaspect = vec2(<span class="float">1.0</span> / ratio, <span class="float">1.0</span>)
                                                <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign !== <span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>) {
                                                        fitsize = imgw * (<span class="local-variable">this</span>._layout.height / imgh);
                                                        <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="local-variable">this</span>._layout.width * <span class="float">0.5</span> - (fitsize * <span class="float">0.5</span>);
                                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">end</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-right</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-right</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="local-variable">this</span>._layout.width - fitsize;
                                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">start</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-left</span><span class="delimiter">&quot;</span></span> || <span class="local-variable">this</span>._bgimagealign === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-left</span><span class="delimiter">&quot;</span></span>) {
                                                                target = <span class="integer">0</span>;
                                                        }
                                                        <span class="keyword">if</span> (target) {
                                                                offset = target / fitsize;
                                                                <span class="local-variable">this</span>.bgimageoffset = vec2(-offset, <span class="integer">0</span>);
                                                        }
                                                }
                                        }
                                } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>
                                        || <span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>
                                        || <span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>
                                        || <span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>
                                        || <span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-left</span><span class="delimiter">&quot;</span></span>
                                        || <span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-right</span><span class="delimiter">&quot;</span></span>
                                        || <span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>
                                        || <span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-left</span><span class="delimiter">&quot;</span></span>
                                        || <span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-right</span><span class="delimiter">&quot;</span></span>) {

                                        <span class="keyword">var</span> rx, ry

                                        <span class="keyword">if</span> (uselayout) {
                                                rx = <span class="local-variable">this</span>._layout.width / imgw
                                                ry = <span class="local-variable">this</span>._layout.height / imgh
                                        } <span class="keyword">else</span> {
                                                rx = <span class="local-variable">this</span>._width / imgw
                                                ry = <span class="local-variable">this</span>._height / imgh
                                        }

                                        <span class="local-variable">this</span>.bgimageaspect = vec2(rx, ry)

                                        <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">center</span><span class="delimiter">&quot;</span></span>) {
                                                <span class="local-variable">this</span>.bgimageoffset = vec2(<span class="float">0.5</span>, <span class="float">0.5</span>)

                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span>) {

                                                <span class="local-variable">this</span>.bgimageoffset = vec2(<span class="integer">0</span>, <span class="float">0.5</span>)

                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span>) {

                                                <span class="local-variable">this</span>.bgimageoffset = vec2(<span class="float">1.0</span> - rx, <span class="float">0.5</span>)

                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">top</span><span class="delimiter">&quot;</span></span>) {

                                                <span class="local-variable">this</span>.bgimageoffset = vec2(<span class="float">0.5</span>, <span class="integer">0</span>)

                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-left</span><span class="delimiter">&quot;</span></span>) {

                                                <span class="local-variable">this</span>.bgimageoffset = vec2(<span class="integer">0</span>, <span class="integer">0</span>)

                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">top-right</span><span class="delimiter">&quot;</span></span>) {

                                                <span class="local-variable">this</span>.bgimageoffset = vec2(<span class="float">1.0</span> - rx, <span class="integer">0</span>)

                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom</span><span class="delimiter">&quot;</span></span>) {

                                                <span class="local-variable">this</span>.bgimageoffset = vec2(<span class="float">0.5</span>, <span class="float">1.0</span> - ry)

                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-left</span><span class="delimiter">&quot;</span></span>) {

                                                <span class="local-variable">this</span>.bgimageoffset = vec2(<span class="integer">0</span>, <span class="float">1.0</span> - ry); <span class="comment">//</span>

                                        } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="local-variable">this</span>.bgimagemode === <span class="string"><span class="delimiter">&quot;</span><span class="content">bottom-right</span><span class="delimiter">&quot;</span></span>) {

                                                <span class="local-variable">this</span>.bgimageoffset = vec2(<span class="float">1.0</span> - rx, <span class="float">1.0</span> - ry); <span class="comment">//</span>
                                        }

                                }
                        }
                }
        }

        <span class="comment">// rounded rect shader class</span>
        define.<span class="reserved">class</span>(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">'</span><span class="content">roundedrect</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>.Shader, <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.dont_scroll_as_viewport = <span class="predefined-constant">true</span>
                <span class="local-variable">this</span>.updateorder = <span class="integer">0</span>
                <span class="local-variable">this</span>.draworder = <span class="integer">0</span>
                <span class="local-variable">this</span>.vertexstruct = define.struct({
                        <span class="key">pos</span>: vec2,
                        <span class="key">angle</span>: <span class="reserved">float</span>,
                        <span class="key">radmult</span>: vec4,
                        <span class="key">uv</span>:vec2
                })

                <span class="local-variable">this</span>.mesh = <span class="local-variable">this</span>.vertexstruct.array()

                <span class="local-variable">this</span>.depth_test = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>

                <span class="comment">// matrix and viewmatrix should be referenced on view</span>
                <span class="local-variable">this</span>.opacity = <span class="float">0.0</span>
                <span class="local-variable">this</span>.drawtype = <span class="local-variable">this</span>.TRIANGLE_FAN
                <span class="local-variable">this</span>.color_blend = <span class="string"><span class="delimiter">'</span><span class="content">src_alpha * src_color + (1 - src_alpha) * dst_color</span><span class="delimiter">'</span></span>

                <span class="local-variable">this</span>.<span class="function">update</span> = <span class="keyword">function</span>(){
                        <span class="keyword">var</span> view = <span class="local-variable">this</span>.view
                        <span class="keyword">var</span> width = view.layout?view.layout.width:view.width
                        <span class="keyword">var</span> height = view.layout?view.layout.height:view.height
                        <span class="keyword">var</span> radius = view.borderradius

                        <span class="keyword">var</span> mesh = <span class="local-variable">this</span>.mesh = <span class="local-variable">this</span>.vertexstruct.array()

                        <span class="keyword">if</span> (vec4.equals(radius, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>))) {
                                mesh.push([width/<span class="integer">2</span>,height/<span class="integer">2</span>], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="float">0.5</span>,<span class="float">0.5</span>)
                                mesh.push([<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">0</span>,<span class="integer">0</span>)
                                mesh.push([width,<span class="integer">0</span>], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">1</span>,<span class="integer">0</span>)
                                mesh.push([width,height], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">1</span>,<span class="integer">1</span>)
                                mesh.push([<span class="integer">0</span>,height], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">0</span>,<span class="integer">1</span>)
                                mesh.push([<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">0</span>,<span class="integer">0</span>)
                        } <span class="keyword">else</span> {

                                <span class="keyword">var</span> divbase = <span class="float">0.45</span>
                                <span class="keyword">var</span> pidiv1 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * radius[<span class="integer">0</span>]))
                                <span class="keyword">var</span> pidiv2 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * radius[<span class="integer">1</span>]))
                                <span class="keyword">var</span> pidiv3 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * radius[<span class="integer">2</span>]))
                                <span class="keyword">var</span> pidiv4 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * radius[<span class="integer">3</span>]))

                                <span class="keyword">var</span> pimul1 = (PI*<span class="float">0.5</span>)/(pidiv1-<span class="integer">1</span>)
                                <span class="keyword">var</span> pimul2 = (PI*<span class="float">0.5</span>)/(pidiv2-<span class="integer">1</span>)
                                <span class="keyword">var</span> pimul3 = (PI*<span class="float">0.5</span>)/(pidiv3-<span class="integer">1</span>)
                                <span class="keyword">var</span> pimul4 = (PI*<span class="float">0.5</span>)/(pidiv4-<span class="integer">1</span>)

                                <span class="local-variable">this</span>.mesh.push([width/<span class="integer">2</span>,height/<span class="integer">2</span>], <span class="integer">0</span>, [<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="float">0.5</span>,<span class="float">0.5</span>)

                                <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>;p&lt;pidiv1;p++) <span class="local-variable">this</span>.mesh.push(vec2(radius[<span class="integer">0</span>] ,radius[<span class="integer">0</span>]), p*pimul1, vec4(<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>)
                                <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>;p&lt;pidiv2;p++) <span class="local-variable">this</span>.mesh.push(vec2(width - radius[<span class="integer">1</span>]-<span class="integer">1</span>, radius[<span class="integer">1</span>]), p*pimul2 + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>)
                                <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>;p&lt;pidiv3;p++) <span class="local-variable">this</span>.mesh.push(vec2(width - radius[<span class="integer">2</span>]-<span class="integer">1</span>, height - radius[<span class="integer">2</span>]-<span class="integer">1</span>), p*pimul3+ PI, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">1</span>)
                                <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>;p&lt;pidiv4;p++) <span class="local-variable">this</span>.mesh.push(vec2(radius[<span class="integer">3</span>], height - radius[<span class="integer">3</span>]-<span class="integer">1</span>), p*pimul4 + PI + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>), <span class="integer">0</span>,<span class="integer">1</span>)

                                <span class="local-variable">this</span>.mesh.push(vec2( radius[<span class="integer">0</span>] ,radius[<span class="integer">0</span>]), <span class="integer">0</span>, vec4(<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>)
                        }
                }

                <span class="local-variable">this</span>.<span class="function">color</span> = <span class="keyword">function</span>(){
                        <span class="keyword">var</span> col = view.bgcolorfn(vec2(pos.x / view.layout.width, pos.y/view.layout.height))
                        <span class="keyword">return</span> vec4(col.rgb, col.a * view.opacity)
                }

                <span class="local-variable">this</span>.<span class="function">position</span> = <span class="keyword">function</span>(){
                        pos = mesh.pos.xy
                        <span class="keyword">var</span> ca = cos(mesh.angle + PI)
                        <span class="keyword">var</span> sa = sin(mesh.angle + PI)

                        <span class="keyword">var</span> rad  = (mesh.radmult.x * view.borderradius.x + mesh.radmult.y * view.borderradius.y + mesh.radmult.z * view.borderradius.z + mesh.radmult.w * view.borderradius.w)
                        pos.x += ca * rad
                        pos.y += sa * rad

                        uv = vec2(pos.x/view.layout.width,  pos.y/view.layout.height)

                        sized = vec2(pos.x, pos.y)
                        <span class="keyword">var</span> res = vec4(sized.x, sized.y, -<span class="float">0.05</span>, <span class="integer">1</span>) * view.totalmatrix * view.viewmatrix
                        <span class="comment">//res.w -= 0.004</span>
                        <span class="keyword">return</span> res
                }
        })

        <span class="comment">// hard edged bgimage shader</span>
        define.<span class="reserved">class</span>(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">'</span><span class="content">roundedimage</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>.roundedrect, <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.dont_scroll_as_viewport = <span class="predefined-constant">true</span>
                <span class="local-variable">this</span>.updateorder = <span class="integer">0</span>
                <span class="local-variable">this</span>.draworder = <span class="integer">0</span>
                <span class="local-variable">this</span>.texture = Shader.Texture.fromType(Shader.Texture.RGBA)
                <span class="local-variable">this</span>.<span class="function">color</span> = <span class="keyword">function</span>(){
                        <span class="keyword">if</span> (view.bgimageoffset[<span class="integer">0</span>] + uv.xy.x * view.bgimageaspect.x &lt; <span class="float">0.0</span>
                                || view.bgimageoffset[<span class="integer">0</span>] + uv.xy.x * view.bgimageaspect.x &gt; <span class="float">1.0</span>
                                || view.bgimageoffset[<span class="integer">1</span>] + uv.xy.y * view.bgimageaspect.y &lt; <span class="float">0.0</span>
                                || view.bgimageoffset[<span class="integer">1</span>] + uv.xy.y * view.bgimageaspect.y &gt; <span class="float">1.0</span>) {
                                <span class="keyword">return</span> view.bgcolor
                        }
                        <span class="keyword">var</span> col = <span class="local-variable">this</span>.texture.sample(vec2(view.bgimageoffset[<span class="integer">0</span>] + uv.xy.x * view.bgimageaspect[<span class="integer">0</span>], view.bgimageoffset[<span class="integer">1</span>] + uv.xy.y * view.bgimageaspect[<span class="integer">1</span>]))
                        <span class="keyword">return</span> vec4(col.r * view.colorfilter[<span class="integer">0</span>], col.g * view.colorfilter[<span class="integer">1</span>], col.b * view.colorfilter[<span class="integer">2</span>], col.a * view.opacity * view.colorfilter[<span class="integer">3</span>])
                }
        })

        <span class="comment">// rounded rect shader class</span>
        define.<span class="reserved">class</span>(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">'</span><span class="content">shadowrect</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>.Shader, <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.updateorder = <span class="integer">0</span>

                <span class="local-variable">this</span>.vertexstruct = define.struct({
                        <span class="key">pos</span>: vec2,
                        <span class="key">angle</span>: <span class="reserved">float</span>,
                        <span class="key">radmult</span>: vec4,
                        <span class="key">uv</span>:vec2,
                        <span class="key">shadowradius</span>: vec4
                })

                <span class="local-variable">this</span>.mesh = <span class="local-variable">this</span>.vertexstruct.array()

                <span class="local-variable">this</span>.depth_test = <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
                <span class="local-variable">this</span>.draworder = -<span class="integer">1</span>

                <span class="comment">// matrix and viewmatrix should be referenced on view</span>
                <span class="local-variable">this</span>.opacity = <span class="float">0.0</span>
                <span class="local-variable">this</span>.drawtype = <span class="local-variable">this</span>.TRIANGLE_STRIP
                <span class="local-variable">this</span>.color_blend = <span class="string"><span class="delimiter">'</span><span class="content">src_alpha * src_color + (1 - src_alpha) * dst_color</span><span class="delimiter">'</span></span>
                <span class="local-variable">this</span>.<span class="function">update</span> = <span class="keyword">function</span>(){
                        <span class="keyword">var</span> view = <span class="local-variable">this</span>.view

                        <span class="keyword">var</span> width = (view.layout?view.layout.width:view.width)
                        <span class="keyword">var</span> height = (view.layout?view.layout.height:view.height)
                        <span class="keyword">var</span> radius = vec4(Math.max(<span class="integer">1</span>, view.borderradius[<span class="integer">0</span>] + view.dropshadowradius),Math.max(<span class="integer">1</span>, view.borderradius[<span class="integer">1</span>]+ view.dropshadowradius),Math.max(<span class="integer">1</span>, view.borderradius[<span class="integer">2</span>]+ view.dropshadowradius),Math.max(<span class="integer">1</span>, view.borderradius[<span class="integer">3</span>]+ view.dropshadowradius))
                        <span class="keyword">var</span> mesh = <span class="local-variable">this</span>.mesh = <span class="local-variable">this</span>.vertexstruct.array()

                        <span class="keyword">if</span> (vec4.equals(radius, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>))) {
                                mesh.push([width/<span class="integer">2</span>,height/<span class="integer">2</span>], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="float">0.5</span>,<span class="float">0.5</span>)
                                mesh.push([<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">0</span>,<span class="integer">0</span>)
                                mesh.push([width,<span class="integer">0</span>], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">1</span>,<span class="integer">0</span>)
                                mesh.push([width,height], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">1</span>,<span class="integer">1</span>)
                                mesh.push([<span class="integer">0</span>,height], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">0</span>,<span class="integer">1</span>)
                                mesh.push([<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">0</span>, [<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>], <span class="integer">0</span>,<span class="integer">0</span>)
                        } <span class="keyword">else</span> {

                                <span class="keyword">var</span> divbase = <span class="float">0.45</span>
                                <span class="keyword">var</span> pidiv1 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * radius[<span class="integer">0</span>]))
                                <span class="keyword">var</span> pidiv2 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * radius[<span class="integer">1</span>]))
                                <span class="keyword">var</span> pidiv3 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * radius[<span class="integer">2</span>]))
                                <span class="keyword">var</span> pidiv4 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * radius[<span class="integer">3</span>]))

                                <span class="keyword">var</span> pimul1 = (PI*<span class="float">0.5</span>)/(pidiv1-<span class="integer">1</span>)
                                <span class="keyword">var</span> pimul2 = (PI*<span class="float">0.5</span>)/(pidiv2-<span class="integer">1</span>)
                                <span class="keyword">var</span> pimul3 = (PI*<span class="float">0.5</span>)/(pidiv3-<span class="integer">1</span>)
                                <span class="keyword">var</span> pimul4 = (PI*<span class="float">0.5</span>)/(pidiv4-<span class="integer">1</span>)


                                <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>;p&lt;pidiv1;p++){
                                        <span class="local-variable">this</span>.mesh.push(vec2(radius[<span class="integer">0</span>] - view.dropshadowradius,radius[<span class="integer">0</span>]- view.dropshadowradius), p*pimul1, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">0</span>,<span class="integer">0</span>,radius)
                                        <span class="local-variable">this</span>.mesh.push(vec2(radius[<span class="integer">0</span>] - view.dropshadowradius,radius[<span class="integer">0</span>]- view.dropshadowradius), p*pimul1, vec4(<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>,radius)
                                }
                                <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>;p&lt;pidiv2;p++)
                                {
                                        <span class="local-variable">this</span>.mesh.push(vec2(width - radius[<span class="integer">1</span>]-<span class="integer">1</span> + view.dropshadowradius, radius[<span class="integer">1</span>]- view.dropshadowradius), p*pimul2 + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">0</span>,<span class="integer">0</span>,radius)
                                        <span class="local-variable">this</span>.mesh.push(vec2(width - radius[<span class="integer">1</span>]-<span class="integer">1</span> + view.dropshadowradius, radius[<span class="integer">1</span>]- view.dropshadowradius), p*pimul2 + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>,radius)
                                }
                                <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>;p&lt;pidiv3;p++) {
                                        <span class="local-variable">this</span>.mesh.push(vec2(width - radius[<span class="integer">2</span>]-<span class="integer">1</span> + view.dropshadowradius, height - radius[<span class="integer">2</span>]-<span class="integer">1</span>+ view.dropshadowradius), p*pimul3+ PI, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">0</span>,<span class="integer">0</span>,radius)
                                        <span class="local-variable">this</span>.mesh.push(vec2(width - radius[<span class="integer">2</span>]-<span class="integer">1</span> + view.dropshadowradius, height - radius[<span class="integer">2</span>]-<span class="integer">1</span>+ view.dropshadowradius), p*pimul3+ PI, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>,radius)
                                }
                                <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>;p&lt;pidiv4;p++){
                                        <span class="local-variable">this</span>.mesh.push(vec2(radius[<span class="integer">3</span>]- view.dropshadowradius, height - radius[<span class="integer">3</span>]-<span class="integer">1</span>+ view.dropshadowradius), p*pimul4 + PI + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">0</span>,<span class="integer">0</span>,radius)
                                        <span class="local-variable">this</span>.mesh.push(vec2(radius[<span class="integer">3</span>]- view.dropshadowradius, height - radius[<span class="integer">3</span>]-<span class="integer">1</span>+ view.dropshadowradius), p*pimul4 + PI + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>), <span class="integer">1</span>,<span class="integer">0</span>,radius)
                                }
                                <span class="local-variable">this</span>.mesh.push(vec2(radius[<span class="integer">0</span>] - view.dropshadowradius,radius[<span class="integer">0</span>]- view.dropshadowradius), <span class="integer">0</span>, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">0</span>,<span class="integer">0</span>,radius)
                                <span class="local-variable">this</span>.mesh.push(vec2(radius[<span class="integer">0</span>] - view.dropshadowradius,radius[<span class="integer">0</span>]- view.dropshadowradius), <span class="integer">0</span>, vec4(<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>,radius)
                                <span class="local-variable">this</span>.mesh.push(vec2(radius[<span class="integer">0</span>] - view.dropshadowradius,radius[<span class="integer">0</span>]- view.dropshadowradius), <span class="integer">0</span>, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>,radius)
                                <span class="local-variable">this</span>.mesh.push(vec2(radius[<span class="integer">0</span>] - view.dropshadowradius,radius[<span class="integer">0</span>]- view.dropshadowradius), <span class="integer">0</span>, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">0</span>,<span class="integer">0</span>,radius)
                                <span class="local-variable">this</span>.mesh.push(vec2(radius[<span class="integer">3</span>]- view.dropshadowradius, height - radius[<span class="integer">3</span>]-<span class="integer">1</span>+ view.dropshadowradius), p*pimul4 + PI + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">0</span>,<span class="integer">0</span>,radius)
                                <span class="local-variable">this</span>.mesh.push(vec2(width - radius[<span class="integer">1</span>]-<span class="integer">1</span> + view.dropshadowradius, radius[<span class="integer">1</span>]- view.dropshadowradius), p*pimul2 + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">0</span>,<span class="integer">0</span>,radius)
                                <span class="local-variable">this</span>.mesh.push(vec2(width - radius[<span class="integer">2</span>]-<span class="integer">1</span> + view.dropshadowradius, height - radius[<span class="integer">2</span>]-<span class="integer">1</span>+ view.dropshadowradius), p*pimul3+ PI, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">0</span>,<span class="integer">0</span>,radius)
                        }
                }

                <span class="local-variable">this</span>.<span class="function">color</span> = <span class="keyword">function</span>(){
                        <span class="keyword">var</span> col = view.dropshadowcolor
                        col.a *= view.dropshadowopacity
                        col.a *= <span class="float">1.0</span>- pow(mesh.uv.x,<span class="integer">1</span>. + view.dropshadowhardness*<span class="integer">10</span>.)

                        <span class="keyword">return</span> vec4(col.rgb, col.a * view.opacity)
                }

                <span class="local-variable">this</span>.<span class="function">position</span> = <span class="keyword">function</span>(){
                        pos = mesh.pos.xy
                        <span class="keyword">var</span> ca = cos(mesh.angle + PI)
                        <span class="keyword">var</span> sa = sin(mesh.angle + PI)

                        <span class="keyword">var</span> rad  = (mesh.radmult.x * mesh.shadowradius.x + mesh.radmult.y * mesh.shadowradius.y + mesh.radmult.z * mesh.shadowradius.z + mesh.radmult.w * mesh.shadowradius.w)
                        pos.x += ca * rad
                        pos.y += sa * rad

                        uv = vec2(pos.x/view.layout.width,  pos.y/view.layout.height)

                        sized = vec2(pos.x, pos.y)
                        sized += view.dropshadowoffset
                        <span class="keyword">return</span> vec4(sized.x, sized.y, <span class="integer">0</span>, <span class="integer">1</span>) * view.totalmatrix * view.viewmatrix
                }
        })

        <span class="local-variable">this</span>.<span class="function">dropshadowopacity</span> = <span class="keyword">function</span>(){
                <span class="keyword">if</span> (<span class="local-variable">this</span>.dropshadowopacity&gt; <span class="integer">0</span>){
                        <span class="local-variable">this</span>.shadowrect = <span class="predefined-constant">true</span>
                } <span class="keyword">else</span> {
                        <span class="local-variable">this</span>.shadowrect =<span class="predefined-constant">false</span>
                }
        }

        <span class="local-variable">this</span>.<span class="function">moveToFront</span> = <span class="keyword">function</span>(){
                <span class="keyword">if</span> (!<span class="local-variable">this</span>.parent) <span class="keyword">return</span>
                <span class="keyword">var</span> idx = <span class="local-variable">this</span>.parent.children.indexOf(<span class="local-variable">this</span>)
                <span class="local-variable">this</span>.parent.children.splice(idx, <span class="integer">1</span>)
                <span class="local-variable">this</span>.parent.children.push(<span class="local-variable">this</span>)
                <span class="local-variable">this</span>.parent.redraw()
        }

        <span class="local-variable">this</span>.<span class="function">moveToBack</span> = <span class="keyword">function</span>(){
                <span class="keyword">if</span> (!<span class="local-variable">this</span>.parent) <span class="keyword">return</span>
                <span class="keyword">var</span> idx = <span class="local-variable">this</span>.parent.children.indexOf(<span class="local-variable">this</span>)
                <span class="local-variable">this</span>.parent.children.splice(idx, <span class="integer">1</span>)
                <span class="local-variable">this</span>.parent.children.unshift(<span class="local-variable">this</span>)
                <span class="local-variable">this</span>.parent.redraw()
        }

        <span class="local-variable">this</span>.<span class="function">childrenInRect</span> = <span class="keyword">function</span>(rect, exclude) {
                <span class="keyword">var</span> hits = []
                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="integer">0</span>; i&lt;<span class="local-variable">this</span>.children.length; i++) {
                        <span class="keyword">var</span> child = <span class="local-variable">this</span>.children[i]
                        <span class="keyword">if</span> (exclude &amp;&amp; exclude.indexOf(child) &gt; -<span class="integer">1</span>) {
                                <span class="keyword">continue</span>
                        }
                        <span class="keyword">if</span> (child.boundsInsideRect(rect)) {
                                hits.push(child)
                        } <span class="keyword">else</span> {
                                <span class="keyword">var</span> sub = child.childrenInRect(rect, exclude)
                                <span class="keyword">if</span> (sub.length) {
                                        hits = hits.concat(sub)
                                }
                        }
                }
                <span class="keyword">return</span> hits
        }

        <span class="local-variable">this</span>.<span class="function">boundsInsideRect</span> = <span class="keyword">function</span>(r) {
                <span class="keyword">var</span> inside = r[<span class="integer">0</span>] &lt;= <span class="local-variable">this</span>._layout.absx
                        &amp;&amp; r[<span class="integer">1</span>] &lt;= <span class="local-variable">this</span>._layout.absy
                        &amp;&amp; r[<span class="integer">0</span>] + r[<span class="integer">2</span>] &gt;= <span class="local-variable">this</span>._layout.absx + <span class="local-variable">this</span>._layout.width
                        &amp;&amp; r[<span class="integer">1</span>] + r[<span class="integer">3</span>] &gt;= <span class="local-variable">this</span>._layout.absy + <span class="local-variable">this</span>._layout.height
                <span class="keyword">return</span> inside
        }


        <span class="local-variable">this</span>.<span class="function">onpasses</span> = <span class="keyword">function</span>(passes) {
                <span class="keyword">if</span> (<span class="local-variable">this</span>._passes &gt; <span class="integer">9</span>) {
                        console.warn(<span class="string"><span class="delimiter">'</span><span class="content">this.passes has a maximum value of 9.</span><span class="delimiter">'</span></span>)
                        <span class="local-variable">this</span>._passes = <span class="integer">9</span>
                }
                <span class="keyword">if</span> (!<span class="local-variable">this</span>._viewport) <span class="local-variable">this</span>._viewport = <span class="string"><span class="delimiter">'</span><span class="content">2d</span><span class="delimiter">'</span></span>
        }

        <span class="comment">// When passes &gt; 0, create inner classes with names pass0..9 to implement the shaders</span>
        <span class="comment">// for each pass.</span>
        <span class="local-variable">this</span>.RenderPass = define.<span class="reserved">class</span>(<span class="local-variable">this</span>.Shader, <span class="keyword">function</span>(){
                <span class="comment">// create placeholder passes for the compiler</span>
                <span class="local-variable">this</span>.framebuffer = <span class="local-variable">this</span>.pass0 = <span class="local-variable">this</span>.pass1 = <span class="local-variable">this</span>.pass2 = <span class="local-variable">this</span>.pass3 =
                        <span class="local-variable">this</span>.pass4 = <span class="local-variable">this</span>.pass5 = <span class="local-variable">this</span>.pass6 = <span class="local-variable">this</span>.pass7 = <span class="local-variable">this</span>.pass8 =
                        <span class="local-variable">this</span>.pass9 = Shader.prototype.Texture.fromType(<span class="string"><span class="delimiter">'</span><span class="content">rgba_depth_stencil</span><span class="delimiter">'</span></span>)
                <span class="comment">// placeholder view for compiler</span>
                <span class="local-variable">this</span>.view = {<span class="key">viewportmatrix</span>: mat4(), <span class="key">viewmatrix</span>: mat4()}
                <span class="local-variable">this</span>.draworder = <span class="integer">10</span>
                <span class="local-variable">this</span>.updateorder = <span class="integer">10</span>
                <span class="local-variable">this</span>.omit_from_shader_list = <span class="predefined-constant">true</span>;
                <span class="local-variable">this</span>.mesh = vec2.array()
                <span class="local-variable">this</span>.mesh.pushQuad(<span class="integer">0</span>,<span class="integer">0</span>, <span class="integer">0</span>,<span class="integer">1</span>, <span class="integer">1</span>,<span class="integer">0</span>, <span class="integer">1</span>,<span class="integer">1</span>)
                <span class="local-variable">this</span>.width = <span class="integer">0</span>
                <span class="local-variable">this</span>.height = <span class="integer">0</span>
                <span class="local-variable">this</span>.drawcount = <span class="integer">0</span>.
                <span class="local-variable">this</span>.isfloat = <span class="predefined-constant">false</span>
                <span class="local-variable">this</span>.doublebuffer = <span class="predefined-constant">false</span>;

                <span class="local-variable">this</span>.<span class="function">position</span> = <span class="keyword">function</span>(){
                        <span class="keyword">return</span> vec4( mesh.x * width, mesh.y * height, <span class="integer">0</span>, <span class="integer">1</span>) * view.viewportmatrix * view.viewmatrix
                }

                <span class="comment">// child classes extending RenderPass implement color() and use references to</span>
                <span class="comment">// this.framebuffer/pass0..9 internally. See /classes/ui/blurview for an example...</span>
                <span class="local-variable">this</span>.<span class="function">color</span> = <span class="keyword">function</span>(){
                        <span class="keyword">return</span> <span class="string"><span class="delimiter">'</span><span class="content">purple</span><span class="delimiter">'</span></span>
                }
        })

        <span class="comment">// blends current viewport into the parent</span>
        define.<span class="reserved">class</span>(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">'</span><span class="content">viewportblend</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>.Shader, <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.draworder = <span class="integer">10</span>
                <span class="local-variable">this</span>.updateorder = <span class="integer">10</span>
                <span class="local-variable">this</span>.omit_from_shader_list = <span class="predefined-constant">true</span>
                <span class="local-variable">this</span>.texture = Shader.prototype.Texture.fromType(<span class="string"><span class="delimiter">'</span><span class="content">rgba_depth_stencil</span><span class="delimiter">'</span></span>)
                <span class="local-variable">this</span>.mesh = vec2.array()
                <span class="local-variable">this</span>.mesh.pushQuad(<span class="integer">0</span>,<span class="integer">0</span>, <span class="integer">0</span>,<span class="integer">1</span>, <span class="integer">1</span>,<span class="integer">0</span>, <span class="integer">1</span>,<span class="integer">1</span>)
                <span class="local-variable">this</span>.width = <span class="integer">0</span>
                <span class="local-variable">this</span>.height = <span class="integer">0</span>

                <span class="local-variable">this</span>.<span class="function">position</span> = <span class="keyword">function</span>(){
                        <span class="keyword">return</span> vec4( mesh.x * width, mesh.y * height, <span class="integer">0</span>, <span class="integer">1</span>) * view.viewportmatrix * view.viewmatrix
                }

                <span class="local-variable">this</span>.<span class="function">color</span> = <span class="keyword">function</span>(){
                        <span class="keyword">var</span> col = texture.sample(mesh.xy)
                        <span class="keyword">return</span> vec4(col.rgb, col.a * view.opacity)
                }
        })

        <span class="comment">// rounded corner border shader</span>
        define.<span class="reserved">class</span>(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">'</span><span class="content">roundedborder</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>.Shader, <span class="keyword">function</span>(){
                <span class="local-variable">this</span>.dont_scroll_as_viewport = <span class="predefined-constant">true</span>
                <span class="local-variable">this</span>.draworder = <span class="integer">1</span>
                <span class="local-variable">this</span>.updateorder = <span class="integer">1</span>
                <span class="local-variable">this</span>.vertexstruct = define.struct({
                        <span class="key">pos</span>: vec2,
                        <span class="key">angle</span>: <span class="reserved">float</span>,
                        <span class="key">radmult</span>: vec4,
                        <span class="key">uv</span>:vec2
                })
                <span class="local-variable">this</span>.mesh = <span class="local-variable">this</span>.vertexstruct.array()
                <span class="local-variable">this</span>.drawtype = <span class="local-variable">this</span>.TRIANGLE_STRIP

                <span class="local-variable">this</span>.<span class="function">update</span> = <span class="keyword">function</span>(){

                        <span class="keyword">var</span> view = <span class="local-variable">this</span>.view
                        <span class="keyword">var</span> width = view.layout? view.layout.width: view.width
                        <span class="keyword">var</span> height = view.layout? view.layout.height: view.height

                        <span class="keyword">var</span> mesh = <span class="local-variable">this</span>.mesh = <span class="local-variable">this</span>.vertexstruct.array()

                        <span class="keyword">var</span> borderradius = view.borderradius
                        <span class="keyword">var</span> borderwidth = view.borderwidth

                        <span class="keyword">var</span> scale0 = ((borderradius[<span class="integer">0</span>]-borderwidth[<span class="integer">0</span>]))/Math.max(<span class="float">0.01</span>, borderradius[<span class="integer">0</span>])
                        <span class="keyword">var</span> scale1 = ((borderradius[<span class="integer">1</span>]-borderwidth[<span class="integer">0</span>]))/Math.max(<span class="float">0.01</span>, borderradius[<span class="integer">1</span>])
                        <span class="keyword">var</span> scale2 = ((borderradius[<span class="integer">2</span>]-borderwidth[<span class="integer">0</span>]))/Math.max(<span class="float">0.01</span>, borderradius[<span class="integer">2</span>])
                        <span class="keyword">var</span> scale3 = ((borderradius[<span class="integer">3</span>]-borderwidth[<span class="integer">0</span>]))/Math.max(<span class="float">0.01</span>, borderradius[<span class="integer">3</span>])

                        <span class="keyword">var</span> divbase = <span class="float">0.45</span>
                        <span class="keyword">var</span> pidiv1 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * borderradius[<span class="integer">0</span>]))
                        <span class="keyword">var</span> pidiv2 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * borderradius[<span class="integer">1</span>]))
                        <span class="keyword">var</span> pidiv3 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * borderradius[<span class="integer">2</span>]))
                        <span class="keyword">var</span> pidiv4 = Math.floor(Math.max(<span class="integer">2</span>, divbase* PI * borderradius[<span class="integer">3</span>]))

                        <span class="keyword">var</span> pimul1 = (PI*<span class="float">0.5</span>)/(pidiv1-<span class="integer">1</span>)
                        <span class="keyword">var</span> pimul2 = (PI*<span class="float">0.5</span>)/(pidiv2-<span class="integer">1</span>)
                        <span class="keyword">var</span> pimul3 = (PI*<span class="float">0.5</span>)/(pidiv3-<span class="integer">1</span>)
                        <span class="keyword">var</span> pimul4 = (PI*<span class="float">0.5</span>)/(pidiv4-<span class="integer">1</span>)

                        <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>; p &lt; pidiv1; p ++){
                                <span class="local-variable">this</span>.mesh.push(vec2( borderradius[<span class="integer">0</span>] ,borderradius[<span class="integer">0</span>]), p*pimul1, vec4(<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>)
                                <span class="local-variable">this</span>.mesh.push(vec2( borderradius[<span class="integer">0</span>] ,borderradius[<span class="integer">0</span>]), p*pimul1, vec4(scale0,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>)
                        }

                        <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>;p&lt;pidiv2;p++){
                                <span class="local-variable">this</span>.mesh.push(vec2(width-borderradius[<span class="integer">1</span>],borderradius[<span class="integer">1</span>]), p*pimul2 + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>)
                                <span class="local-variable">this</span>.mesh.push(vec2(width-borderradius[<span class="integer">1</span>],borderradius[<span class="integer">1</span>]), p*pimul2 + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,scale1,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>)
                        }
                        <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>;p&lt;pidiv3;p++){
                                <span class="local-variable">this</span>.mesh.push(vec2(width-borderradius[<span class="integer">2</span>],height-borderradius[<span class="integer">2</span>]), p*pimul3 + PI, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">1</span>)
                                <span class="local-variable">this</span>.mesh.push(vec2(width-borderradius[<span class="integer">2</span>],height-borderradius[<span class="integer">2</span>]), p*pimul3 + PI, vec4(<span class="integer">0</span>,<span class="integer">0</span>,scale2,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">1</span>)
                        }
                        <span class="keyword">for</span> (<span class="keyword">var</span> p = <span class="integer">0</span>;p&lt;pidiv4;p++){
                                <span class="local-variable">this</span>.mesh.push(vec2(borderradius[<span class="integer">3</span>],height-borderradius[<span class="integer">3</span>]), p*pimul4 + PI + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>), <span class="integer">0</span>,<span class="integer">1</span>)
                                <span class="local-variable">this</span>.mesh.push(vec2(borderradius[<span class="integer">3</span>],height-borderradius[<span class="integer">3</span>]), p*pimul4 + PI + PI/<span class="integer">2</span>, vec4(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>,scale3), <span class="integer">0</span>,<span class="integer">1</span>)
                        }
                        <span class="local-variable">this</span>.mesh.push(vec2( borderradius[<span class="integer">0</span>] ,borderradius[<span class="integer">0</span>]), <span class="integer">0</span>, vec4(<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>)
                        <span class="local-variable">this</span>.mesh.push(vec2( borderradius[<span class="integer">0</span>] ,borderradius[<span class="integer">0</span>]), <span class="integer">0</span>, vec4(scale0,<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">0</span>), <span class="integer">1</span>,<span class="integer">0</span>)

                }

                <span class="local-variable">this</span>.<span class="function">color</span> = <span class="keyword">function</span>(){
                        <span class="keyword">var</span> col = view.bordercolorfn(pos.xy)
                        <span class="keyword">return</span> vec4(col.rgb, view.opacity * col.a)
                }

                <span class="local-variable">this</span>.<span class="function">position</span> = <span class="keyword">function</span>(){

                        pos = mesh.pos.xy

                        <span class="keyword">var</span> ca = cos(mesh.angle + PI)
                        <span class="keyword">var</span> sa = sin(mesh.angle+PI)



                        <span class="keyword">var</span> rad  = dot(mesh.radmult, view.borderradius)
                        pos.x += ca * rad
                        pos.y += sa * rad

                        uv = vec2(pos.x/view.width,  pos.y/view.height)

                        sized = vec2(pos.x, pos.y)
                        <span class="keyword">return</span> vec4(sized.x, sized.y, <span class="integer">0</span>, <span class="integer">1</span>) * view.totalmatrix * view.viewmatrix
                }
        })

        <span class="comment">// lets pull in the scrollbar on the view</span>
        define.<span class="reserved">class</span>(<span class="local-variable">this</span>, <span class="string"><span class="delimiter">'</span><span class="content">scrollbar</span><span class="delimiter">'</span></span>, require(<span class="string"><span class="delimiter">'</span><span class="content">$ui/scrollbar</span><span class="delimiter">'</span></span>),<span class="keyword">function</span>(){
                <span class="local-variable">this</span>.hardrect = {
                        <span class="key">noscroll</span>:<span class="predefined-constant">true</span>
                }
        })

        <span class="comment">// Basic usage of the splitcontainer</span>
        <span class="local-variable">this</span>.constructor.examples = {
                <span class="function">Usage</span>:<span class="keyword">function</span>(){ <span class="keyword">return</span> [
                        view({<span class="key">margin</span>:<span class="integer">10</span>, <span class="key">width</span>:<span class="integer">50</span>, <span class="key">height</span>:<span class="integer">50</span>, <span class="key">bgcolor</span>:<span class="string"><span class="delimiter">'</span><span class="content">red</span><span class="delimiter">'</span></span>}),
                        view({<span class="key">width</span>:<span class="integer">50</span>, <span class="key">height</span>:<span class="integer">50</span>, <span class="key">bgcolor</span>:<span class="string"><span class="delimiter">'</span><span class="content">green</span><span class="delimiter">'</span></span>, <span class="key">bordercolor</span>:<span class="string"><span class="delimiter">'</span><span class="content">pink</span><span class="delimiter">'</span></span>, <span class="key">borderwidth</span>:<span class="integer">10</span>, <span class="key">borderradius</span>:<span class="integer">7</span>}),
                        view({<span class="key">x</span>:<span class="integer">30</span>, <span class="key">y</span>:<span class="integer">10</span>, <span class="key">width</span>:<span class="integer">50</span>, <span class="key">height</span>:<span class="integer">50</span>, <span class="key">bgcolor</span>:<span class="string"><span class="delimiter">'</span><span class="content">blue</span><span class="delimiter">'</span></span>})
                ]}
        }

})
</pre></td>
</tr></table>

</body>
</html>
